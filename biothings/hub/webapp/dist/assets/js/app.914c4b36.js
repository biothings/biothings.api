(function(e){function t(t){for(var s,o,r=t[0],c=t[1],l=t[2],d=0,_=[];d<r.length;d++)o=r[d],i[o]&&_.push(i[o][0]),i[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(_.length)_.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,r=1;r<a.length;r++){var c=a[r];0!==i[c]&&(s=!1)}s&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},i={app:0},n=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"00a4":function(e,t,a){"use strict";var s=a("b577"),i=a.n(s);i.a},"034f":function(e,t,a){"use strict";var s=a("93a4"),i=a.n(s);i.a},"0466":function(e,t,a){},"0530":function(e,t,a){"use strict";var s=a("9704"),i=a.n(s);i.a},"0531":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},i=[],n=(a("6762"),a("2fdb"),a("bc3a"),a("f5ef")),o=a("2b0e"),r={name:"feature-checker",mounted:function(){},components:{},created:function(){},beforeDestroy:function(){},computed:{},methods:{has_feature:function(e){if(o["a"].config&&o["a"].config.hub_features){var t=o["a"].config.hub_features.includes(e);return t&&n["a"].$emit("feature_".concat(e)),t}return null}}},c=r,l=(a("28cd"),a("0c7c")),u=Object(l["a"])(c,s,i,!1,null,null,null);t["a"]=u.exports},"0569":function(e,t,a){},"07e1":function(e,t,a){},"0c59":function(e,t,a){},"0e14":function(e,t,a){},1:function(e,t){},"117f":function(e,t,a){},"11ae":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui inverted segment",staticStyle:{overflow:"auto",width:"45vw","max-height":"33vh","max-width":"45vw"},attrs:{id:"logviewer"}},[e.records.length?a("table",{staticClass:"ui single line super compact inverted table"},[a("tbody",[e._l(e.records,function(e){return a("log-record",{attrs:{record:e}})}),a("log-record",{attrs:{record:{msg:"",logger:"",ts:"",level:""}}})],2)]):a("div",[e._v("\n        No logs yet...\n    ")]),e.ws_connected?e._e():a("div",{staticClass:"ui small orange label"},[e._v("\n        WebSockect disconnected, can't receive logs\n    ")])])},i=[],n=(a("bc3a"),a("f5ef")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",{staticClass:"record"},[a("td",{staticClass:"logger"},[e._v(e._s(e.record.logger))]),a("td",{class:e.level},[a("pre",{staticClass:"msg"},[e._v(e._s(e.record.msg))])]),a("td",{staticClass:"ts"},[e._v(e._s(e.ts))])])},r=[],c=(a("a481"),{name:"log-record",props:["record"],computed:{level:function(){return"level-"+this.record.level.toLowerCase()},ts:function(){return this.record.ts.replace(/\..*/,"")}}}),l=c,u=(a("ace3"),a("0c7c")),d=Object(u["a"])(l,o,r,!1,null,"30fb9c08",null),_=d.exports,m=1e3,v={name:"log-viewer",props:[],components:{LogRecord:_},mounted:function(){console.log("LogViewer mounted")},created:function(){n["a"].$on("log",this.onLog),n["a"].$on("ws_connected",this.onWSConnected)},beforeDestroy:function(){n["a"].$off("log",this.onLog),n["a"].$off("ws_connected",this.onWSConnected)},ready:function(){},data:function(){return{records:[],ws_connected:!1}},watch:{},methods:{onLog:function(e){this.records.push(e);while(this.records.length>m)this.records.shift();var t=$("#logviewer");t.scrollTop(t.prop("scrollHeight"))},onWSConnected:function(e){this.ws_connected=e}}},f=v,p=(a("3f5c"),Object(u["a"])(f,s,i,!1,null,null,null));t["a"]=p.exports},"11df":function(e,t,a){e.exports=a.p+"assets/img/biothings-studio-color.ef9c10ce.svg"},"148b":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("55dd"),core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("456d"),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_string_ends_with__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("aef6"),core_js_modules_es6_string_ends_with__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_string_ends_with__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es6_string_starts_with__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("f559"),core_js_modules_es6_string_starts_with__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es6_string_starts_with__WEBPACK_IMPORTED_MODULE_6__),_Users_slelong_Documents_Projects_biothings_api_biothings_hub_webapp_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("7618"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_9__),vue__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("2b0e"),axios__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_11__),urijs__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("c909"),urijs__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(urijs__WEBPACK_IMPORTED_MODULE_12__),regenerator_runtime__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("96cf"),regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(regenerator_runtime__WEBPACK_IMPORTED_MODULE_13__),vue_localstorage__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("ead5"),vue_localstorage__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(vue_localstorage__WEBPACK_IMPORTED_MODULE_14__),_Loader_vue__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("3361"),_Actionable_vue__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("bf2a"),vue2_filters__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("a7c6"),vue2_filters__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(vue2_filters__WEBPACK_IMPORTED_MODULE_17__),vue_router__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("8c4f"),_bus_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("f5ef"),_hubapi_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("99bf"),lodash__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("2ef0"),lodash__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_21__),_JobSummary_vue__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("669c"),_Status_vue__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("55dc"),_DataSourceGrid_vue__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("d3ef"),_DataSourceDetailed_vue__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("68b8"),_BuildGrid_vue__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("23f1"),_BuildDetailed_vue__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("562c"),_ApiGrid_vue__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("cadf5"),_EventMessages_vue__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("ed20"),_EventAlert_vue__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("38c9"),_ChooseHub_vue__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("bc6b"),_HubConfig_vue__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("3b59"),_LogViewer_vue__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("11ae"),_Terminal_vue__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("3cbd"),_FeatureChecker_vue__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("0531"),_StandaloneReleases_vue__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("5abd"),_StandaloneWizard_vue__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__("9068"),_SystemUpgrade_vue__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__("16fd"),STUDIO_VERSION="0.2b";function timesofar(e){var t=parseInt(Math.floor(e/3600)),a=parseInt(Math.floor((e-3600*t)/60)),s=parseInt((e-(3600*t+60*a))%60),i=t>9?t:"0"+t,n=a>9?a:"0"+a,o=s>9?s:"0"+s,r="";return t&&(r+=i+"h"),a&&(r+=n+"m"),s&&(r+=o+"s"),r}vue__WEBPACK_IMPORTED_MODULE_10__["a"].use(vue_localstorage__WEBPACK_IMPORTED_MODULE_14___default.a),vue__WEBPACK_IMPORTED_MODULE_10__["a"].use(vue2_filters__WEBPACK_IMPORTED_MODULE_17___default.a),vue__WEBPACK_IMPORTED_MODULE_10__["a"].use(__webpack_require__("2ead")),vue__WEBPACK_IMPORTED_MODULE_10__["a"].use(vue_router__WEBPACK_IMPORTED_MODULE_18__["a"]),vue__WEBPACK_IMPORTED_MODULE_10__["a"].filter("timesofar",timesofar);var UNITS=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],STEP=1024;function pretty_size(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=["bytes","KB","MB","GB","TB","PB"];if(isNaN(parseFloat(e))||!isFinite(e))return"?";var s=0;while(e>=1024)e/=1024,s++;return e.toFixed(+t)+" "+a[s]}function split_and_join(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.split(t).join(" ")}function jsonstr(e){return JSON.stringify(e)}vue__WEBPACK_IMPORTED_MODULE_10__["a"].filter("pretty_size",pretty_size),vue__WEBPACK_IMPORTED_MODULE_10__["a"].filter("splitjoin",split_and_join),vue__WEBPACK_IMPORTED_MODULE_10__["a"].filter("json",jsonstr);var numeral=__webpack_require__("6612");numeral.register("locale","mine",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"thousand",million:"million",billion:"billion",trillion:"trillion"}}),numeral.locale("mine"),vue__WEBPACK_IMPORTED_MODULE_10__["a"].filter("formatNumeric",function(e,t){return numeral(e).format(t)}),vue__WEBPACK_IMPORTED_MODULE_10__["a"].filter("formatNumber",function(e){return numeral(e).format("0.00 a")}),vue__WEBPACK_IMPORTED_MODULE_10__["a"].filter("formatInteger",function(e){return numeral(e).format("0 a")}),vue__WEBPACK_IMPORTED_MODULE_10__["a"].filter("replace",function(e,t,a){return e.replace(t,a)});var router=new vue_router__WEBPACK_IMPORTED_MODULE_18__["a"],PING_INTERVAL_MS=1e4;__webpack_exports__["a"]={name:"app",router:router,mixins:[_FeatureChecker_vue__WEBPACK_IMPORTED_MODULE_35__["a"],_Loader_vue__WEBPACK_IMPORTED_MODULE_15__["a"],_Actionable_vue__WEBPACK_IMPORTED_MODULE_16__["a"]],components:{JobSummary:_JobSummary_vue__WEBPACK_IMPORTED_MODULE_22__["a"],EventMessages:_EventMessages_vue__WEBPACK_IMPORTED_MODULE_29__["a"],EventAlert:_EventAlert_vue__WEBPACK_IMPORTED_MODULE_30__["a"],ChooseHub:_ChooseHub_vue__WEBPACK_IMPORTED_MODULE_31__["a"],HubConfig:_HubConfig_vue__WEBPACK_IMPORTED_MODULE_32__["a"],Loader:_Loader_vue__WEBPACK_IMPORTED_MODULE_15__["a"],LogViewer:_LogViewer_vue__WEBPACK_IMPORTED_MODULE_33__["a"],Terminal:_Terminal_vue__WEBPACK_IMPORTED_MODULE_34__["a"],SystemUpgrade:_SystemUpgrade_vue__WEBPACK_IMPORTED_MODULE_38__["a"]},mounted:function(){$("#conn").popup({on:"hover"}),$(".menu .item").tab(),$(".ui.sticky").sticky({context:"#page_content"}),$(".ui.utilssticky").sticky({context:"#app"});var e=vue__WEBPACK_IMPORTED_MODULE_10__["a"].localStorage.get("last_conn");this.conn=this.default_conn,e&&(this.conn=JSON.parse(e)),this.setupConnection(),this.skip_studio_compat=vue__WEBPACK_IMPORTED_MODULE_10__["a"].localStorage.get("skip_studio_compat")},created:function(){console.log("App created"),_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$on("reconnect",this.setupConnection),_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$on("connect",this.setupConnection,null,"/"),_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$on("feature_terminal",this.setupTerminal),_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$on("feature_ws",this.setupLogs),_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$on("redirect",this.redirect),this.conn=this.default_conn},beforeDestroy:function(){_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$off("reconnect",this.setupConnection),_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$off("connect",this.setupConnection),_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$off("feature_terminal",this.setupTerminal),_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$off("feature_ws",this.setupLogs),_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$off("redirect",this.redirect)},data:function(){return{routes:[],menu:[],ws_connection:"disconnected",socket_msg:"",socket:null,msg_timestamp:null,latency_value:null,ping_interval:PING_INTERVAL_MS,default_conn:{icon:"assets/biothings-studio-color.svg",name:"BioThings Studio",app_version:null,biothings_version:null,url:"http://localhost:7080"},conn:null,cancel_redirect:!1,redirect_url:null,required_studio_version:null,current_studio_version:STUDIO_VERSION,compat_urls:[],redirect_delay:5e3,readonly_mode:!0,readonly_switch:!0}},computed:{str_app_version:function(){return this.getVersionAsString(this.conn.app_version)},str_biothings_version:function(){return this.getVersionAsString(this.conn.biothings_version)},studio_features:function(){return this.conn.features?this.conn.features.join(", "):"not listed"},biothings_needs_upgrade:function(){return!!Object(this.conn.biothings_version).hasOwnProperty("upgrade")},app_needs_upgrade:function(){return!!Object(this.conn.app_version).hasOwnProperty("upgrade")},needs_upgrade:function(){return this.biothings_needs_upgrade||this.app_needs_upgrade}},watch:{latency_value:function(e,t){e!=t&&this.evalLatency(t,e)},conn:function(e,t){e!=t&&(this.conn.icon?$(".logo").attr("src",this.conn.icon):$(".logo").attr("src",this.default_conn.icon))},readonly_mode:function(e,t){this.actionable=e,_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$emit("readonly_mode",e)},readonly_switch:function(e,t){null!==e&&(this.readonly_mode=e,vue__WEBPACK_IMPORTED_MODULE_10__["a"].localStorage.set("readonly_switch",JSON.stringify(this.readonly_switch)))},required_studio_version:function(e,t){console.log("this.required_studio_version, old ".concat(t," new ").concat(e)),e!=t&&this.selectStudio(e)}},methods:{setupUIByFeatures:function(){if(console.log("Setup UI according to listed features"),console.log(vue__WEBPACK_IMPORTED_MODULE_10__["a"].config.hub_features),this.routes=[],this.menu=[],this.has_feature("readonly"))this.readonly_mode=!0,console.log("Hub is read-only, deactivate readonly switch"),this.readonly_switch=null;else{this.readonly_mode=!1,console.log("Hub is read/write, activate readonly switch");var e=vue__WEBPACK_IMPORTED_MODULE_10__["a"].localStorage.get("readonly_switch");null!==e?(this.readonly_switch=JSON.parse(e),this.readonly_mode=this.readonly_switch):this.readonly_switch=this.readonly_mode}if(this.actionable=this.readonly_mode,this.has_feature("source")&&this.has_feature("build")&&(console.log("Setup Home tab"),this.routes.push({path:"/",component:_Status_vue__WEBPACK_IMPORTED_MODULE_23__["a"]}),this.menu.push({path:"/",name:"Home",icon:"home"})),this.has_feature("source")&&(console.log("Setup Sources tab"),this.routes.push({path:"/sources",component:_DataSourceGrid_vue__WEBPACK_IMPORTED_MODULE_24__["a"]}),this.routes.push({path:"/source/:_id",component:_DataSourceDetailed_vue__WEBPACK_IMPORTED_MODULE_25__["a"],props:!0}),this.menu.push({path:"/sources",name:"Sources",icon:"database"})),this.has_feature("build")&&(console.log("Setup Builds tab"),this.routes.push({path:"/builds",component:_BuildGrid_vue__WEBPACK_IMPORTED_MODULE_26__["a"]}),this.routes.push({path:"/build/:_id",component:_BuildDetailed_vue__WEBPACK_IMPORTED_MODULE_27__["a"],props:!0,name:"build"}),this.menu.push({path:"/builds",name:"Builds",icon:"cubes"})),this.has_feature("autohub")){console.log("Setup autohub tab");var t="/standalone";this.routes.push({path:t,component:_StandaloneReleases_vue__WEBPACK_IMPORTED_MODULE_36__["a"]});var a=t+"wizard";this.routes.push({path:a,component:_StandaloneWizard_vue__WEBPACK_IMPORTED_MODULE_37__["a"],name:"wizard"}),this.menu.push({path:t,name:"Releases",icon:"globe"})}this.has_feature("api")&&(console.log("Setup API tab"),this.routes.push({path:"/apis",component:_ApiGrid_vue__WEBPACK_IMPORTED_MODULE_28__["a"]}),this.menu.push({path:"/apis",name:"API",icon:"shield alternate"})),this.menu.length&&"/"!=this.menu[0].path&&(this.menu[0].path="/",this.menu[0].name="Home",this.routes[0].path="/"),router.addRoutes(this.routes)},getVersionAsString:function(e){try{return"object"==Object(_Users_slelong_Documents_Projects_biothings_api_biothings_hub_webapp_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_7__["a"])(e)?"".concat(e.branch," [").concat(e.commit,"] [").concat(e.date,"]"):e}catch(t){return null}},dispatchEvent:function(e){if("log"==e.op)_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$emit("log",e);else if("shell"==e.op)_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$emit("shell",e);else if(e.obj){if(e.data&&e.data.msg.startsWith("{")&&e.data.msg.endsWith("}"))try{var t=JSON.parse(e.data.msg);if("alert"==t["type"])return void _bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$emit("alert",t);console.log("Unknown structured event type: ".concat(t["type"]))}catch(s){}var a="change_".concat(e.obj);console.log("dispatch event ".concat(a," (").concat(e._id,"): ").concat(e.op," [").concat(e.data,"]")),_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$emit(a,e._id,e.op,e.data)}},evalLatency:function(e,t){var a={};function s(e){return null==e?(a["color"]="grey",a["quality"]="unknown"):e>0&&e<=20?(a["color"]="green",a["quality"]="excellent"):e>20&&e<=30?(a["color"]="olive",a["quality"]="good"):e>30&&e<=50?(a["color"]="yellow",a["quality"]="average"):e>50&&e<=100?(a["color"]="orange",a["quality"]="poor"):e>100?(a["color"]="red",a["quality"]="very poor"):(a["color"]="brown",a["quality"]="???"),a}s(e),s(t)},openConfig:function(){this.loading();var e=this;$(".ui.basic.config.modal").modal("setting",{detachable:!1,closable:!1,onApprove:function(){e.loaded()},onDeny:function(){e.loaded()}}).modal("show")},openConnection:function(){this.setupConnection(null,!1)},setupConnection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!=e&&(this.conn=e),/\/connect=/.test(window.location.hash)){var a=window.location.hash.replace(/.*\/connect=/,"");console.log("Connect from anchor hash: ".concat(a)),router.push({name:"/"})}else{a=this.conn["url"].replace(/\/$/,"");console.log("Connecting to ".concat(this.conn.name," (").concat(a,")"))}_hubapi_js__WEBPACK_IMPORTED_MODULE_20__["a"].base(a),this.refreshConnection(a),vue__WEBPACK_IMPORTED_MODULE_10__["a"].localStorage.set("last_conn",JSON.stringify(this.conn)),this.setupSocket(t)},getStudioWebappRoots:function(){var e=new urijs__WEBPACK_IMPORTED_MODULE_12___default.a(location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")),t=[e.toString()+"/"],a=["https://studio.biothings.io"];return vue__WEBPACK_IMPORTED_MODULE_10__["a"].localStorage.get("remote_webapps")&&(t=vue__WEBPACK_IMPORTED_MODULE_10__["a"].localStorage.get("remote_webapps"),Object(_Users_slelong_Documents_Projects_biothings_api_biothings_hub_webapp_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_7__["a"])(t)!==Array&&(t=[t])),Array.prototype.push.apply(t,a),console.log("Studio webapp roots: ".concat(t)),t},selectStudio:function(e){var t=this.getStudioWebappRoots(),a=new urijs__WEBPACK_IMPORTED_MODULE_12___default.a(location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")),s=this;if(console.log("Now selecting Studio version ".concat(e)),"this"!=e)if(e){for(var i in console.log("Selected compatible version ".concat(e)),t){var n=t[i];if(e==this.current_studio_version)var o=new urijs__WEBPACK_IMPORTED_MODULE_12___default.a(n);else o=new urijs__WEBPACK_IMPORTED_MODULE_12___default.a([n,e].join("/"));o.normalize();var r=o.toString();s.compat_urls.push(r)}if(s.compat_urls){var c=[];for(var l in s.compat_urls){var u=function(e){fetch(s.compat_urls[e]).then(function(t){c.push({url:s.compat_urls[e],valid:t.ok,order:e})})};console.log("Checking ".concat(s.compat_urls[l])),u(l)}var d=500,_=s.redirect_delay/500,m=0,v=setInterval(function(){if(Object.keys(c).length!=s.compat_urls.length)m++,console.log("Checking URL for compatible version ".concat(m,"/").concat(_)),m>_&&(console.log("Give up"),clearInterval(v),$(".redirect.modal").modal("show"));else{console.log("All checked:"),console.log(c),clearInterval(v),s.cancel_redirect=!1,s.redirect_url=null;var e=c.filter(function(e){return 1==e.valid}).sort(function(e,t){return e.order-t.order});if(!e.length)return console.log("No valid redirection, weird..."),void $(".redirect.modal").modal("show");if(s.redirect_url=e[0].url,s.redirect_url){if(a.toString()==s.redirect_url)return void console.log("Current Studio is compatible");$(".redirect.modal").modal("setting",{detachable:!1,closable:!1,onApprove:function(){window.location.replace(s.redirect_url+window.location.hash)},onDeny:function(){s.cancel_redirect=!0}}).modal("show"),setTimeout(function(){s.cancel_redirect||(console.log("Redirecting to ".concat(s.redirect_url)),window.location.replace(s.redirect_url+window.location.hash))},s.redirect_delay)}}},d)}else console.log("Could not ensure compatibity")}else console.log("Couldn't find any suitable version, will keep current as failover");else console.log("Running version is the actual required one, all good")},checkCompat:function checkCompat(data){if("true"!=vue__WEBPACK_IMPORTED_MODULE_10__["a"].localStorage.get("skip_studio_compat")){var studio_roots=this.getStudioWebappRoots(),self=this,compat_url=studio_roots[0]+"/compat.json";compat_url=compat_url.replace(/([^:]\/)\/+/g,"$1"),console.log("Load compatibility list from ".concat(compat_url)),axios__WEBPACK_IMPORTED_MODULE_11___default.a.get(compat_url).then(function(e){var t=e.data;for(var a in console.log("Compatibility options:"),console.log(t),t){var s=t[a]["when"];for(var i in s)if(data[i]){try{var n=data[i].split(" ").map(function(e){var t=/\[(.*)\]/.exec(e);return t&&t[1]||e})}catch(p){n=[data[i]["branch"],data[i]["commit"],data[i]["date"]]}var o=n[0];switch(n.length){case 2:var r=n[1],c=null;break;case 3:r=n[1],c=n[2];break;default:r=null,c=null}var l=s[i]["branch"],u=s[i]["commit"],d=s[i]["date"];if(console.log("Hub run ".concat(i," branch:").concat(o," commit:").concat(r," commit-date:").concat(c)),console.log("Checking compat branch:".concat(l," commit:").concat(u," commit-date:").concat(d)),l==o){if(u){if(u!=r){console.log("Commit mismatch, need ".concat(u," but got ").concat(r));continue}console.log("Commits matches"),self.required_studio_version=t[a]["requires"];break}if(d){if(!c){console.log("Date compat needed but no commit date returned from Hub");continue}var _=d.split(",");if(2==_.length)var m=_[0],v=_[1],f=evalDateCompat(m,c)&&evalDateCompat(v,c);else f=evalDateCompat(d,c);if(f){console.log("Dates match"),self.required_studio_version=t[a]["requires"];break}console.log("Date mismatch, need ".concat(d," but got ").concat(c));continue}self.required_studio_version=t[a]["requires"],console.log("Branches match, required Studio version: ".concat(self.required_studio_version));break}console.log("Branch mismatch, need ".concat(l," but got ").concat(o))}if(self.required_studio_version)break;console.log("No match found or no required version specified")}}).catch(function(e){console.log("Couldn't load compat.json file"),console.log(e)})}else console.log("Skip Studio version compatibility, as instructed in local storage");function evalDateCompat(refd,d){var res=/^\D+/.exec(refd),op=null;if(res){var op=res[0];refd=refd.slice(op.length)}else var op="===";var jsd=new Date(d),jsrefd=new Date(refd);console.log("eval: ".concat(jsd," ").concat(op," ").concat(jsrefd));var exp=String.prototype.concat("+jsd ",op," +jsrefd"),isok=eval(String.prototype.concat("+jsd ",op," +jsrefd"));return isok}},refreshConnection:function(e){var t=this,a=this;a.loading(),axios__WEBPACK_IMPORTED_MODULE_11___default.a.get(e).then(function(s){console.log(s.data.result),t.checkCompat(s.data.result),t.conn=s.data.result,t.conn["url"]=e,vue__WEBPACK_IMPORTED_MODULE_10__["a"].config.hub_features=s.data.result.features,a.setupUIByFeatures(),a.loaded()}).catch(function(a){console.log("Error connecting to ".concat(e)),console.log(JSON.stringify(a)),t.loaderror(a),_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$emit("connection_failed",e,a)})},setupSocket:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this,s=null;this.msg_timestamp=null,_hubapi_js__WEBPACK_IMPORTED_MODULE_20__["a"].get("/ws/info").then(function(i){a.ws_connection="connecting",console.log("WebSocket available"),e.socket=new SockJS(axios__WEBPACK_IMPORTED_MODULE_11___default.a.defaults.baseURL+"/ws?token="+_hubapi_js__WEBPACK_IMPORTED_MODULE_20__["a"].getAccessToken(),s),e.socket.onopen=function(){a.ws_connection="connected",this.ping_interval=PING_INTERVAL_MS,a.pingServer(),t&&window.location.assign(t),_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$emit("ws_connected",!0)},e.socket.onmessage=function(e){var t=Date.now();a.latency_value=t-a.msg_timestamp,a.socket_msg=e.data,a.dispatchEvent(e.data),a.msg_timestamp=null},e.socket.onclose=function(){a.closeConnection()},e.socket.ontimeout=function(e){console.log("got error"),console.log(e)}}).catch(function(t){console.log("Can't connect using websocket"),console.log(t),a.ws_connection="disconnected",e.conn=e.default_conn})},closeConnection:function(){this.ws_connection="disconnected",this.socket.close(),this.msg_timestamp=null,_bus_js__WEBPACK_IMPORTED_MODULE_19__["a"].$emit("ws_connected",!1)},pingServer:function(){null!=this.msg_timestamp&&(console.log("Sent a ping but got no pong, disconnect"),console.log(router),this.closeConnection()),this.msg_timestamp=Date.now(),this.socket.send(JSON.stringify({op:"ping"})),"connected"==this.ws_connection&&(setTimeout(this.pingServer,this.ping_interval),this.ping_interval=Math.min(1.2*this.ping_interval,6*PING_INTERVAL_MS))},toggleCheckCompat:function(e){var t=$("#skip_compat").prop("checked");vue__WEBPACK_IMPORTED_MODULE_10__["a"].localStorage.set("skip_studio_compat",t.toString()),this.skip_studio_compat=t},switchReadOnly:function(){this.readonly_switch=!this.readonly_switch},setupTerminal:function(){$(".terminal.item").popup({popup:$(".terminal.popup"),on:"click",onVisible:function(){$("#termcommand").focus()},closable:!1,position:"top left"})},setupLogs:function(){$(".logs.item").popup({popup:$(".logs.popup"),on:"click",closable:!1,position:"top left",lastResort:"top right"})},showLogs:function(e){console.log(e)},redirect:function(e,t){console.log("Redirecting to ".concat(e,", with param ").concat(JSON.stringify(t))),router.push({name:e,params:t})},showUpgrades:function(){this.loading();var e=this;$(".ui.basic.upgrade.modal").modal("setting",{detachable:!1,closable:!1,onApprove:function(){e.loaded()},onDeny:function(){e.loaded()}}).modal("show")}}}},"15a0":function(e,t,a){"use strict";var s=a("117f"),i=a.n(s);i.a},"16fd":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui fluid container"},[a("div",{staticClass:"ui sections accordion"},[a("div",{staticClass:"section title"},[a("i",{staticClass:"dropdown icon"}),e._v("\n                Application\n                "),e.app_version&&e.app_version.upgrade?a("i",{staticClass:"small upgrade sync icon"}):e._e()]),a("div",{staticClass:"content"},[a("p",{staticClass:"transition hidden"},[a("commits",{attrs:{section:e.app_version,codebase:"application"}})],1)]),a("div",{staticClass:"section title"},[a("i",{staticClass:"dropdown icon"}),e._v("\n                BioThings SDK\n                "),e.biothings_version&&e.biothings_version.upgrade?a("i",{staticClass:"small upgrade sync icon"}):e._e()]),a("div",{staticClass:"content"},[a("p",{staticClass:"transition hidden"},[a("commits",{attrs:{section:e.biothings_version,codebase:"biothings_sdk"}})],1)])])])},i=[],n=a("bc3a"),o=a.n(n),r=a("f5ef"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.section&&e.section.upgrade?a("span",[a("div",[e._v("\n        A new update is available for branch "),a("code",{staticClass:"branch"},[e._v(e._s(e.section.branch))]),e._v(", with "),a("b",{staticClass:"total"},[e._v(e._s(e.section.upgrade.total))]),e._v(" commit(s) available.\n        "),a("button",{staticClass:"mini ui icon button",class:e.actionable,on:{click:function(t){return e.upgrade(e.codebase)}}},[e._v("\n            Upgrade\n        ")])]),a("table",{staticClass:"ui small collapsing table"},[e._m(0),a("tbody",e._l(e.section.upgrade.commits,function(t){return a("tr",[a("td",[t.url?a("span",[a("a",{attrs:{href:t.url}},[e._v(e._s(t.hash))])]):a("span",[e._v("\n                        "+e._s(t.hash)+"\n                    ")])]),a("td",[e._v(e._s(t.date))]),a("td",[e._v(e._s(t.message.replace(/\n$/,"")))])])}),0),e.section.upgrade.commits.length<e.section.upgrade.total?a("tfoot",[e._m(1)]):e._e()])]):a("span",[e._v("\n    No updates available for now.\n")])},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Commit")]),a("th",[e._v("Date")]),a("th",[e._v("Message")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",{attrs:{colspan:"3"}},[a("i",[e._v("More commits available in this update, only showing the first ones...")])])])}],u=a("3361"),d=a("bf2a"),_={name:"commits",props:["section","codebase"],components:{},mixins:[u["a"],d["a"]],mounted:function(){},created:function(){},updated:function(){},beforeDestroy:function(){},data:function(){return{}},computed:{},methods:{upgrade:function(e){console.log("Upgrading code for ".concat(e));var t=this;this.loading(),o.a.put(o.a.defaults.baseURL+"/code/upgrade/".concat(e)).then(function(e){return console.log(e.data.result),t.loaded(),r["a"].$emit("restart_hub"),!0}).catch(function(e){console.log(e),t.loaderror(e)})}}},m=_,v=(a("5988"),a("0c7c")),f=Object(v["a"])(m,c,l,!1,null,"4e2f2bbc",null),p=f.exports,h={name:"system-upgrade",props:["app_version","biothings_version"],components:{Commits:p},mixins:[],mounted:function(){$(".ui.sections.accordion").accordion()},created:function(){},updated:function(){},beforeDestroy:function(){},data:function(){return{}},computed:{},methods:{}},b=h,g=(a("15a0"),Object(v["a"])(b,s,i,!1,null,"65eb0dac",null));t["a"]=g.exports},1792:function(e,t,a){"use strict";var s=a("21f7"),i=a.n(s);i.a},"1ab6":function(e,t,a){"use strict";a("7f7f");var s=a("d225"),i=a("b0b4"),n=a("f5ef"),o=a("99bf"),r={UserPoolId:"us-west-2_KAglRSC16",ClientId:"668qr87fc875enqadve7o4fno7"},c=r,l=a("4c44"),u=new l["c"](c),d=function(){function e(){Object(s["a"])(this,e)}return Object(i["a"])(e,[{key:"signIn",value:function(e,t){var a={UserName:e,Password:t,Storage:new l["d"]({domain:window.location.hostname})},s=new l["a"](a),i={Username:e,Pool:u,Storage:new l["d"]({domain:window.location.hostname})},o=new l["b"](i);o.authenticateUser(s,{onSuccess:function(t){n["a"].$emit("logged",e,t)},onFailure:function(t){n["a"].$emit("logerror",e,t.name,t.message)}})}},{key:"signOut",value:function(){u.client.request("GlobalSignOut",{AccessToken:o["a"].getAccessToken()},function(e){e&&n["a"].$emit("logerror",e.name,e.message)})}},{key:"refreshAccessToken",value:function(){var e=this,t={REFRESH_TOKEN:o["a"].getRefreshToken()},a={ClientId:u.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:t};u.client.request("InitiateAuth",a,function(t,a){if(t)console.log("Error while refreshing access token:"),console.log(t),e.signOut(),o["a"].clearLoggedUser();else{var s=a.AuthenticationResult.AccessToken;document.cookie="biothings-access-token="+s}})}}]),e}();t["a"]=new d},"1b7e":function(e,t,a){},"1bf6":function(e,t,a){"use strict";var s=a("eb25"),i=a.n(s);i.a},"1f05":function(e,t,a){"use strict";var s=a("b8fb"),i=a.n(s);i.a},"1f7e":function(e,t,a){"use strict";var s=a("bc46"),i=a.n(s);i.a},"1fd2":function(e,t,a){},2:function(e,t){},2033:function(e,t,a){},"20a7":function(e,t,a){"use strict";var s=a("b58d"),i=a.n(s);i.a},"21f7":function(e,t,a){},"23f1":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"builds"}},[a("div",{staticClass:"ui left vertical labeled icon small inverted sidebar menu"},[e._m(0),e._l(e.build_configs,function(t,s){return a("a",{staticClass:"ui buildconfigs dropdown item",attrs:{id:"config_"+s}},[a("i",{staticClass:"dropdown icon"}),a("div",{class:["ui",e.build_colors[s],"empty circular label"]}),e._v("\n            "+e._s(s)+" "),t.error?a("b",{staticClass:"red"},[a("i",{staticClass:"red bell icon"})]):e._e(),a("div",{staticClass:"ui inverted menu"},[t.error?e._e():a("div",{staticClass:"item",class:e.actionable,attrs:{"conf-name":s,id:"create_"+s},on:{click:function(t){return e.newBuild(t)}}},[a("i",{staticClass:"cube icon"}),e._v("\n                    Create new build\n                ")]),a("div",{staticClass:"item",attrs:{"conf-name":s},on:{click:function(t){return e.editConfiguration(t)}}},[a("i",{staticClass:"edit outline icon"}),e._v("\n                    "+e._s(e.readonly?"View":"Edit")+" configuration\n                    "),t.error?a("b",{staticClass:"red",attrs:{id:"edit_"+s}},[a("i",{staticClass:"red bell icon"})]):e._e()]),a("div",{staticClass:"item",class:e.actionable,attrs:{"conf-name":s,id:"delete_"+s},on:{click:function(t){return e.deleteConfiguration(t)}}},[a("i",{staticClass:"trash alternate outline icon"}),e._v("\n                    Delete configuration\n                ")])])])}),e._m(1),a("a",{staticClass:"item",class:e.actionable,on:{click:e.createConfiguration}},[e._m(2),a("div",[e._v("New configuration")])]),a("a",{staticClass:"item",on:{click:e.toggleShowArchivedConfigs}},[e._m(3),a("div",[e._v(e._s(e.include_archived_configs?"Hide":"Show")+"  archived configurations")])])],2),a("div",{staticClass:"pusher"},[a("div",{staticClass:"ui main container"},[a("div",{staticClass:"ui segment"},[a("div",{staticClass:"ui secondary small menu"},[e._m(4),a("a",{staticClass:"right aligned item"},[e.conf_filter?a("button",{staticClass:"ui clearconffilter button",on:{click:e.clearFilter}},[e._v("\n                            Clear \n                        ")]):e._e(),a("select",{directives:[{name:"model",rawName:"v-model",value:e.conf_filter,expression:"conf_filter"}],staticClass:"ui filterbuilds dropdown",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.conf_filter=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("Filter")]),e._l(e.build_configs,function(t,s){return a("option",{domProps:{value:s}},[a("div",{class:["ui",e.build_colors[s],"empty circular label"]}),e._v("\n                                "+e._s(s)+"\n                            ")])})],2)]),a("a",{staticClass:"item"},[a("div",{staticClass:"ui includearchived checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.only_archived,expression:"only_archived"}],attrs:{type:"checkbox",name:"includearchived"},domProps:{checked:Array.isArray(e.only_archived)?e._i(e.only_archived,null)>-1:e.only_archived},on:{change:function(t){var a=e.only_archived,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=null,o=e._i(a,n);s.checked?o<0&&(e.only_archived=a.concat([n])):o>-1&&(e.only_archived=a.slice(0,o).concat(a.slice(o+1)))}else e.only_archived=i}}}),a("label",[e._v("Show archived builds only")])])])])]),a("div",{staticClass:"ui centered grid"},e._l(e.builds,function(t){return a("div",{staticClass:"ui five wide column"},[a("build",{attrs:{pbuild:t,color:e.build_colors[t.build_config.name]}})],1)}),0)])]),a("div",{staticClass:"ui basic buildconfiguration modal"},[e._m(5),a("div",{staticClass:"content"},[a("div",{staticClass:"ui buildconfiguration form"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"eight wide column"},[e.buildconf_error?a("div",{staticClass:"ui negative message"},[a("div",{staticClass:"header"},[e._v("\n                                Error in build configuration\n                              ")]),a("p",[e._v(e._s(e.buildconf_error))])]):e._e(),a("label",[e._v("Enter a build configuration name")]),a("input",{attrs:{type:"text",id:"conf_name",placeholder:"Configuration name",autofocus:""}}),a("br"),a("br"),a("label",[e._v('Enter a name for the type of stored documents ("gene", "variant", ...)')]),a("input",{attrs:{type:"text",id:"doc_type",placeholder:"Document type",autofocus:""}}),a("br"),a("br"),a("label",[e._v("Select the sources used to create merged data")]),a("select",{staticClass:"ui fluid sources dropdown",attrs:{id:"selected_sources",multiple:""}},[a("option",{attrs:{value:""}},[e._v("Available sources")]),e._l(e.sources,function(t){return a("option",[e._v(e._s(t))])})],2),a("br"),a("label",[e._v("Once sources are selected, choose sources providing root documents")]),e._m(6),a("br"),a("label",[e._v("Select a builder type")]),a("select",{staticClass:"ui fluid builders dropdown",attrs:{id:"builders"}},e._l(e.builder_classes,function(t,s){return a("option",{domProps:{value:s}},[e._v(e._s(s)+" "),t.default?a("i",[e._v("(default)")]):e._e()])}),0),a("div",{staticClass:"ui blue message"},[a("div",{staticClass:"header"},[e._v("\n                                About this builder\n                              ")]),a("p",{attrs:{id:"builder_doc"}},[e._v(e._s(e.builder_doc))])]),a("br"),a("p",[e._v("Optional parameters can be added to the configuration (usefull to customize builder behavior). Enter a JSON object structure")]),a("textarea",{attrs:{id:"optionals"}},[e._v("{}")]),e._m(7),a("span",{class:e.actionable},[a("label",[e._v("Remove this configuration from list by default")]),e._m(8),e._m(9)])])])])]),e.errors.length?a("div",{staticClass:"ui error message"},[a("ul",{staticClass:"ui list"},e._l(e.errors,function(t){return a("li",[e._v(e._s(t))])}),0)]):e._e(),a("div",{staticClass:"actions"},[e._m(10),a("div",{staticClass:"ui green ok inverted button",class:e.actionable,attrs:{id:"newbuildconf_ok"}},[a("i",{staticClass:"checkmark icon"}),e._v("\n                    OK\n                ")])])]),e._m(11),e._m(12)])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item"},[a("i",[e._v("Existing configurations")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item"},[a("i",[e._v("Other actions")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("i",{staticClass:"big icons"},[a("i",{staticClass:"configure icon"}),a("i",{staticClass:"huge corner add icon"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("i",{staticClass:"big icons"},[a("i",{staticClass:"archive icon"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"item",attrs:{id:"side_menu"}},[a("i",{staticClass:"sidebar icon"}),e._v("\n                        Menu\n                    ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"configure icon"}),e._v("\n                Create/edit build configuration\n            ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("select",{staticClass:"ui fluid rootsources dropdown",attrs:{id:"root_sources",multiple:""}},[a("option",{attrs:{value:""}},[e._v("Root sources")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui teal message"},[a("b",[e._v("Note")]),e._v(": sources providing root documents, or "),a("i",[e._v("root sources")]),e._v(", are sources allowed to\n                                create a new document in a build (merged data). If a root source is declared, data from other sources will only be merged "),a("b",[e._v("if")]),e._v("\n                                documents previously exist with same IDs (documents coming from root sources). If not, data is discarded. Finally, if no root source\n                                is declared, any data sources can generate a new document in the merged data.\n                            ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",[e._v('You can still access it by clicking on "show/hide archived configuration" in the menu on the side')])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui checkbox"},[a("input",{attrs:{type:"checkbox",name:"archive_conf"}}),a("label",{staticClass:"white"},[e._v("Archive")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                    Cancel\n                ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui basic deleteconf modal"},[a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"trash alternate icon"}),e._v("\n                Delete configuration\n            ")]),a("div",{staticClass:"content"},[a("p",[e._v("Are you sure you want to delete this build configuration ?")])]),a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                    No\n                ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                    Yes\n                ")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui basic newbuild modal"},[a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"cube icon"}),e._v("\n                Create new build\n            ")]),a("div",{staticClass:"ui newbuild form"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"ten wide column"},[a("p",[e._v("Enter a name for the merged data collection or leave it empty to generate a random one")]),a("input",{attrs:{type:"text",id:"target_name",placeholder:"Collection name",autofocus:""}}),a("div",{staticClass:"ui forcebuild checkbox"},[a("br"),a("input",{attrs:{type:"checkbox",name:"force_build",id:"force_build"}}),a("label",{staticClass:"white"},[e._v("Skip sanity checks and force build (not recommended)")])])]),a("div",{staticClass:"six wide column"})])]),a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                    Cancel\n                ")]),a("div",{staticClass:"ui green ok inverted button",attrs:{id:"newbuild_ok"}},[a("i",{staticClass:"checkmark icon"}),e._v("\n                    OK\n                ")])])])}],n=(a("7f7f"),a("55dd"),a("ac6a"),a("456d"),a("bc3a")),o=a.n(n),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui fluid card"},[a("div",{staticClass:"content"},[a("div",{class:["ui",e.color?e.color:"grey","tiny","","label","conftag"]},[e._v(e._s(e.build.build_config.name))]),e.build.archived?a("i",{staticClass:"archived right floated archive icon"}):a("span",["building"==e.build.status?a("i",{staticClass:"right floated cube icon pulsing"}):e._e(),"inspecting"==e.build.status?a("i",{staticClass:"right floated unhide icon pulsing"}):e._e(),"diffing"==e.build.status?a("i",{staticClass:"right floated exchange icon pulsing"}):e._e(),"indexing"==e.build.status?a("i",{staticClass:"right floated bookmark icon pulsing"}):e._e()]),a("div",{staticClass:"ui",attrs:{"data-tooltip":e.displayError()}},["failed"==e.build.status?a("i",{staticClass:"right floated red alarm icon pulsing"}):e._e()]),a("div",{staticClass:"ui",attrs:{"data-tooltip":"Job was canceled/interrupted"}},["canceled"==e.build.status?a("i",{staticClass:"right floated orange exclamation circle icon"}):e._e()]),a("div",{staticClass:"left aligned header",model:{value:e.build,callback:function(t){e.build=t},expression:"build"}},[a("router-link",{attrs:{to:{name:"build",params:{_id:e.build._id,color:e.color}}}},[a("a",[e._v(e._s(e.build.target_name))])])],1),a("div",{staticClass:"left aligned description"},[a("div",[a("i",{staticClass:"file outline icon"}),e._v("\n                "+e._s(e._f("currency")(e.build.count,"",0))+" document"+e._s(e.build.count>1?"s":"")+"\n                "),e.build._meta?a("span",{staticClass:"right floated category",model:{value:e.build,callback:function(t){e.build=t},expression:"build"}},[e._v(e._s(e.build._meta.build_version))]):e._e()])]),a("div",{staticClass:"meta"},[e.build.jobs?a("span",{staticClass:"left floated category",model:{value:e.build,callback:function(t){e.build=t},expression:"build"}},[e._v("Build time: "+e._s(e._f("timesofar")(e._f("build_time")(e.build.jobs))))]):e._e(),a("span",{staticClass:"right floated time",model:{value:e.build,callback:function(t){e.build=t},expression:"build"}},[e._v("Built "+e._s(e._f("moment")(e.build.started_at,"from","now")))])]),a("div",{staticClass:"ui clearing divider"}),a("div",{staticClass:"left aligned description"},[a("p"),e._m(0),a("div",{staticClass:"ui bottom attached tab segment active",attrs:{"data-tab":"sources"}},[a("build-sources",{attrs:{build:e.build}})],1),a("div",{staticClass:"ui bottom attached tab segment",attrs:{"data-tab":"stats"}},[a("build-stats",{attrs:{build:e.build}})],1),a("div",{staticClass:"ui bottom attached tab segment",attrs:{"data-tab":"logs"}},[a("build-logs",{attrs:{build:e.build}})],1),a("p")])]),a("div",{staticClass:"extra content",class:e.actionable},[a("div",{staticClass:"ui icon buttons left floated mini"},[a("button",{staticClass:"ui button",attrs:{"data-build_id":e.build._id},on:{click:e.inspect}},[a("i",{staticClass:"unhide icon",attrs:{"data-build_id":e.build._id}})])]),a("div",{staticClass:"ui icon buttons right floated mini"},[a("button",{staticClass:"ui button"},[a("i",{staticClass:"trash icon",on:{click:function(t){return e.deleteBuild()}}})])]),e.build.archived?e._e():a("div",{staticClass:"ui icon buttons right floated mini"},[a("button",{staticClass:"ui button"},[a("i",{class:[e.build.archived?"archived":"","archive icon"],on:{click:function(t){return e.archiveBuild()}}})])])]),a("div",{staticClass:"ui basic deletebuild modal",attrs:{id:e.build._id}},[e._m(1),a("div",{staticClass:"content"},[a("p",[e._v("Are you sure you want to delete build "),a("b",[e._v(e._s(e.build.target_name))]),e._v(" ?")]),a("p",[e._v("All merged data and associated metadata will be deleted.")]),e._m(2)]),e._m(3)]),a("div",{staticClass:"ui basic archivebuild modal",attrs:{id:e.build._id}},[e._m(4),a("div",{staticClass:"content"},[a("p",[e._v("Are you sure you want to archive build "),a("b",[e._v(e._s(e.build.target_name))]),e._v(" ?")]),a("p",[e._v("Merged data will be deleted but metadata will be kept (merged source informations, logs, releases, etc...)")]),e._m(5)]),e._m(6)]),a("inspect-form",{attrs:{_id:e.build._id}})],1)},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui top attached pointing secondary menu"},[a("a",{staticClass:"item active",attrs:{"data-tab":"sources"}},[e._v("Sources")]),a("a",{staticClass:"item",attrs:{"data-tab":"stats"}},[e._v("Stats")]),a("a",{staticClass:"item",attrs:{"data-tab":"logs"}},[e._v("Logs")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"remove icon"}),e._v("\n            Delete build\n        ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui warning message"},[e._v("\n                Note: this operation is "),a("b",[e._v("*not* reversible")]),e._v(" and should be used to completely delete all data and information\n                related to this build (eg. the build was an error...)\n            ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                No\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                Yes\n            ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"archive icon"}),e._v("\n            Archive build\n        ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui warning message"},[e._v("\n                Note: this operation is "),a("b",[e._v("*not* reversible")]),e._v(" and should be used only for outdated, past builds no longer relevant nor used.\n            ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                No\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                Yes\n            ")])])}],l=a("f5ef"),u=a("2b0e"),d=a("7df8"),_=a("de0c"),m=a("a59c"),v=a("e46a"),f=a("309e"),p=a("3361"),h=a("bf2a");function b(e){return e.map(function(e){return e.time_in_s}).reduce(function(e,t){return e+t},0)}u["a"].filter("build_time",b);var g={name:"build",props:["pbuild","color"],mounted:function(){$(".menu .item").tab()},created:function(){l["a"].$on("build_updated",this.onBuildChanged)},beforeDestroy:function(){l["a"].$off("build_updated",this.onBuildChanged),$("#".concat(this.build._id,".ui.basic.deletebuild.modal")).remove(),$("#".concat(this.build._id,".ui.basic.archivebuild.modal")).remove()},data:function(){return{build_from_api:null}},mixins:[d["a"],p["a"],h["a"]],components:{InspectForm:_["a"],BuildLogs:m["a"],BuildStats:v["a"],BuildSources:f["a"]},computed:{build:function(){return this.build_from_api||this.pbuild}},methods:{displayError:function(){var e=[];if(this.build.jobs){var t=this.build.jobs[this.build.jobs.length-1];t&&t.err&&e.push("Step '".concat(t.step,"' failed: ").concat(t.err))}return 0==e.length&&e.push("Unknown error..."),e.join("<br>")},deleteBuild:function(){var e=this;$("#".concat(e.build._id,".ui.basic.deletebuild.modal")).modal("setting",{onApprove:function(){o.a.delete(o.a.defaults.baseURL+"/build/".concat(e.build._id)).then(function(e){return console.log(e.data.result),!0}).catch(function(e){console.log(e),console.log("Error deleting build: "+e.data.error)})}}).modal("show")},archiveBuild:function(){var e=this;$("#".concat(e.build._id,".ui.basic.archivebuild.modal")).modal("setting",{onApprove:function(){e.loading(),o.a.post(o.a.defaults.baseURL+"/build/".concat(e.build._id,"/archive")).then(function(t){return console.log(t.data.result),e.loaded(),!0}).catch(function(t){console.log(t),e.loaderror(t)})}}).modal("show")},onBuildChanged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=e&&this.build._id==e)return"remove"!=t&&"replace_one"!=t?this.getBuild():void l["a"].$emit("change_build")},getBuild:function(){var e=this;o.a.get(o.a.defaults.baseURL+"/build/"+this.build._id).then(function(t){e.build_from_api=t.data.result}).catch(function(e){console.log("Error getting build information: "+e)})}}},C=g,y=(a("3ce6"),a("0c7c")),w=Object(y["a"])(C,r,c,!1,null,"0e1aa44b",null),E=w.exports,k={name:"build-grid",mixins:[p["a"],h["a"]],mounted:function(){var e=this;console.log("BuildGrid mounted"),$(".ui.filterbuilds.dropdown").dropdown(),$(".ui.buildconfigs.dropdown").dropdown(),$(".ui.rootsources.dropdown").dropdown(),$(".ui.sources.dropdown").dropdown({onChange:function(e,t,a){var s=$(".ui.sources.dropdown").dropdown("get value"),i=[];for(var n in s){var o=s[n],r={name:o,text:o,value:o};i.push(r)}$(".ui.rootsources.dropdown").dropdown("clear"),$(".ui.rootsources.dropdown").dropdown("setup menu",{values:i}).dropdown("refresh")}}),$(".ui.builders.dropdown").dropdown({onChange:function(t,a){e.setBuilderDoc(t)}}),$("#builds .ui.sidebar").sidebar({context:$("#builds")}).sidebar("setting","transition","overlay").sidebar("attach events","#side_menu"),$(".ui.form").form(),$(".ui.includearchived.checkbox").checkbox(),$(".ui.forcebuild.checkbox").checkbox()},updated:function(){$(".ui.buildconfigs.dropdown").dropdown()},created:function(){this.loading(),this.getSourceList(),this.getBuildConfigs(),this.getBuilds(),l["a"].$on("change_source",this.onSourceChanged),l["a"].$on("change_build",this.onBuildChanged),l["a"].$on("change_build_config",this.onBuildConfigChanged)},beforeDestroy:function(){clearInterval(this.interval),$(".ui.basic.deleteconf.modal").remove(),$(".ui.basic.newbuild.modal").remove(),$(".ui.basic.buildconfiguration.modal").remove(),l["a"].$off("change_source",this.onSourceChanged),l["a"].$off("change_build",this.onBuildChanged),l["a"].$off("change_build_config",this.onBuildConfigChanged)},watch:{conf_filter:function(e,t){e!=t&&this.getBuilds()},only_archived:function(e,t){e!=t&&this.getBuilds()}},data:function(){return{builds:[],sources:[],all_build_configs:{},build_configs:{},builder_classes:{},default_builder_class:null,builder_doc:"No documentation for this builder",buildconf_error:null,errors:[],build_colors:{},colors:["orange","green","yellow","olive","teal","violet","blue","pink","purple"],color_idx:0,conf_filter:"",only_archived:!1,include_archived_configs:!1}},computed:{},components:{Build:E},methods:{setBuilderDoc:function(e){var t=this.builder_classes[e];t&&(this.builder_doc=t["desc"]),this.builder_doc||(this.builder_doc="No documentation for this builder")},updateRootSources:function(){var e=$(".ui.buildconfiguration.form").form("get field","selected_sources").val();$("#root_sources").dropdown("clear"),$("#root_sources").empty(),$.each(e,function(t){var a=e[t];$("#root_sources").append($("<option></option>").val(a).html(a))}),$("#root_sources").dropdown().dropdown("refresh")},getBuilds:function(){var e=this,t=""==this.conf_filter?"":"?conf_name=".concat(this.conf_filter);this.only_archived&&(t+=""==t?"?only_archived=1":"&only_archived=1"),this.loading(),this.builds=[],o.a.get(o.a.defaults.baseURL+"/builds"+t).then(function(t){e.builds=t.data.result,e.loaded()}).catch(function(t){console.log("Error getting builds information: "+t),e.loaderror(t)})},setBuildConfigs:function(){this.build_configs={};var e=Object.keys(this.all_build_configs);for(var t in e)!this.include_archived_configs&&this.all_build_configs[e[t]].build_config["archived"]||(this.build_configs[e[t]]=this.all_build_configs[e[t]])},getBuildConfigs:function(){var e=this,t=this;t.build_colors={},t.color_idx=0,this.loading(),o.a.get(o.a.defaults.baseURL+"/build_manager").then(function(a){if(a.data.result.build_configs)for(var s in t.all_build_configs=a.data.result.build_configs,t.builder_classes=a.data.result.builder_classes,t.builder_classes)t.builder_classes[s]["default"]&&(t.default_builder_class=s);else t.all_build_configs=a.data.result,t.builder_classes=[];var i=Object.keys(t.all_build_configs);for(var s in i)t.build_colors[i[s]]=t.colors[t.color_idx++],t.color_idx+1>=Object.keys(t.colors).length&&(t.color_idx=0);t.setBuildConfigs(),e.loaded()}).catch(function(t){console.log("Error getting builds information: "+t),e.loaderror(t)})},getSourceList:function(){var e=this,t=this;this.loading(),t.sources=[],o.a.get(o.a.defaults.baseURL+"/sources").then(function(a){$(a.data.result).each(function(e,a){if(a["upload"])for(var s in a["upload"]["sources"])t.sources.push(s)}),t.sources.sort(),e.loaded()}).catch(function(t){console.log("Error listing sources: "+t),e.loaderror(t)})},buildExists:function(e){var t=!1,a=this;return $(this.builds).each(function(s){if(a.builds[s]["_id"]==e)return t=!0,!1}),t},onSourceChanged:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getSourceList()},onBuildChanged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null==e?(console.log("Refreshing builds"),this.getBuilds()):this.buildExists(e)?l["a"].$emit("build_updated",e,t):this.getBuilds()},onBuildConfigChanged:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.getBuildConfigs(),"remove"==e&&this.getBuilds()},showBuildConfig:function(e){$(e.currentTarget).html().trim()},clearConfigurationModal:function(){$("#selected_sources").dropdown("clear"),$("#root_sources").empty(),$("#root_sources").dropdown("clear"),$("#builders").dropdown("clear"),$(".ui.buildconfiguration.form").form("get field","conf_name").val(""),$(".ui.buildconfiguration.form").form("get field","doc_type").val(""),$(".ui.buildconfiguration.form").form("get field","optionals").val("{}"),$(".ui.buildconfiguration.form").form("get field","archive_conf").prop("checked",!1)},sendAPI:function(e,t){var a="new"==t?o.a.post:o.a.put,s=this;a(o.a.defaults.baseURL+"/buildconf",e).then(function(e){return s.loaded(),!0}).catch(function(e){console.log(e),console.log("Error creating build configuration: "+e.data.error),s.loaderror(e)})},showBuildConfigModal:function(e){this.setBuilderDoc($(".ui.buildconfiguration.form").form("get field","builders").val());var t=this;$(".ui.basic.buildconfiguration.modal").modal("setting",{detachable:!1,closable:!1,onApprove:function(){t.errors=[];var a=$(".ui.buildconfiguration.form").form("get field","conf_name").val(),s=$(".ui.buildconfiguration.form").form("get field","doc_type").val(),i=$(".ui.buildconfiguration.form").form("get field","selected_sources").val(),n=[];a||t.errors.push("Provide a configuration name"),s||t.errors.push("Provide a document type"),0==i.length&&t.errors.push("Select at least one source to build merged data"),$(".ui.rootsources.dropdown a").each(function(e,t){n.push($(t).text())});var o=$(".ui.buildconfiguration.form").form("get field","builders").val(),r={};try{r=JSON.parse($(".ui.buildconfiguration.form").form("get field","optionals").val())}catch(u){t.errors.push("Invalid optional parameter: "+u)}if(t.errors.length)return!1;t.loading();var c=$(".ui.buildconfiguration.form").form("get field","archive_conf").prop("checked"),l={name:a,doc_type:s,sources:i,roots:n,builder_class:o,params:r,archived:c};t.sendAPI(l,e)}}).modal("show")},createConfiguration:function(){$("#builds .ui.sidebar").sidebar("hide"),this.clearConfigurationModal(),this.showBuildConfigModal("new")},editConfiguration:function(e){var t=$(e.currentTarget).attr("conf-name"),a=this.all_build_configs[t];if(a){this.buildconf_error=a.error,this.clearConfigurationModal(),$(".ui.buildconfiguration.form").form("get field","conf_name").val(a.build_config.name),$(".ui.buildconfiguration.form").form("get field","doc_type").val(a.build_config.doc_type),$(".ui.buildconfiguration.form").form("get field","selected_sources").val(a.build_config.sources).change(),this.updateRootSources(),$(".ui.buildconfiguration.form").form("get field","root_sources").val(a.build_config.root).change();var s=a.build_config.builder_class;s||(s=this.default_builder_class),$(".ui.buildconfiguration.form").form("get field","builders").val(s).change();var i={};$.each(a.build_config,function(e,t){-1==["name","doc_type","sources","root","_id","archived","builder_class"].indexOf(e)&&(i[e]=t)}),$(".ui.buildconfiguration.form").form("get field","optionals").val(JSON.stringify(i,null,4)),$(".ui.buildconfiguration.form").form("get field","archive_conf").prop("checked",a.build_config.archived),this.showBuildConfigModal("edit")}else console.log("Unable to get configuration details for ".concat(t))},deleteConfiguration:function(e){$("#builds .ui.sidebar").sidebar("hide");var t=$(e.currentTarget).attr("conf-name"),a=this;$(".ui.basic.deleteconf.modal").modal("setting",{detachable:!1,onApprove:function(){a.loading(),o.a.delete(o.a.defaults.baseURL+"/buildconf",{data:{name:t}}).then(function(e){return a.loaded(),!0}).catch(function(e){console.log(e),console.log(e.data.error),a.loaderror(e)})}}).modal("show")},newBuild:function(e){$("#builds .ui.sidebar").sidebar("hide");var t=$(e.currentTarget).attr("conf-name"),a=this;$(".ui.basic.newbuild.modal").modal("setting",{detachable:!1,onApprove:function(){a.loading();var e=$(".ui.newbuild.modal #target_name").val(),s=$(".ui.forcebuild.checkbox #force_build").prop("checked");""==e&&(e=null),o.a.put(o.a.defaults.baseURL+"/build/".concat(t,"/new"),{target_name:e,force:s}).then(function(e){return console.log(e.data.result),a.loaded(),!0}).catch(function(e){console.log(e),a.loaderror(e)})}}).modal("show")},clearFilter:function(){$(".ui.filterbuilds.dropdown").dropdown("clear"),this.conf_filter="",this.getBuilds()},toggleShowArchivedConfigs:function(){this.include_archived_configs=!this.include_archived_configs,this.setBuildConfigs()}}},O=k,x=(a("545d"),Object(y["a"])(O,s,i,!1,null,"5b35e21b",null));t["a"]=x.exports},"25bb":function(e,t,a){},"28cd":function(e,t,a){"use strict";var s=a("f137"),i=a.n(s);i.a},"2a9f":function(e,t,a){"use strict";var s=a("766d"),i=a.n(s);i.a},"2cce":function(e,t,a){},"2e2b":function(e,t,a){"use strict";var s=a("f731"),i=a.n(s);i.a},"2f47":function(e,t,a){},3:function(e,t){},"309e":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",{staticClass:"ui small very compact blue table"},[e._m(0),e.build._meta?a("tbody",e._l(e.build._meta.src,function(t,s){return a("tr",[t.url?a("td",[a("a",{attrs:{href:t.url}},[e._v(e._s(s))])]):a("td",[e._v(e._s(s))]),a("td",[e._v(e._s(t.version))])])}),0):a("tfoot",[e._m(1)])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Datasource")]),a("th",[e._v("Version")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",[e._v("No data")]),a("th")])}],n=(a("bc3a"),a("f5ef"),{name:"build-sources",props:["build"],mounted:function(){},beforeDestroy:function(){},components:{},methods:{}}),o=n,r=a("0c7c"),c=Object(r["a"])(o,s,i,!1,null,"4c11fc2e",null);t["a"]=c.exports},3361:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"loader","data-html":"<div>Page loaded</div>","data-position":"bottom center"}},[a("i",{staticClass:"big circle icon studiogrey",attrs:{id:"loading"}})])},i=[],n={name:"loader",mounted:function(){$("#loader").popup({on:"hover"})},components:{},created:function(){},beforeDestroy:function(){},computed:{},methods:{loaded:function(){$("#loading").removeClass("flashing"),$("#loading").removeClass("blinking"),$("#loading").addClass("studiogrey"),$("#loader").attr("data-html","<div>Page loaded</div>")},loadhide:function(){$("#loading").removeClass("red"),this.loaded()},loading:function(){this.loadhide(),$("#loading").addClass("flashing"),$("#loading").removeClass("studiogrey"),$("#loader").attr("data-html","<div>Loading</div>")},extractError:function(e){console.log(e);var t="";return void 0!=e.status&&(t+="XHR code: "+e.status+"<br>"),void 0!=e.data&&void 0!=e.data.error&&(t+="Error: "+e.data.error+"<br>"),e.config&&(t+=e.config.method.toUpperCase()+" <a href='"+e.config.url+"'>"+e.config.url+"</a>"),e.message&&(t+="<br>"+e.message),t},loaderror:function(e){var t="<div><b>Error while loading page</b><br>";t+=this.extractError(e),t+="</div>",this.loaded(),$("#loading").removeClass("studiogrey"),$("#loading").addClass("red"),$("#loading").addClass("blinking"),$("#loader").attr("data-html",t)}}},o=n,r=(a("20a7"),a("0c7c")),c=Object(r["a"])(o,s,i,!1,null,null,null);t["a"]=c.exports},"36a3":function(e,t,a){},"38c9":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.event?a("span",["hub_restart"==e.event.event?a("span",{staticClass:"content"},[a("alert-restart",{attrs:{event:e.event}})],1):"hub_stop"==e.event.event?a("span",{staticClass:"content"},[a("alert-stop",{attrs:{event:e.event}})],1):e._e()]):e._e()},i=[],n=(a("bc3a"),a("f5ef")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui mini alert modal"},[a("div",{staticClass:"header"},[e._v("\n        "+e._s(e.event.msg)+"\n    ")]),e._m(0),e._m(1)])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("p",[e._v("You have been disconnected")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui positive right labeled icon button"},[e._v("\n            OK\n            "),a("i",{staticClass:"checkmark icon"})])])}],c={name:"alert-stop",props:["event"],mounted:function(){console.log("AlertStop mounted"),$(".mini.alert.modal").modal("setting","closable",!1).modal("show")},updated:function(){},created:function(){},beforeDestroy:function(){n["a"].$on("alert",this.onAlert)},watch:{},computed:{},data:function(){return{}},components:{},methods:{}},l=c,u=a("0c7c"),d=Object(u["a"])(l,o,r,!1,null,null,null),_=d.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui mini alert modal"},[a("div",{staticClass:"header"},[e._v("\n        "+e._s(e.event.msg)+"\n    ")]),e._m(0),e._m(1)])},v=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("p",[e._v("Do you want to reconnect ?")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui negative button"},[e._v("\n            No\n        ")]),a("div",{staticClass:"ui positive right labeled icon button",attrs:{id:"restart_yes"}},[e._v("\n            Yes\n            "),a("i",{staticClass:"checkmark icon"})])])}],f={name:"alert-restart",props:["event"],mounted:function(){console.log("AlertRestart mounted"),$(".mini.alert.modal").modal({closable:!1,onApprove:function(){n["a"].$emit("reconnect")}}).modal("show")},updated:function(){},created:function(){},beforeDestroy:function(){},watch:{},computed:{},data:function(){return{}},components:{},methods:{}},p=f,h=Object(u["a"])(p,m,v,!1,null,null,null),b=h.exports,g={name:"event-alert",mounted:function(){console.log("EventAlert mounted")},updated:function(){},created:function(){n["a"].$on("alert",this.onAlert)},beforeDestroy:function(){},watch:{},computed:{},data:function(){return{event:null}},components:{AlertStop:_,AlertRestart:b},methods:{onAlert:function(e){console.log("on alert"),console.log(e),this.event=e}}},C=g,y=Object(u["a"])(C,s,i,!1,null,null,null);t["a"]=y.exports},"3b59":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui fluid container"},[a("div",{staticClass:"ui centered fluid card",attrs:{id:""}},[e._m(0),a("div",{staticClass:"content"},[a("div",{staticClass:"configmenu"},[a("div",{staticClass:"ui secondary small menu"},[e.dirty?a("div",{staticClass:"ui mini yellow compact message right floated"},[e._v("Hub needs to restart to reflect changes")]):e._e(),a("a",{staticClass:"right aligned item",class:e.actionable},[a("a",{staticClass:"item"},[a("button",{staticClass:"ui red labeled icon button",on:{click:e.restartHub}},[a("i",{staticClass:"sync alternate icon"}),e._v("\n                                Restart\n                            ")])])])])]),a("p"),a("div",{staticClass:"ui mini top attached pointing menu"},e._l(e.config_tabs.keys(),function(t){return e.config?a("a",{class:["red item",0==t?"active":""],attrs:{"data-tab":e.config_tabs[t]}},[e._v(e._s(e.config_tabs[t])+" ")]):e._e()}),0),e._l(e.config_tabs.keys(),function(t){return e.config?a("div",{class:["ui bottom attached tab segment",0==t?"active":""],attrs:{"data-tab":e.config_tabs[t]}},[a("hub-config-tab",{attrs:{section:e.config_tabs[t],params:e.config[e.config_tabs[t]]}})],1):e._e()}),a("p")],2)]),e._m(1)])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui icon message"},[a("i",{staticClass:"exclamation triangle icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[e._v("\n                    Warning\n                ")]),a("p",[e._v("\n                    From this page, you can restart or stop the Hub, access and modify its internal configuraton in order to customize the behavior and appearance.\n                    Be careful though, as incorrect values could lead to a non-working system.\n                ")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui basic restart modal"},[a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"sync alternate icon"}),e._v("\n            Restart Hub ?\n        ")]),a("div",{staticClass:"content"},[a("p",[e._v("Are you sure you want to restart the Hub ?")]),a("div",{staticClass:"ui warning message"},[e._v("\n                Note: Hub will wait until all jobs are finished before restarting.\n                While restarting you will loose connection. Please allow some time before\n                being able to connect again.\n            ")])]),a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                No\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                Yes\n            ")])])])}],n=(a("7f7f"),a("ac6a"),a("456d"),a("55dd"),a("2b0e")),o=a("bc3a"),r=a.n(o),c=a("f5ef"),l=a("3361"),u=a("bf2a"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"ui info message"},[e._v("All values must be in JSON format")]),a("table",{staticClass:"ui basic table"},[a("tbody",e._l(e.params,function(e){return a("hub-config-param",{attrs:{param:e}})}),1)])])},_=[],m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",{staticClass:"eight wide"},[a("div",{staticClass:"param-name"},[e._v("\n            "+e._s(e.param.name)+"\n            "),a("button",e._b({class:["ui mini label button",e.saving?"loading":"",e.actionable],on:{click:e.saveParameter}},"button",e._d({},[e.save_disabled,1])),[e._v("\n                Save\n            ")]),a("button",e._b({class:["ui mini label button",e.actionable,e.resetting?"loading":""],attrs:{"data-tooltip":"Reset to default value"},on:{click:e.resetParameter}},"button",e._d({},[e.reset_disabled,1])),[e._v("\n                Reset\n            ")]),e.error?a("a",{staticClass:"ui mini label",attrs:{"data-tooltip":e.error}},[a("i",{staticClass:"red exclamation triangle icon"})]):e._e(),e.updated?a("a",{staticClass:"ui mini label",attrs:{"data-tooltip":"Value updated"}},[a("i",{staticClass:"green check icon"})]):e._e()]),a("div",{staticClass:"param-desc"},[e._v(e._s(e.param.desc))])]),a("td",{staticClass:"eight wide"},[a("form",{staticClass:"ui form"},[a("div",{staticClass:"field"},[e.readonly||e.param.readonly?a("span",[a("pre",{staticClass:"param-readonly"},[e._v(e._s(e.displayed_value))]),a("div",{staticClass:"param-legend"},[e._v("(value is read-only, it cannot be edited)")])]):a("span",[Array.isArray(e.param.value)?a("span",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.displayed_value,expression:"displayed_value"}],domProps:{value:e.displayed_value},on:{input:function(t){t.target.composing||(e.displayed_value=t.target.value)}}}),e.param.diff?e._e():a("div",{staticClass:"param-legend"},[e._v("This is the default value")])]):"object"===typeof e.param.value?a("span",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.displayed_value,expression:"displayed_value"}],domProps:{value:e.displayed_value},on:{input:function(t){t.target.composing||(e.displayed_value=t.target.value)}}}),e.param.diff?e._e():a("div",{staticClass:"param-legend"},[e._v("This is the default value")])]):a("span",["checkbox"===(e.param.hidden?"password":"text")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.displayed_value,expression:"displayed_value"}],attrs:{autocomplete:"off",type:"checkbox"},domProps:{checked:Array.isArray(e.displayed_value)?e._i(e.displayed_value,null)>-1:e.displayed_value},on:{change:function(t){var a=e.displayed_value,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=null,o=e._i(a,n);s.checked?o<0&&(e.displayed_value=a.concat([n])):o>-1&&(e.displayed_value=a.slice(0,o).concat(a.slice(o+1)))}else e.displayed_value=i}}}):"radio"===(e.param.hidden?"password":"text")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.displayed_value,expression:"displayed_value"}],attrs:{autocomplete:"off",type:"radio"},domProps:{checked:e._q(e.displayed_value,null)},on:{change:function(t){e.displayed_value=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.displayed_value,expression:"displayed_value"}],attrs:{autocomplete:"off",type:e.param.hidden?"password":"text"},domProps:{value:e.displayed_value},on:{input:function(t){t.target.composing||(e.displayed_value=t.target.value)}}}),e.param.diff?e._e():a("div",{staticClass:"param-legend"},[e._v("This is the default value")])])]),e.json_error?a("div",{staticClass:"ui red basic label"},[e._v("Error parsing JSON: "+e._s(e.json_error))]):e._e()])])])])},v=[],f={name:"hub-config-param",props:["param"],components:{},mixins:[u["a"]],mounted:function(){},created:function(){},updated:function(){},beforeDestroy:function(){},data:function(){return{value:null,origvalue:null,dirty:!1,json_error:null,error:null,updated:!1,saving:!1,resetting:!1}},computed:{displayed_value:{get:function(){return null==this.origvalue&&(this.value=JSON.stringify(this.param.value,null,2),this.origvalue=this.param.value),this.value},set:function(e){this.value=e}},save_disabled:function(){return this.dirty&&!this.json_error?"":"disabled"},reset_disabled:function(){return this.param.diff?"":"disabled"},is_default:function(){return JSON.stringify(this.param.default)==JSON.stringify(JSON.parse(this.displayed_value))}},watch:{value:function(e,t){this.error=null,this.updated=!1;try{JSON.stringify(JSON.parse(e))!=JSON.stringify(this.origvalue)?this.dirty=!0:this.dirty=!1,this.json_error=null}catch(a){this.dirty=!0,this.json_error=a.name+": "+a.message}}},methods:{saveParameter:function(){var e=JSON.parse(JSON.stringify(this.value)),t=this;t.saving=!0,r.a.put(r.a.defaults.baseURL+"/config",{name:t.param.name,value:e}).then(function(e){console.log(e),200==e.status&&(t.dirty=!1,t.updated=!0,t.origvalue=JSON.parse(t.value)),t.saving=!1}).catch(function(e){console.log("Error saving parameter: "+e),t.error=e.message,t.saving=!1})},resetParameter:function(){var e=this;e.resetting=!0,r.a.delete(r.a.defaults.baseURL+"/config",{data:{name:e.param.name}}).then(function(t){e.value=JSON.stringify(e.param.default,null,2),e.origvalue=e.param.default,e.resetting=!1}).catch(function(t){console.log("Error resetting parameter: "+t),e.error=t.message,e.resetting=!1})}}},p=f,h=(a("824e"),a("0c7c")),b=Object(h["a"])(p,m,v,!1,null,"038a2422",null),g=b.exports,C={name:"hub-config-tab",props:["section","params"],components:{HubConfigParam:g},mixins:[],mounted:function(){console.log("HubConfigTab mounted")},created:function(){},updated:function(){$(".menu .item").tab(),$(".menu .item").tab("change tab","General")},beforeDestroy:function(){},data:function(){return{}},computed:{},methods:{}},y=C,w=Object(h["a"])(y,d,_,!1,null,"6a2b4eae",null),E=w.exports,k={name:"hub-config",props:[],components:{Loader:l["a"],HubConfigTab:E},mixins:[l["a"],u["a"]],mounted:function(){console.log("HubConfig mounted"),this.loadData()},created:function(){c["a"].$on("change_config",this.onConfigChanged),c["a"].$on("restart_hub",this.restartHub),c["a"].$on("save_config_param",this.onSaveParameter)},updated:function(){$(".menu .item").tab()},beforeDestroy:function(){c["a"].$off("change_source",this.onConfigChanged),c["a"].$off("restart_hub",this.restartHub),c["a"].$off("save_config_param",this.onSaveParameter)},data:function(){return{config:{},dirty:!1,error:null}},computed:{config_tabs:function(){return Object.keys(this.config).sort()}},methods:{loadData:function(){var e=this,t=this;this.loading(),r.a.get(r.a.defaults.baseURL+"/config").then(function(a){try{var s=a.data.result.scope.config;t.dirty=a.data.result._dirty;var i={};for(var o in s){var r=s[o],l=r.section||"Misc";delete r.section,r.name=o,i.hasOwnProperty(l)?i[l].push(r):i[l]=[r]}e.config=i,n["a"].config.hub_config=a.data.result.scope.config,c["a"].$emit("current_config",a.data.result),e.loaded()}catch(u){t.error="Can't parse configuration: ".concat(u)}}).catch(function(t){console.log("Error getting source config information: "+t),e.loaderror(t)})},restartHub:function(){var e=this;this.loading(),$(".ui.basic.restart.modal").modal("setting",{onApprove:function(){r.a.put(r.a.defaults.baseURL+"/restart").then(function(t){return console.log(t.data.result),e.loaded(),!0}).catch(function(t){console.log(t),e.loaderror(t)})},onDeny:function(){e.loaded()}}).modal("show")},onConfigChanged:function(){this.loadData()},onSaveParameter:function(e){var t=this;r.a.put(r.a.defaults.baseURL+"/config",{name:e["name"],value:e["value"]}).then(function(e){t.loadData()}).catch(function(e){console.log("error saving parameter: "+e)})}}},O=k,x=(a("4e78"),Object(h["a"])(O,s,i,!1,null,"175bb6ce",null));t["a"]=x.exports},"3c84":function(e,t,a){},"3cbd":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("div",{staticClass:"ui inverted segment",staticStyle:{overflow:"auto",width:"45vw","max-height":"33vh","max-width":"45vw"},attrs:{id:"terminal"}},[e._l(e.buffer,function(e){return a("terminal-line",{attrs:{line:e}})}),a("terminal-prompt"),e.error?a("div",{staticClass:"red term"},[e._v(e._s(e.error))]):e._e()],2)])},i=[],n=a("bc3a"),o=a.n(n),r=a("f5ef"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("pre",{class:["term","term"+e.line.type]},[e._v(e._s("input"==e.line.type?"hub> ":"")+e._s(e.line.cmd))])},l=[],u={name:"terminal-line",props:["line"],computed:{}},d=u,_=(a("7c9a"),a("0c7c")),m=Object(_["a"])(d,c,l,!1,null,"887baf2c",null),v=m.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("div",{staticClass:"term terminput"},[a("span",[e._v("hub>")]),a("input",{staticClass:"term terminput termcommand",attrs:{id:"termcommand",type:"text",placeholder:"Type a command...",autofocus:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.send(t)}}})])])},p=[],h={name:"terminal-prompt",props:["prompt"],computed:{},data:function(){return{}},methods:{send:function(e){var t=e.target.value;this.$parent.error=null;var a=this;o.a.put(o.a.defaults.baseURL+"/shell",{cmd:t},{validateStatus:!1}).then(function(e){e.status>=200&&e.status<300?$("#termcommand").val(""):e.data.error?a.$parent.error=e.data.error:a.$parent.error=e.statusText;var t=$("#terminal");t.scrollTop(t.prop("scrollHeight"))}).catch(function(e){e.message?a.$parent.error=e.message:a.$parent.error="Unknown error"})}}},b=h,g=(a("1f05"),Object(_["a"])(b,f,p,!1,null,"71279068",null)),C=g.exports,y=1e3,w={name:"terminal",props:[],components:{TerminalLine:v,TerminalPrompt:C},mounted:function(){console.log("Terminal mounted")},created:function(){r["a"].$on("shell",this.onData)},beforeDestroy:function(){r["a"].$off("shell",this.onData)},ready:function(){},data:function(){return{buffer:[],error:null}},watch:{},methods:{onData:function(e){this.buffer.push(e);while(this.buffer.length>y)this.buffer.shift();var t=$("#terminal");t.scrollTop(t.prop("scrollHeight"))}}},E=w,k=(a("00a4"),Object(_["a"])(E,s,i,!1,null,null,null));t["a"]=k.exports},"3ce6":function(e,t,a){"use strict";var s=a("8f55"),i=a.n(s);i.a},"3e50":function(e,t,a){"use strict";var s=a("6f4a"),i=a.n(s);i.a},"3e54":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},i=[],n=(a("a481"),{methods:{html2json:function(e){e=e||"{}",e=e.replace(/<.*?>/g,"");try{return JSON.parse(e)}catch(t){throw console.log("Error parsing mapping: ".concat(t)),console.log(e),t}}}}),o=n,r=a("0c7c"),c=Object(r["a"])(o,s,i,!1,null,null,null);t["a"]=c.exports},"3f5c":function(e,t,a){"use strict";var s=a("86ff"),i=a.n(s);i.a},4:function(e,t){},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c57","./gu.js":"e0c57","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=n(e);return a(t)}function n(e){var t=s[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}i.keys=function(){return Object.keys(s)},i.resolve=n,e.exports=i,i.id="4678"},"4e78":function(e,t,a){"use strict";var s=a("2cce"),i=a.n(s);i.a},"52fa":function(e,t,a){},"545d":function(e,t,a){"use strict";var s=a("0569"),i=a.n(s);i.a},"55b7":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},i=[],n=a("bc3a"),o=a.n(n),r=a("f5ef"),c=a("3e54"),l={mixins:[c["a"]],methods:{diffMapping:function(e,t,a){var s=$("#".concat(a,"-").concat(e)).html(),i=this.html2json(s),n=$("#".concat(a,"-").concat(t)).html(),c=this.html2json(n);o.a.post(o.a.defaults.baseURL+"/jsondiff",{src:i,dst:c}).then(function(e){console.log(e.data.result),r["a"].$emit("diffed",e.data.result),r["a"].$emit("show_diffed")}).catch(function(e){console.log("Error diffing mappings: "+e)})}}},u=l,d=a("0c7c"),_=Object(d["a"])(u,s,i,!1,null,null,null);t["a"]=_.exports},"55dc":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui two column centered grid"},[a("div",{staticClass:"four column centered row"}),a("div",{staticClass:"fourteen wide column centered row"},[a("div",{staticClass:"column"},[a("div",{staticClass:"ui statistics"},[a("div",{staticClass:"statistic"},[a("div",{staticClass:"value"},[a("i",{staticClass:"database icon"}),Object.keys(e.status).length&&e.status.source&&e.status.source.total?a("span",[e.status.source?a("span",[e._v(e._s(e.status.source.total))]):a("span")]):a("span",[e._v("0")])]),a("div",{staticClass:"label"},[Object.keys(e.status).length&&e.status.source&&e.status.source.total>1?a("span",[e._v("\n                            Datasources\n                        ")]):a("span",[e._v("Datasource")])])]),a("div",{staticClass:"statistic"},[a("div",{staticClass:"text value"},[Object.keys(e.status).length&&e.status.source&&e.status.source.documents?a("span",[e.status.source?a("span",[e._v("\n                            "+e._s(e._f("formatNumber")(e.status.source.documents))+"\n                            ")]):a("span")]):a("span",[e._v("No")]),a("br"),a("i",{staticClass:"file icon"})]),a("div",{staticClass:"label"},[Object.keys(e.status).length&&e.status.source&&e.status.source.documents>1?a("span",[e._v("\n                        Documents\n                        ")]):a("span",[e._v("Document (yet)")])])]),a("div",{staticClass:"statistic"},[a("div",{staticClass:"value"},[a("i",{staticClass:"cubes icon"}),Object.keys(e.status).length&&e.status.build&&e.status.build.total?a("span",[e.status.build?a("span",[e._v("\n                                "+e._s(e.status.build.total)+"\n                            ")]):a("span")]):a("span",[e._v("0")])]),a("div",{staticClass:"label"},[Object.keys(e.status).length&&e.status.build&&e.status.build.total>1?a("span",[e._v("\n                            Builds\n                        ")]):a("span",[e._v("Build")])])])])])]),a("div",{staticClass:"four column centered row"}),a("div",{staticClass:"eight wide column centered row"},[a("h4",{staticClass:"ui blue header"},[e._v("What's new")]),a("div",{staticClass:"ui segment"},[Object.keys(e.whatsnew).length?a("span",[a("div",{staticClass:"column centered"},[a("div",{staticClass:"ui feed"},e._l(e.whatsnew,function(t,s){return a("div",{staticClass:"event"},[e._m(0,!0),a("div",{staticClass:"content"},[a("div",{staticClass:"summary"},[a("a",{staticClass:"user"},[e._v("\n                                    "+e._s(s)+"\n                                ")]),e._v(" can be rebuilt, it contains "),a("a",[e._v(e._s(Object.keys(t.sources).length)+" updated datasource(s)")]),e._v(".\n                                "),a("br"),a("div",{staticClass:"date"},[e._v("\n                                    Previous build was "),a("i",[e._v(e._s(t.old_build.name))]),e._v(", built on "+e._s(e._f("moment")(t.old_build.built_at,"lll"))+"\n                                ")])]),e._l(t.sources,function(t,s){return a("div",{staticClass:"mymeta"},[a("i",{staticClass:"database icon"}),a("b",[e._v(e._s(s))]),e._v(": "+e._s(t.old.version)+" "),a("i",{staticClass:"small arrow right icon"}),e._v(" "+e._s(t.new.version)+"\n                                "),a("i",[e._v("("+e._s(e._f("moment")(t.new.downloaded_at,"from","now"))+")")])])})],2)])}),0)]),a("div",{staticClass:"four column centered row"})]):a("span",[e._v("Not much, nothing happened recently...")])])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"label"},[a("i",{staticClass:"cubes icon"})])}],n=a("3361"),o=a("bc3a"),r=a.n(o),c=(a("f5ef"),{name:"status",mixins:[n["a"]],mounted:function(){console.log("Status mounted"),this.refreshStatus(),this.refreshWhatsNew()},created:function(){},beforeDestroy:function(){},data:function(){return{status:{},whatsnew:{},errors:[]}},components:{Loader:n["a"]},methods:{refreshStatus:function(){var e=this;this.loading(),r.a.get(r.a.defaults.baseURL+"/status").then(function(t){e.status=t.data.result,e.loaded()}).catch(function(t){console.log("Error getting sources information: "+t),e.loaderror(t)})},refreshWhatsNew:function(){var e=this;r.a.get(r.a.defaults.baseURL+"/whatsnew").then(function(t){e.whatsnew=t.data.result}).catch(function(e){console.log("Error getting sources information: "+e)})}}}),l=c,u=(a("8704"),a("0c7c")),d=Object(u["a"])(l,s,i,!1,null,null,null);t["a"]=d.exports},"562c":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui fluid container"},[e.build?a("div",{staticClass:"ui centered fluid card",attrs:{id:"build"}},[a("div",{staticClass:"content"},[e.build.target_name?a("div",{staticClass:"left aligned header"},[e._v(e._s(e.build.target_name))]):e._e(),a("div",{staticClass:"meta"},[e.build.started_at?a("span",{staticClass:"right floated time"},[e._v("Built "+e._s(e._f("moment")(e.build.started_at,"from","now"))+"\n                    "),e.build.archived?a("div",{staticClass:"time"},[e._v("Archived "+e._s(e._f("moment")(e.build.archived,"from","now")))]):e._e()]):e._e(),a("div",{class:["ui",e.color?e.color:"grey tiny","left floated","label conftag"]},[e._v(e._s(e.build.build_config.name))])]),a("div",{staticClass:"left aligned description"},[a("p"),a("div",{staticClass:"ui clearing divider"}),a("div",[a("i",{staticClass:"file outline icon"}),e._v("\n                        "+e._s(e._f("currency")(e.build.count,"",0))+" document"+e._s(e.build.count>1?"s":"")+"\n                    ")]),a("br"),a("p"),a("p"),e._m(0),a("div",{staticClass:"ui bottom attached tab segment active",attrs:{"data-tab":"info"}},[a("div",{staticClass:"ui grid"},[a("div",{staticClass:"six wide column"},[a("h5",[e._v("Configuration")]),a("build-config",{attrs:{build:e.build}})],1),a("div",{staticClass:"five wide column"},[a("h5",[e._v("Sources")]),a("build-sources",{attrs:{build:e.build}}),a("h5",[e._v("Statistics")]),a("build-stats",{attrs:{build:e.build}})],1),a("div",{staticClass:"five wide column"},[a("h5",[e._v("Logs")]),a("build-logs",{attrs:{build:e.build}})],1)])]),a("div",{staticClass:"ui bottom attached tab segment",attrs:{"data-tab":"mapping"}},[a("build-mapping",{attrs:{build:e.build}})],1),a("div",{staticClass:"ui bottom attached tab segment",attrs:{"data-tab":"releases"}},[a("build-releases",{attrs:{build:e.build}})],1),a("p")])]),a("diff-modal")],1):e._e()])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui top attached pointing menu"},[a("a",{staticClass:"red item active",attrs:{"data-tab":"info"}},[e._v("Information")]),a("a",{staticClass:"red item",attrs:{"data-tab":"mapping"}},[e._v("Mapping")]),a("a",{staticClass:"red item",attrs:{"data-tab":"releases"}},[e._v("Releases")])])}],n=a("bc3a"),o=a.n(n),r=a("f5ef"),c=a("de0c"),l=a("7df8"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.error?a("div",{staticClass:"ui error message"},[e._v("\n        "+e._s(e.error)+"\n    ")]):e._e(),a("button",{staticClass:"ui small grey newrelease right floated  button",class:e.actionable,on:{click:e.newRelease}},[e._v("\n        New release\n    ")]),e.releases?a("div",{staticClass:"ui feed"},e._l(e.releases,function(t){return a("div",{staticClass:"event"},[t.index_name?a("index-release-event",{attrs:{release:t,build:e.build,type:"full"}}):e._e(),t.diff?a("diff-release-event",{attrs:{release:t,index_envs:e.index_envs,build:e.build,type:"incremental"}}):e._e()],1)}),0):a("div",[e._v("\n        No release found\n    ")]),a("div",{staticClass:"ui basic newrelease modal"},[e._m(0),a("div",{staticClass:"content"},[a("div",{staticClass:"ui form"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"eight wide column"},[a("label",[e._v("Select the type of release")]),a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.release_type,expression:"release_type"}],staticClass:"ui releasetype dropdown",attrs:{name:"release_type"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.release_type=t.target.multiple?a:a[0]}}},[a("option",[e._v("incremental")]),a("option",[e._v("full")])]),a("br"),a("br")]),"incremental"==e.release_type?a("span",[a("label",[e._v("Select a build to compute incremental release (compared to this one)")]),a("div",[e.avail_builds.length?a("select",{staticClass:"ui fluid availbuilds dropdown",attrs:{name:"old_build"}},e._l(e.avail_builds,function(t){return a("option",[e._v(e._s(t))])}),0):a("div",{staticClass:"ui red message"},[e._v("\n                                    No build available to compute incremental data release\n                                ")]),a("br")]),a("div",[a("label",[e._v("Select the type of diff files to generate")]),a("select",{staticClass:"ui fluid difftypes dropdown",attrs:{name:"diff_type"}},e._l(e.diff_types,function(t){return a("option",{domProps:{selected:"jsondiff-selfcontained"==t}},[e._v(e._s(t))])}),0),a("br")]),e._m(1)]):e._e(),"full"==e.release_type?a("span",[e._m(2),a("div",[a("label",[e._v("Select an indexer environment to create the index on")]),a("select",{staticClass:"ui fluid indexenvs dropdown",attrs:{name:"index_env"}},e._l(e.index_envs.env,function(t,s){return a("option",{attrs:{"data-env":s}},[e._v(e._s(s)+" "),a("i",[e._v("("+e._s(t.host)+")")])])}),0),a("br")])]):e._e()]),e._m(3)])])]),e.errors.length?a("div",{staticClass:"ui error message"},[a("ul",{staticClass:"ui list"},e._l(e.errors,function(t){return a("li",[e._v(e._s(t))])}),0)]):e._e(),a("div",{staticClass:"actions"},[e._m(4),a("div",{staticClass:"ui green ok inverted button",class:e.actionable,attrs:{id:"newrelease_ok"}},[a("i",{staticClass:"checkmark icon"}),e._v("\n                OK\n            ")])])])])},d=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"tag icon"}),e._v("\n            Create new release\n        ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui checkbox"},[a("input",{attrs:{type:"checkbox",name:"diff_purge"}}),a("label",[e._v("Purge existing diff files previously generated for this release ?")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",[e._v("Enter a name for the index (or leave it empty to have the same name as the build)")]),a("input",{attrs:{type:"text",name:"index_name",placeholder:"Index name",autofocus:""}}),a("br"),a("br")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"eight wide column"},[a("div",{staticClass:"ui teal message"},[a("b",[e._v("Note")]),e._v(": sources providing root documents, or "),a("i",[e._v("root sources")]),e._v(", are sources allowed to\n                            create a new document in a build (merged data). If a root source is declared, data from other sources will only be merged "),a("b",[e._v("if")]),e._v("\n                            documents previously exist with same IDs (documents coming from root sources). If not, data is discarded. Finally, if no root source\n                            is declared, any data sources can generate a new document in the merged data.\n                        ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                Cancel\n            ")])}],_=(a("456d"),a("55dd"),a("ac6a"),a("8615"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"event-container"},[a("div",{staticClass:"ui grid"},[a("div",{staticClass:"eight wide column"},[a("div",{staticClass:"summary"},[a("i",{staticClass:"ui bookmark icon"}),e._v("\n                Index\n                "),a("b",{staticClass:"user"},[e._v("\n                    "+e._s(e.release.index_name)+"\n                ")]),e._v(" was created on "),a("b",[e._v(e._s(e.release.environment))]),e._v(" environment ("),a("b",[e._v(e._s(e.release.host))]),e._v(")\n                "),a("div",{staticClass:"date"},[e._v("\n                    "+e._s(e._f("moment")(e.release.created_at,"from","now"))+"\n                    ("),a("i",[e._v("on "+e._s(e.moment(e.release.created_at).format("MMMM Do YYYY, h:mm:ss a")))]),e._v(")\n\n                ")]),e._v("\n                Current version: "),a("b",[e._v(e._s(e.build._meta.build_version))])]),a("div",{staticClass:"meta"},[a("div",{class:e.actionable},[a("i",{staticClass:"file alternate icon"}),e._v(" "+e._s(e._f("formatNumber")(e.num_indexed))+" documents indexed\n                  "),a("button",{class:[e.release.snapshot?"disabled":"","ui tinytiny grey labeled icon button"],on:{click:function(t){return e.snapshot(e.release)}}},[a("i",{staticClass:"bookmark icon"}),e._v("Snapshot\n                  ")])])]),e.build.snapshot?a("div",{staticClass:"meta"},[a("div",[a("i",{staticClass:"server alternate icon"}),e._v(" "+e._s(Object.keys(e.build.snapshot).length)+" snapshot(s) created:\n                "),a("table",{staticClass:"ui compact collapsing small green table"},[a("thead",[a("tr",[a("th",[e._v("Snapshot Name")]),a("th",{class:e.actionable},[e._v("Actions")])])]),a("tbody",e._l(e.build.snapshot,function(t,s){return a("tr",{staticClass:"item"},[a("td",[a("a",[e._v(e._s(s))]),e.build.publish&&e.build.publish.full&&e.build.publish.full.hasOwnProperty(s)?a("publish-summary",{attrs:{publish:e.build.publish.full[s],type:e.type}}):e._e()],1),a("td",{class:e.actionable},[a("button",{staticClass:"ui tinytiny grey labeled icon button",on:{click:function(t){return e.publish(e.release,s,e.build._id)}}},[a("i",{staticClass:"share alternate square icon"}),e._v("\n                                Publish\n                            ")])])])}),0)])])]):e._e()]),a("div",{staticClass:"eight wide column"},[a("release-note-summary",{attrs:{build:e.build,release:e.release,type:e.type}})],1)]),a("div",{class:["ui basic createsnapshot modal",e.release.index_name]},[e._m(0),a("div",{staticClass:"content"},[a("div",{staticClass:"ui form"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"eight wide column"},[a("label",[e._v("Select an environment, snapshot will be created according to its configuration:")]),a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.selected_snapshot_env,expression:"selected_snapshot_env"}],staticClass:"ui fluid snapshotenv dropdown",attrs:{name:"snapshot_env"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selected_snapshot_env=t.target.multiple?a:a[0]}}},e._l(e.snapshot_envs,function(t,s){return a("option",[e._v(e._s(s))])}),0),a("br"),a("br")]),a("label",[e._v("Enter a name for the snapshot (or leave it empty to have the same name as the index)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.snapshot_name,expression:"snapshot_name"}],attrs:{type:"text",name:"snapshot_name",placeholder:"Snapshot name",autofocus:""},domProps:{value:e.snapshot_name},on:{input:function(t){t.target.composing||(e.snapshot_name=t.target.value)}}})]),a("div",{staticClass:"eight wide column"},[e.selected_snapshot_env?a("span",[a("label",[e._v("Configuration details:")]),a("pre",{staticClass:"envdetails"},[e._v(e._s(e.snapshot_envs[e.selected_snapshot_env]))])]):e._e()])])])]),e.error?a("div",{staticClass:"ui error message"},[e._v("\n            "+e._s(e.error)+"\n        ")]):e._e(),e._m(1)]),a("div",{class:["ui basic publishrelease modal",e.release_id]},[e._m(2),a("div",{staticClass:"content"},[a("div",{staticClass:"ui form"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"eight wide column"},[a("div",[a("label",[e._v("The following full release will be published:")]),a("table",{staticClass:"ui inverted darkbluey definition table"},[a("tbody",[a("tr",[a("td",[e._v("Snapshot name")]),a("td",[e._v(e._s(e.selected_snapshot))])])])]),a("br"),a("br")]),a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.selected_release_env,expression:"selected_release_env"}],staticClass:"ui fluid releaseenv dropdown",attrs:{name:"publisher_env"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selected_release_env=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("Select a release environment")]),e._l(e.release_envs,function(t,s){return a("option",[e._v(e._s(s))])})],2),a("br"),a("br")]),a("div",[a("br"),e.build.release_note?a("select",{directives:[{name:"model",rawName:"v-model",value:e.selected_release_note,expression:"selected_release_note"}],staticClass:"ui fluid releaseenv dropdown",attrs:{name:"release_note"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selected_release_note=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("Select a release note to publish with this snapshot")]),e._l(e.build.release_note,function(t,s){return a("option",[e._v(e._s(s))])})],2):a("div",{staticClass:"ui orange small message"},[e._v("Release note was not found and won't be published.")])])]),a("div",{staticClass:"eight wide column"},[e.selected_release_env?a("span",[a("label",[e._v("Configuration details:")]),a("pre",{staticClass:"envdetails"},[e._v(e._s(e.release_envs[e.selected_release_env]))])]):e._e()])])])]),e.publish_error?a("div",{staticClass:"ui error message"},[e._v("\n            "+e._s(e.publish_error)+"\n        ")]):e._e(),e._m(3)])])}),m=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"bookmark icon"}),e._v("\n            Create snapshot\n        ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                Cancel\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                OK\n            ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"share square icon"}),e._v("\n            Publish release\n        ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                Cancel\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                OK\n            ")])])}],v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"meta"},[e.release_notes?a("span",[a("span",[a("i",{staticClass:"bullhorn icon"}),a("b",[e._v(e._s(e.release_notes.length))]),e._v(" release note(s) available\n                "),a("button",{staticClass:"ui tinytiny icon button",class:e.actionable,on:{click:e.generate}},[e._v("Generate")]),e.release_notes.length?a("table",{staticClass:"ui compact collapsing small green table"},[e._m(0),a("tbody",e._l(e.release_notes,function(t){return a("tr",["incremental"==e.type?a("td",[e._v(e._s(e.release_id)+" ")]):a("td",[e._v(e._s(t.changes.old.name)+" ")]),a("td",[a("a",{on:{click:function(a){return e.display(t.changes.old.name)}}},[e._v("View")])])])}),0)]):e._e()])]):a("span",[a("i",{staticClass:"red bullhorn icon"}),e._m(1)]),e.error?a("span",[a("br"),a("br"),e.error?a("div",{staticClass:"ui red basic label"},[e._v(e._s(e.error))]):e._e()]):e._e(),a("div",{class:["ui basic genrelnote modal",e.release_id]},[e._m(2),a("div",{staticClass:"content"},[a("div",{class:["ui form",e.release_id]},[a("div",{staticClass:"ui centered grid"},["incremental"==e.type?a("div",{staticClass:"eight wide column"},[a("label",[e._v("A release note will be created comparing two different builds:\n                            "),a("ul",[a("li",[a("b",[e._v(e._s(e.release.old.backend))]),e._v(", with")]),a("li",[a("b",[e._v(e._s(e.release.new.backend))])])]),e._v("\n                            If these builds were involved in the creation of an incremental release ("),a("i",[e._v('"diff"')]),e._v("),\n                            more information will be added to the release note, reflecting the changes in this release.\n                        ")])]):a("div",{staticClass:"eight wide column"},[a("label",[e._v('Select which previous build should this release be compared to in order to identify\n                               changes and generate the release note. You can choose "None", in that case, the release\n                               note will only contain information about this release (no comparison):\n                        ')]),a("br"),a("br"),a("select",{staticClass:"ui fluid previousbuilds dropdown",attrs:{name:"previous_build"}},[a("option",{attrs:{value:"none"}},[e._v("None (no comparison)")]),e._l(e.compats,function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t))])})],2)]),e._m(3),a("div",{staticClass:"eight wide column"})])])]),e.list_builds_error?a("div",{staticClass:"ui error message"},[e._v("\n            "+e._s(e.list_builds_error)+"\n        ")]):e._e(),e._m(4)]),a("div",{class:["ui basic disprelnote modal",e.type,e.release_id]},[e._m(5),e._m(6),e._m(7)])])},f=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Compared with")]),a("th",[e._v("Notes")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("i",[a("b",[e._v("No")]),e._v(" release note generated")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"bullhorn icon"}),e._v("\n            Generate release note\n        ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"eight wide column"},[a("label",[e._v("You can optionally add a free text at the end of the release note:")]),a("textarea",{attrs:{name:"note"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                Cancel\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                OK\n            ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"bullhorn icon"}),e._v("\n            Release note\n        ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("pre",{staticClass:"relnotecontent"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui basic green ok inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                Close\n            ")])])}],p=a("3361"),h=a("bf2a"),b={name:"release-note-summary",mixins:[p["a"],h["a"]],props:["release","build","type"],mounted:function(){this.normalizeReleaseNotes()},created:function(){},beforeDestroy:function(){$(".ui.basic.genrelnote.modal").remove(),$(".ui.basic.disprelnote.modal").remove()},components:{},data:function(){return{error:null,list_builds_error:null,compats:{},release_note_content:null,release_notes:[]}},computed:{release_id:function(){return"full"==this.type?this.release.index_name:this.release.old.backend}},watch:{build:function(e,t){e!=t&&this.normalizeReleaseNotes()}},methods:{displayError:function(){},display:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.error=null,"incremental"==this.type)var t=this.release_id,a=this.release.new.backend;else t=e,a=this.release_id;var s=this,i="old=".concat(t,"&new=").concat(a);s.loading(),o.a.get(o.a.defaults.baseURL+"/release_note?"+i).then(function(e){s.release_note_content=e.data.result,s.loaded(),$(".ui.basic.disprelnote.modal.".concat(s.type,".").concat(s.release_id," pre")).text(e.data.result),$(".ui.basic.disprelnote.modal.".concat(s.type,".").concat(s.release_id)).modal("setting",{detachable:!1,closable:!1}).modal("show")}).catch(function(e){throw console.log("Error retrieving release note: "),s.loaderror(e),s.error=s.extractError(e),e})},normalizeReleaseNotes:function(){if(this.build.release_note){var e=JSON.parse(JSON.stringify(this.build.release_note));if("incremental"==this.type){if(e.hasOwnProperty(this.release.old.backend)){var t=e[this.release.old.backend];t["changes"]["old"]["name"]=self.release_id,this.release_notes=[t]}}else{var a=[];for(var s in e){t=e[s];t["changes"]["old"]["name"]=s,a.push(t)}this.release_notes=a}}},generate:function(){var e=this;this.error=null;var t=this;"full"==this.type&&(t.loading(),o.a.get(o.a.defaults.baseURL+"/builds").then(function(a){var s=a.data.result;e.compats=e.selectCompatibles(s),$(".ui.previousbuilds.dropdown").dropdown(),t.loaded()}).catch(function(e){console.log("Error getting previous builds: "),t.loaderror(e),t.list_builds_error=t.extractError(e)})),$(".ui.basic.genrelnote.modal.".concat(this.release_id)).modal("setting",{detachable:!1,closable:!1,onApprove:function(){var e=$(".ui.form.".concat(t.release_id," textarea[name=note]")).val();if("full"==t.type)var a=t.release_id,s=$(".ui.form.".concat(t.release_id," select[name=previous_build]")).val();else s=t.release.old.backend,a=t.release.new.backend;t.loading(),o.a.put(o.a.defaults.baseURL+"/release_note/create",{old:s,new:a,note:e}).then(function(e){return t.loaded(),e.data.result}).catch(function(e){return console.log("Error generating release note: "),t.loaderror(e),t.error=t.extractError(e),!1})}}).modal("show")},selectCompatibles:function(e){var t=[],a=this;return $.each(e,function(s){var i=e[s];i.build_config._id==a.build.build_config._id&&i._id!=a.build._id&&t.push(i._id)}),t}}},g=b,C=(a("2a9f"),a("0c7c")),y=Object(C["a"])(g,v,f,!1,null,"13496780",null),w=y.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},k=[],O={name:"base-release-event",mixins:[p["a"],h["a"]],props:["release","build","type"],mounted:function(){},created:function(){},beforeDestroy:function(){$(".ui.basic.publishrelease.modal.".concat(this.release_id)).remove()},components:{},data:function(){return{selected_release_env:null,release_envs:{},publish_error:null,selected_current:null,selected_previous:null}},computed:{},watch:{},methods:{getReleaseEnvironments:function(){var e=this;e.loading(),o.a.get(o.a.defaults.baseURL+"/release_manager").then(function(t){e.release_envs=t.data.result.env,$(".ui.releaseenv.dropdown").dropdown(),e.loaded()}).catch(function(t){console.log("Error getting publisher environments: "),console.log(t),e.loaderror(t),e.error=t})}}},x=O,D=(a("bff8"),Object(C["a"])(x,E,k,!1,null,"096ea9bb",null)),j=D.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("div",{staticClass:"ui tiny compact positive nopad message"},[a("div",{staticClass:"header"},[a("div",{staticClass:"ui horizontal bulleted list"},[a("div",{staticClass:"item"},[e._v("\n                    Release published\n                ")]),a("div",{staticClass:"item"},[a("a",{attrs:{href:e.version_url}},[e._v("versions.json")])])])]),a("p",[e._v("on "+e._s(e.moment(e.publish.metadata.release_date).format("MMMM Do YYYY, h:mm:ss a")))])])])},M=[],A=(a("6b54"),a("28a5"),{name:"publish-summary",mixins:[p["a"]],props:["publish","type"],mounted:function(){},created:function(){},beforeDestroy:function(){},components:{},data:function(){return{}},computed:{version_url:function(){var e=new URL(this.publish.metadata.url),t=e.pathname.split("/").slice(0,-1);return t.push("versions.json"),e.pathname=t.join("/"),e.toString()}},watch:{},methods:{}}),R=A,S=(a("a4ad"),Object(C["a"])(R,P,M,!1,null,"d3a95e92",null)),L=S.exports,U={name:"index-release-event",mixins:[j],props:["release","build","type"],mounted:function(){},beforeDestroy:function(){$(".ui.basic.createsnapshot.modal.".concat(this.release.index_name)).remove()},components:{ReleaseNoteSummary:w,PublishSummary:L},data:function(){return{snapshot_envs:{},error:null,selected_snapshot_env:null,selected_snapshot:null,snapshot_name:null,selected_release_note:null}},computed:{num_indexed:function(){return this.release.count||0},release_id:function(){return this.release.index_name}},methods:{displayError:function(){},snapshot:function(e){var t=this;t.error=null,t.loading(),o.a.get(o.a.defaults.baseURL+"/snapshot_manager").then(function(e){t.snapshot_envs=e.data.result.env,$(".ui.snapshotenv.dropdown").dropdown(),t.loaded()}).catch(function(e){console.log("Error getting snapshot environments: "),console.log(e),t.loaderror(e),t.error=e}),$(".ui.basic.createsnapshot.modal.".concat(this.release.index_name)).modal("setting",{detachable:!1,closable:!1,onApprove:function(){t.loading(),t.selected_snapshot_env&&o.a.put(o.a.defaults.baseURL+"/snapshot",{snapshot_env:t.selected_snapshot_env,index:t.release.index_name,snapshot:t.snapshot_name}).then(function(e){return r["a"].$emit("reload_build_detailed"),t.loaded(),e.data.result}).catch(function(e){console.log("Error creating snapshot: "),console.log(e),t.loaderror(e)})}}).modal("show")},publish:function(e,t,a){console.log("snapshot_name ".concat(t," current_build ").concat(a));var s=this;s.error=null,s.getReleaseEnvironments(),s.selected_current=a,s.selected_snapshot=t,$(".ui.basic.publishrelease.modal.".concat(this.release_id)).modal("setting",{detachable:!1,closable:!1,onApprove:function(){if(console.log("rt ".concat(s.selected_release_note," l ").concat(s.build.release_note)),!s.selected_release_note&&Object.keys(s.build.release_note).length)return s.publish_error="Multiple release note found, please select one",!1;var e={publisher_env:s.selected_release_env,build_name:s.selected_current,previous_build:s.selected_release_note,snapshot:t};if(!s.selected_release_env)return!1;s.loading(),o.a.post(o.a.defaults.baseURL+"/publish/full",e).then(function(e){return r["a"].$emit("reload_build_detailed"),s.loaded(),e.data.result}).catch(function(e){console.log("Error publishing release: "),console.log(e),s.loaderror(e)})}}).modal("show")}}},I=U,T=(a("662a"),Object(C["a"])(I,_,m,!1,null,"64888f50",null)),B=T.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"event-container"},[a("div",{staticClass:"ui grid"},[a("div",{staticClass:"eight wide column"},[a("div",{staticClass:"summary"},[a("i",{staticClass:"large exchange alternate icon"}),e._v("\n                Diff with "),a("b",[e._v(e._s(e.release.old.backend||"?"))]),e._v(" has been computed."),a("br"),e._v("\n                Old version: "),e.release.old.version?a("b",[e._v(e._s(e.release.old.version))]):a("i",[e._v("None")]),e._v(", current version: "),a("b",[e._v(e._s(e.release.new.version))]),a("div",{staticClass:"date"},[e._v("\n                    Created \n                    "+e._s(e._f("moment")(e.release.created_at,"from","now"))+"\n                    ("),a("i",[e._v("on "+e._s(e.moment(e.release.created_at).format("MMMM Do YYYY, h:mm:ss a")))]),e._v(")\n\n                ")])]),a("div",{staticClass:"meta"},[a("div",{class:e.actionable},[a("i",{staticClass:"file alternate icon"}),e._v(e._s(e.release.diff.files.length)+" diff file(s) created ("+e._s(e._f("pretty_size")(e.total_diff_size,e.precision=0))+")\n                    "),a("button",{staticClass:"ui tinytiny grey labeled icon button",on:{click:function(t){return e.applyDiff(e.release)}}},[a("i",{staticClass:"external link square alternate icon"}),e._v("Apply\n                    ")]),a("button",{staticClass:"ui tinytiny grey labeled icon button",on:{click:function(t){return e.publish(e.release,e.release_id,e.build._id)}}},[a("i",{staticClass:"share alternate square icon"}),e._v("\n                        Publish\n                    ")])]),a("i",{staticClass:"chart line icon"}),e._v(e._s(e._f("formatInteger")(e.release.diff.stats.update))+" updated,\n                "+e._s(e._f("formatInteger")(e.release.diff.stats.add))+" added,\n                "+e._s(e._f("formatInteger")(e.release.diff.stats.delete))+" deleted.\n                "),e.release.diff.stats.mapping_changed?a("b",[e._v("Mapping has changed.")]):e._e(),a("div",[e.build.publish&&e.build.publish.incremental&&e.build.publish.incremental.hasOwnProperty(e.release_id)?a("publish-summary",{attrs:{publish:e.build.publish.incremental[e.release_id],type:e.type}}):e._e()],1)])]),a("div",{staticClass:"eight wide column"},[a("release-note-summary",{attrs:{build:e.build,release:e.release,type:e.type}})],1)]),a("div",{class:["ui basic applydiff modal",e.release.old.backend]},[e._m(0),a("div",{staticClass:"content"},[a("div",{staticClass:"ui form"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"eight wide column"},[a("label",[e._v("Select a backend to apply the diff to")]),a("div",[a("select",{staticClass:"ui fluid backendenv dropdown",attrs:{name:"target_backend"}},e._l(e.compats,function(t){return a("option",{attrs:{"data-es_host":t.host,"data-index":t.index}},[e._v(e._s(t.env)+" ("+e._s(t.host)+" | "+e._s(t.index)+")")])}),0),a("br"),a("br")])]),a("div",{staticClass:"eight wide column"})])])]),e.errors.length?a("div",{staticClass:"ui error message"},[a("ul",{staticClass:"ui list"},e._l(e.errors,function(t){return a("li",[e._v(e._s(t))])}),0)]):e._e(),e._m(1)]),a("div",{class:["ui basic publishrelease modal",e.release_id]},[e._m(2),a("div",{staticClass:"content"},[a("div",{staticClass:"ui form"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"eight wide column"},[a("label",[e._v("The following incremental release will be published, containing differences between:")]),a("table",{staticClass:"ui inverted darkbluey definition table"},[a("tbody",[a("tr",[a("td",[e._v("Current build")]),a("td",[e._v(e._s(e.selected_current))])]),a("tr",[a("td",[e._v("Previous build")]),a("td",[e._v(e._s(e.selected_previous))])])])]),a("label",[e._v("Note: all diff files will be uploaded\n                            "),e.build.release_note?a("span",[e._v(" as well as the release note associated to this incremental release.")]):a("div",{staticClass:"ui orange small message"},[e._v("Release note was not found and won't be published.")])]),a("br"),a("br"),a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.selected_release_env,expression:"selected_release_env"}],staticClass:"ui fluid releaseenv dropdown",attrs:{name:"publisher_env"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selected_release_env=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("Select a release environment")]),e._l(e.release_envs,function(t,s){return a("option",[e._v(e._s(s))])})],2)])]),a("div",{staticClass:"eight wide column"},[e.selected_release_env?a("span",[a("label",[e._v("Configuration details:")]),a("pre",{staticClass:"envdetails"},[e._v(e._s(e.release_envs[e.selected_release_env]))])]):e._e()])])])]),e.publish_error?a("div",{staticClass:"ui error message"},[e._v("\n            "+e._s(e.publish_error)+"\n        ")]):e._e(),e._m(3)])])},K=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"tag icon"}),e._v("\n            Apply increment update (diff)\n        ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                Cancel\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                OK\n            ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"share square icon"}),e._v("\n            Publish release\n        ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                Cancel\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                OK\n            ")])])}],W={name:"diff-release-event",mixins:[j],props:["release","build","type"],mounted:function(){$(".ui.backendenv.dropdown").dropdown()},beforeDestroy:function(){$(".ui.basic.applydiff.modal.".concat(this.release.old.backend)).remove()},created:function(){},components:{ReleaseNoteSummary:w,PublishSummary:L},data:function(){return{errors:[],compats:{}}},computed:{release_id:function(){return this.release.old.backend},total_diff_size:function(){var e=0;return this.release.diff&&this.release.diff.files&&this.release.diff.files.map(function(t){e+=t.size}),e}},methods:{displayError:function(){},applyDiff:function(e){var t=this,a=this;a.loading(),o.a.get(o.a.defaults.baseURL+"/index_manager?remote=1").then(function(e){var s=e.data.result;t.compats=t.selectCompatibles(s),$(".ui.backendenv.dropdown").dropdown(),a.loaded()}).catch(function(e){throw console.log("Error getting index environments: "),console.log(e),a.loaderror(e),e});var s=e.old.backend,i=e.new.backend,n=(e.diff.type,"es"),c=this.build.build_config.doc_type;a=this;$(".ui.basic.applydiff.modal.".concat(this.release.old.backend)).modal("setting",{detachable:!1,closable:!1,onApprove:function(){var e=$(".ui.form select[name=target_backend] :selected"),t=$(e).attr("data-es_host"),l=$(e).attr("data-index"),u=[t,l,c];a.loading(),o.a.post(o.a.defaults.baseURL+"/sync",{backend_type:n,old_db_col_names:s,new_db_col_names:i,target_backend:u}).then(function(e){return r["a"].$emit("reload_build_detailed"),a.loaded(),e.data.result}).catch(function(e){console.log("Error applying diff: "),console.log(e),a.loaderror(e)})}}).modal("show")},selectCompatibles:function(e){var t=[],a=null,s=this;return e.build_config_key&&(a=this.build.build_config[e.build_config_key]),$.each(e.env,function(e,i){if(a){var n=!1;for(var o in i.index){var r=i.index[o];console.log(r),r.hasOwnProperty(a)&&(n=!0)}if(!n)return!0}for(var c in i.index)i.index[c]["doc_type"]==s.build.build_config.doc_type&&t.push({env:e,host:i["host"],index:i.index[c]["index"]})}),t},publish:function(e,t,a){var s=this;s.error=null,t&&a?(s.getReleaseEnvironments(),s.selected_previous=t,s.selected_current=a,$(".ui.basic.publishrelease.modal.".concat(this.release_id)).modal("setting",{detachable:!1,closable:!1,onApprove:function(){var e={publisher_env:s.selected_release_env,build_name:s.selected_current,previous_build:s.selected_previous};if(!s.selected_release_env)return!1;s.loading(),o.a.post(o.a.defaults.baseURL+"/publish/incremental",e).then(function(e){return r["a"].$emit("reload_build_detailed"),s.loaded(),e.data.result}).catch(function(e){console.log("Error publishing release: "),console.log(e),s.loaderror(e)})}}).modal("show")):console.log("Can't publish, previous_build=".concat(t,", current_build=").concat(a))}}},q=W,J=(a("e7eb"),Object(C["a"])(q,N,K,!1,null,"28d7132e",null)),z=J.exports,H={name:"build-releases",props:["build"],mixins:[h["a"]],mounted:function(){$(".ui.releasetype.dropdown").dropdown()},created:function(){this.loadData()},beforeDestroy:function(){$(".ui.basic.newrelease.modal").remove()},components:{IndexReleaseEvent:B,DiffReleaseEvent:z},data:function(){return{errors:[],release_type:null,diff_types:[],avail_builds:[],index_envs:[]}},computed:{releases:function(){var e=[];return this.build.index&&(e=e.concat(Object.values(this.build.index))),this.build.diff&&(e=e.concat(Object.values(this.build.diff))),e.sort(function(e,t){var a=e.created_at&&Date.parse(e.created_at),s=t.created_at&&Date.parse(t.created_at);return s-a}),console.log(e),e},error:function(){var e=this.build.jobs[this.build.jobs.length-1];if(e&&e.err)return e.err}},methods:{displayError:function(){},newFullRelease:function(){var e=$(".ui.form input[name=index_name]").val();""==e&&(e=null);var t=$(".ui.form select[name=index_env] :selected").attr("data-env");o.a.put(o.a.defaults.baseURL+"/index",{indexer_env:t,target_name:this.build._id,index_name:e}).then(function(e){return console.log(e.data.result),e.data.result}).catch(function(e){console.log("Error creating index: "),console.log(e)})},newIncrementalRelease:function(){var e=$(".ui.form select[name=old_build]").val(),t=$(".ui.form select[name=diff_type]").val(),a=$(".ui.form input[name=diff_purge]").prop("checked");e||this.errors.push("Select a build to compute incremental data"),t||this.errors.push("Select a diff type");var s={diff_type:t,old:e,new:this.build._id};a&&(s["mode"]="purge"),o.a.put(o.a.defaults.baseURL+"/diff",s).then(function(e){return console.log(e.data.result),e.data.result}).catch(function(e){console.log("Error creating diff: "),console.log(e)})},newRelease:function(){var e=this;$(".ui.basic.newrelease.modal").modal("setting",{detachable:!1,onApprove:function(){e.errors=[];var t=$(".ui.form select[name=release_type]").val();return"full"==t?e.newFullRelease():"incremental"==t?e.newIncrementalRelease():(console.log("Unknown release type ".concat(t)),!1)}}).modal("show")},loadData:function(){var e=this;o.a.get(o.a.defaults.baseURL+"/diff_manager").then(function(t){console.log(t.data.result),e.diff_types=Object.keys(t.data.result).sort()}).catch(function(e){console.log(e),console.log("Error loading differ information: "+e.data.error)}),o.a.get(o.a.defaults.baseURL+"/index_manager").then(function(t){e.index_envs=t.data.result}).catch(function(e){console.log(e),console.log("Error loading differ information: "+e.data.error)}),o.a.get(o.a.defaults.baseURL+"/builds?conf_name=".concat(this.build.build_config._id)).then(function(t){console.log(t.data.result),$(t.data.result).each(function(t,a){console.log("".concat(a._id," ").concat(e.build._id)),a._id!=e.build._id&&e.avail_builds.push(a._id)})}).catch(function(e){console.log(e),console.log("Error loading differ information: "+e.data.error)})}}},Y=H,F=(a("fc17"),Object(C["a"])(Y,u,d,!1,null,"0a4370f2",null)),V=F.exports,G=a("309e"),X=a("e46a"),Q=a("a59c"),Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",{staticClass:"ui small fixed padded compact grey table"},[e._m(0),a("tbody",[a("tr",[a("td",[e._v("Name")]),a("td",[e._v(e._s(e.build.build_config._id))])]),a("tr",[a("td",[e._v("Document type")]),a("td",[e._v(e._s(e.build.build_config.doc_type))])]),a("tr",[a("td",[e._v("Merged source(s)")]),e.build.build_config.sources?a("td",[e._v(e._s(e.build.build_config.sources.join(", ")))]):e._e()]),a("tr",[a("td",[e._v("Root source(s)")]),e.build.build_config.root?a("td",[e._v(e._s(e.build.build_config.root.join(", ")))]):e._e()]),a("tr",[a("td",[e._v("Others")]),a("td",[e._v(e._s(JSON.stringify(e.others)))])])])])},ee=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr")])}],te=(a("6762"),a("2fdb"),{name:"build-stats",props:["build"],mounted:function(){},beforeDestroy:function(){},computed:{others:function(){var e={};for(var t in this.build.build_config)["_id","name","sources","root","doc_type"].includes(t)||(e[t]=this.build.build_config[t]);return e}},components:{},methods:{}}),ae=te,se=Object(C["a"])(ae,Z,ee,!1,null,"2243bb78",null),ie=se.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("div",{staticClass:"ui fluid basic segment right aligned",class:e.actionable},[a("button",{staticClass:"ui button mini",on:{click:e.inspect}},[a("i",{staticClass:"unhide icon"}),e._v("\n            Inspect data\n        ")])]),a("inspect-form",{attrs:{_id:e.build._id}}),a("p",[e._v("\n        These are the mappings for build "),a("b",[e._v(e._s(e.build._id))]),e._v(".\n    ")]),e._m(0),a("p",[e._v("\n        Mappings can be manually edited and mapping from inspection can be saved as the new registered, active mapping.\n    ")]),e._m(1),e.maps?a("div",{staticClass:"ui segment"},[a("div",{staticClass:"ui grid"},[!e.maps["inspect_mapping"]||e.maps["inspect_mapping"]["errors"]||e.maps["inspect_mapping"]["pre-mapping"]?e._e():a("div",{staticClass:"center aligned sixteen wide column"},[a("button",{staticClass:"ui labeled mini icon button",on:{click:function(t){return e.diffMapping("tab_mapping_inspected","tab_mapping_registered",e.build._id)}}},[a("i",{staticClass:"exchange icon"}),e._v("\n                    Diff\n                ")])]),a("div",{staticClass:"sixteen wide column"},[a("div",{staticClass:"ui grid"},[a("div",{staticClass:"eight wide column"},[e.maps?a("mapping-map",{attrs:{entity:"build",map:e.maps["inspect_mapping"],name:e.build._id,map_origin:"inspect",map_id:"tab_mapping_inspected",read_only:e.maps["inspect_mapping"]&&e.maps["inspect_mapping"]["pre-mapping"],can_commit:!e.maps["registered_mapping"]||"uploader"!=e.maps["registered_mapping"]["origin"]}}):e._e()],1),a("div",{staticClass:"eight wide column"},[e.maps["registered_mapping"]?a("mapping-map",{attrs:{entity:"build",map:e.maps["registered_mapping"],name:e.build._id,map_origin:"build",map_id:"tab_mapping_registered",read_only:!1,can_commit:!1}}):e._e()],1)])])])]):a("div",{staticClass:"ui segment"},[e._v("\n        No mapping found.\n        "),a("span",{class:e.actionable},[a("button",{staticClass:"ui button mini",on:{click:e.inspect}},[a("i",{staticClass:"unhide icon"}),e._v("\n                Inspect data\n            ")]),e._v("\n            to create one.\n        ")])])],1)},oe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("i",[e._v("Mapping from inspection")]),e._v(" has been generated during data inspection, while "),a("i",[e._v("Registered mapping")]),e._v(" is the actual active mapping, used during indexation.\n    ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui warning message"},[a("ul",{staticClass:"ui list"},[a("li",[e._v("Registered mapping is created by merging each source's mapping. Modifications may not survive as it can be re-generated.")]),a("li",[e._v("When testing a mapping, an temporary index is created on the selection ElasticSearch environment. That index is then deleted.")])])])}],re=a("8ae6"),ce=a("f1f5"),le=a("55b7"),ue={name:"build-mapping",props:["build"],mixins:[le["a"],h["a"]],components:{InspectForm:c["a"],MappingMap:re["a"],JsonDiffResults:ce["a"],BuildReleases:V,BuildSources:G["a"],BuildStats:X["a"],BuildLogs:Q["a"],BuildConfig:ie},mounted:function(){console.log("BuildDetailed mounted")},updated:function(){$("select.dropdown").dropdown(),$(".menu .item").tab()},data:function(){return{}},computed:{maps:function(){var e={};return this.build.mapping&&(e["registered_mapping"]=this.build.mapping),this.build.inspect&&this.build.inspect.results&&(e["inspect_mapping"]=this.build.inspect.results.mapping),Object.keys(e).length?e:null}},methods:{displayError:function(){var e=[];return e.join("<br>")},inspect:function(e){r["a"].$emit("do_inspect",this.build._id)}}},de=ue,_e=(a("6f78"),Object(C["a"])(de,ne,oe,!1,null,null,null)),me=_e.exports,ve=a("6a96"),fe={name:"build-detailed",props:["_id","color"],mixins:[l["a"],p["a"]],components:{InspectForm:c["a"],BuildReleases:V,BuildMapping:me,DiffModal:ve["a"],BuildSources:G["a"],BuildStats:X["a"],BuildLogs:Q["a"],BuildConfig:ie,Loader:p["a"]},mounted:function(){console.log("BuildDetailed mounted"),this.loadData()},updated:function(){$("select.dropdown").dropdown(),$(".menu .item").tab()},created:function(){r["a"].$on("change_build",this.loadData)},beforeDestroy:function(){r["a"].$off("change_build",this.loadData)},data:function(){return{build:null}},methods:{displayError:function(){var e=[];return e.join("<br>")},loadData:function(){var e=this,t=this;this.loading(),o.a.get(o.a.defaults.baseURL+"/build/".concat(this._id)).then(function(a){t.build=a.data.result,e.loaded()}).catch(function(t){console.log("Error getting build information: "+t),e.loaderror(t)})}}},pe=fe,he=(a("59e4"),Object(C["a"])(pe,s,i,!1,null,null,null));t["a"]=he.exports},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"ui fixed inverted menu"},[s("div",{staticClass:"ui studio container"},[s("div",{staticClass:"item"},[null!==e.readonly_switch?s("span",[s("div",{staticClass:"ui middle aligned mini",attrs:{"data-tooltip":"Toggle read-only mode","data-position":"bottom left"}},[s("i",{staticClass:"clickicon large lock icon",class:e.readonly_mode?"red":"",on:{click:e.switchReadOnly}})])]):s("span",[s("div",{staticClass:"ui middle aligned mini",attrs:{"data-tooltip":"Hub is read-only","data-position":"bottom left"}},[s("i",{staticClass:"large lock icon",class:e.readonly_mode?"red":""})])])]),s("div",{staticClass:"item"},[s("div",{staticClass:"ui middle aligned mini"},[s("choose-hub")],1)]),s("div",{staticClass:"header item"},[s("img",{staticClass:"logo",attrs:{src:a("11df")}}),s("div",{attrs:{id:"conn","data-html":"<div style='width:30em;'><a>"+e.conn.url+"</a><br>App. version: <b>"+e.str_app_version+"</b><br>Biothings version: <b>"+e.str_biothings_version+"</b><br></div>Studio version: <b>"+e.current_studio_version+"</b><br></div>Features: <b> "+e.studio_features+"</b><br></div>","data-position":"bottom center"}},[e._v(e._s(e.conn.name||"John Doe"))])]),e.needs_upgrade?s("div",{staticClass:"ui item"},[s("div",[s("button",{staticClass:"mini circular ui icon button",on:{click:function(t){return e.showUpgrades()}}},[s("i",{staticClass:"upgrade sync icon"})])])]):e._e(),e._l(e.menu,function(t){return s("a",{staticClass:"clickable item"},[s("i",{class:["ui",t["icon"],"icon"]}),s("router-link",{attrs:{to:t["path"]}},[e._v(e._s(t["name"]))])],1)}),e.has_feature("job")?s("div",{staticClass:"clickable ui item right"},[s("job-summary")],1):e._e(),e.has_feature("ws")?s("div",{staticClass:"clickable ui item"},[s("event-messages")],1):e._e(),s("div",{staticClass:"ui item"},[s("loader"),e.has_feature("config")?s("div",{attrs:{id:"settings"}},[s("button",{staticClass:"mini circular ui icon button",on:{click:e.openConfig}},[s("i",{staticClass:"cog icon"})])]):e._e(),e.has_feature("ws")?s("span",[e.socket&&1==e.socket.readyState?s("div",{attrs:{"data-tooltip":"Connection: "+e.socket.transport,"data-position":"bottom center"}},[s("button",{staticClass:"mini circular ui icon button",on:{click:e.closeConnection}},[s("i",{staticClass:"green power off icon"})])]):"connecting"==e.ws_connection?s("div",{attrs:{"data-tooltip":"Connecting","data-position":"bottom center"}},[s("button",{staticClass:"mini circular ui icon button",on:{click:e.closeConnection}},[s("i",{staticClass:"pulsing grey circle icon"})])]):s("div",[s("button",{staticClass:"mini circular ui icon button",attrs:{"data-tooltip":"Click to reconnect","data-position":"bottom center"},on:{click:e.openConnection}},[s("i",{staticClass:"red plug icon"})])])]):e._e()],1)],2)]),s("div",{staticClass:"ui basic redirect modal"},[e.redirect_url?s("div",{staticClass:"content"},[s("p",[e._v("\n                    Hub requires a different Studio version, found here: "),s("a",{attrs:{href:e.redirect_url}},[e._v(e._s(e.redirect_url))])]),s("p",[e._v("\n                    This page will automatically redirect to this URL in "+e._s(e.redirect_delay/1e3)+" second(s) unless cancelled.\n                ")])]):s("div",{staticClass:"content"},[e._m(0),s("p",[e._v("\n                    For your information, required version is: "),s("code",[s("b",[e._v(e._s(e.required_studio_version))])]),s("br"),e._v("\n                    Tested URLs were:\n                    ")]),s("div",{staticClass:"ui inverted segment"},[s("div",{staticClass:"ui ordered inverted list"},e._l(e.compat_urls,function(t){return s("div",{staticClass:"item"},[s("a",{attrs:{href:t}},[e._v(e._s(t))])])}),0)]),s("p")]),s("div",{staticClass:"content"},[s("div",{staticClass:"ui form"},[s("div",{staticClass:"ui checkbox"},[s("input",{attrs:{id:"skip_compat",type:"checkbox"},on:{click:function(t){return e.toggleCheckCompat(t)}}}),s("label",{staticClass:"white"},[e._v("Skip compatility check")])])])]),s("div",{staticClass:"actions"},[e.redirect_url?s("div",{staticClass:"ui red basic cancel inverted button"},[s("i",{staticClass:"remove icon"}),e._v("\n                    Keep this version (not recommended)\n                ")]):e._e(),e._m(1)])]),e.has_feature("config")?s("div",{staticClass:"ui basic config modal"},[e._m(2),s("div",{staticClass:"content"},[s("hub-config")],1),e._m(3)]):e._e(),s("div",{staticClass:"clickable ui active tab segment",attrs:{id:"page_content"}},[s("router-view")],1),s("div",{staticClass:"ui basic upgrade modal"},[e._m(4),s("div",{staticClass:"content"},[s("system-upgrade",{attrs:{biothings_version:e.conn.biothings_version,app_version:e.conn.app_version}})],1),e._m(5)]),s("event-alert"),s("div",{staticClass:"ui mini grey bottom fixed inverted menu"},[s("div",{staticClass:"left menu"},[e.has_feature("terminal")?s("a",{staticClass:"clickable terminal item"},[s("i",{staticClass:"terminal icon"}),e._v("\n                  Terminal\n              ")]):e._e()]),s("div",{staticClass:"right menu"},[e.has_feature("ws")?s("a",{staticClass:"clickable logs item"},[s("i",{staticClass:"bell outline icon"}),e._v("\n                  Logs\n              ")]):e._e()]),s("div",{staticClass:"ui terminal popup top left transition hidden",staticStyle:{width:"50%"}},[e.has_feature("terminal")?s("div",{staticClass:"ui inverted segment"},[s("terminal")],1):e._e()]),e.has_feature("ws")?s("div",{staticClass:"ui logs popup top transition hidden"},[s("log-viewer")],1):e._e()])],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("\n                    Hub requires a different Studio version than the one currently running."),a("br"),e._v("\n                    No other URLs could be found as a compatible Studio version."),a("br")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                    Validate\n                ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"cog icon"}),e._v("\n                Hub Configuration\n            ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                    Cancel\n                ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                    OK\n                ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"sync icon"}),e._v("\n                Upgrade system\n            ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                    OK\n                ")])])}],o=a("148b"),r=o["a"],c=(a("034f"),a("0c7c")),l=Object(c["a"])(r,i,n,!1,null,null,null),u=l.exports,d=a("bc3a"),_=a.n(d),m=a("c1df"),v=a.n(m);s["a"].prototype.moment=v.a;var f=s["a"].localStorage.get("last_conn");if(f){var p=JSON.parse(f);_.a.defaults.baseURL=p.url}else _.a.defaults.baseURL="http://".concat(window.location.hostname,":7080");console.log("axios default URl: ".concat(_.a.defaults.baseURL)),new s["a"]({el:"#app",render:function(e){return e(u)},router:u.router})},5988:function(e,t,a){"use strict";var s=a("febc"),i=a.n(s);i.a},"59e4":function(e,t,a){"use strict";var s=a("1fd2"),i=a.n(s);i.a},"5abd":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("div",{staticClass:"ui grid",class:e.actionable},[a("div",{staticClass:"fourteen wide column"}),a("div",{staticClass:"two wide column"},[a("div",{staticClass:"ui secondary small compact menu right floated"},[a("a",{staticClass:"item",on:{click:function(t){return e.wizard()}}},[a("i",{staticClass:"magic icon"}),e._v("\n                    Setup\n                ")])])])]),e.version_urls.length?a("div",{staticClass:"ui grid"},[a("div",{staticClass:"two wide column"},[a("div",{staticClass:"ui grey inverted vertical fluid tabular standalone menu"},e._l(e.version_urls,function(t,s){return a("a",{class:["item",0===s?"active":""],attrs:{"data-tab":t.name},on:{click:function(a){return e.changeTab(t.name)}}},[e._v("\n                    "+e._s(t.name)+"\n                ")])}),0)]),a("div",{staticClass:"fourteen wide stretched column"},e._l(e.version_urls,function(e,t){return a("div",{class:["ui bottom attached tab srctab segment",0===t?"active":""],attrs:{"data-tab":e.name}},[a("standalone-release",{attrs:{name:e.name,url:e.url}})],1)}),0)]):e._e(),a("div",{staticClass:"ui basic inverted wizard modal"},[a("standalone-wizard"),e._m(0)],1)])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui right aligned segment"},[a("div",{staticClass:"actions"},[a("div",{staticClass:"ui grey ok button"},[a("i",{staticClass:"remove icon"}),e._v("\n                    Close\n                ")])])])}],n=(a("7514"),a("bc3a")),o=a.n(n),r=a("3361"),c=a("bf2a"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("h1",{staticClass:"ui header"},[e._v(e._s(e.name))]),a("div",{staticClass:"ui secondary small compact menu"},[a("a",{staticClass:"item",on:{click:function(t){return e.refresh()}}},[a("i",{staticClass:"sync icon"}),e._v("\n\t\t\t\tRefresh\n\t\t\t")]),a("a",{staticClass:"item"},[a("a",{attrs:{href:e.url}},[e._v("versions.json")])])]),a("br"),a("br"),a("div",{staticClass:"ui grid"},[a("div",{staticClass:"twelve wide column"},[a("standalone-release-versions",{attrs:{name:e.name,backend:e.backend}})],1),a("div",{staticClass:"four wide column"},[e.backend_error?a("div",{staticClass:"ui tiny negative message"},[a("div",{staticClass:"header"},[e._v("Unable to load backend information")]),a("p",[e._v(e._s(e.backend_error))])]):a("div",{staticClass:"item"},[a("div",{staticClass:"ui list"},[a("div",{staticClass:"item"},[a("i",{staticClass:"database icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[e._v("ElasticSearch host")]),a("a",{attrs:{href:e.backend.host}},[e._v(" "+e._s(e.backend.host))])])]),a("div",{staticClass:"item"},[a("i",{staticClass:"bookmark icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[e._v("Index")]),e._v("\n                                "+e._s(e.backend.index)+"\n                            ")])]),a("div",{staticClass:"item"},[a("i",{staticClass:"thumbtack icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[e._v("Version")]),e._v("\n                                "+e._s(e.backend.version||"no version found"))])]),a("div",{staticClass:"item"},[a("i",{staticClass:"file alternate icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[e._v("Documents")]),e._v("\n                                "+e._s(e._f("formatNumeric")(e.backend.count,e.fmt="0,0"))+"\n                            ")])])]),a("button",{staticClass:"ui small negative basic button",class:e.actionable,on:{click:function(t){return e.reset()}}},[e._v("Reset")])])])]),a("div",{class:["ui basic reset modal",e.encoded_name]},[e._m(0),e._m(1),e._m(2)])])},u=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h2",{staticClass:"ui icon"},[a("i",{staticClass:"info circle icon"}),e._v("\n                    Reset backend\n                ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("p",[e._v("Are you sure you want to reset the backend and delete the index.")]),a("div",{staticClass:"ui tiny warning message"},[e._v("\n                        This operation is "),a("b",[e._v("not")]),e._v(" reversible, all data on the index will be lost.\n                    ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                        No\n                    ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                        Yes\n                    ")])])}],d=(a("7f7f"),a("a481"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")}),_=[],m=a("f5ef"),v={name:"async-command-launcher",mounted:function(){$.tablesort.DEBUG=!0,this.watchdog()},components:{},created:function(){m["a"].$on("change_command",this.onCommandChanged)},beforeDestroy:function(){m["a"].$off("change_command",this.onCommandChanged),this.interval_ref&&clearInterval(this.interval_ref)},data:function(){return{running:{},watchdog_running:!1,watchdog_interval:5e3,interval_ref:null}},computed:{},methods:{watchdog:function(){var e=this;this.interval_ref=setInterval(function(){var t=[];for(var a in e.running)if(e.running.hasOwnProperty(a)){console.log("Watchdog fetch result for ".concat(a));try{e.fetchResult(a)}catch(i){console.log(i),t.push(a)}}for(var s in t)delete e.running[t[s]]},this.watchdog_interval)},launchAsyncCommand:function(e,t,a){var s=this;s.loading(),e().then(function(i){if("ok"!=i.data.status)throw new Error("Couldn't launch async command ".concat(e));i.data.result.is_done&&t(i),s.running[i.data.result.id]={cb:t,eb:a},s.loaded()}).catch(function(e){a(e),s.loaderror(e)})},onCommandChanged:function(e){this.running.hasOwnProperty(e)&&this.fetchResult(e)},fetchResult:function(e){var t=this;o.a.get(o.a.defaults.baseURL+"/command/".concat(e)).then(function(a){if(a.data&&a.data.result&&a.data.result.is_done)try{a.data.result.failed?t.running[e]["eb"](a):t.running[e]["cb"](a)}finally{delete t.running[e]}}).catch(function(e){console.log(e)})},extractAsyncError:function(e){if(e.data&&e.data.result&&e.data.result.failed)return e.data.result.results[0];console.log("Can't extract async error, it's not an error"),console.log(e)}}},f=v,p=a("0c7c"),h=Object(p["a"])(f,d,_,!1,null,null,null),b=h.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e.versions.length||e.error?a("div",[e.error?a("div",{staticClass:"ui tiny negative message"},[a("div",{staticClass:"header"},[e._v("Encountered an error:")]),a("p",[e._v(e._s(e.error))])]):e._e(),a("table",{staticClass:"ui compact versions table"},[a("thead",[a("tr",[a("th",[e._v("Version")]),a("th",[e._v("Release date")]),a("th",[e._v("Type")]),a("th",[e._v("Requires")]),e.readonly?e._e():a("th",[e._v("Action")])])]),a("tbody",e._l(e.versions,function(t){return a("tr",{class:[e.getVersionClass(t)]},[a("td",[e._v(e._s(t.build_version))]),a("td",[e._v(e._s(e.moment(t.release_date).format("MMMM Do YYYY, h:mm:ss a")))]),a("td",[a("i",{class:["ui ","full"==t.type?"blue bookmark":"orange exchange alternate","icon"]}),e._v(e._s(t.type))]),a("td",[e._v(e._s(t.require_version||"-"))]),e.readonly?e._e():a("td",[a("div",{staticClass:"ui tiny compact menu"},[a("a",{staticClass:"item",on:{click:function(a){return e.info(t)}}},[a("div",{class:["hide info loader",e.cssName(t.build_version)]},[e._m(0,!0)]),e._m(1,!0)]),e.installing&&e.installing==t.build_version?a("a",{staticClass:"disabled item"},[a("i",[e._v("Installing")])]):e.installing?e._e():a("a",{staticClass:"item",on:{click:function(a){return e.install(t)}}},[a("div",{class:["hide install loader",e.cssName(t.build_version)]},[e._m(2,!0)]),e._m(3,!0)])])])])}),0)])]):a("div",[a("br"),a("br"),e._m(4)]),a("div",{class:["ui basic version modal",e.cssName(e.name)]},[a("standalone-release-info",{attrs:{selected_version:e.selected_version}})],1),a("div",{class:["ui basic install modal",e.cssName(e.name)]},[e._m(5),e.selected_version?a("div",{staticClass:"content"},[a("p",[e._v("Current installed version is "),a("b",[e._v(e._s(e.backend.version||"... no version found"))])]),a("p",[e._v("Are you sure you want to install data release "),a("b",[e._v(e._s(e.selected_version.build_version||"???"))]),e._v(" ?\n                    "),e.install_path.length?e._e():a("span",["incremental"==e.selected_version.type?a("span",[a("br"),e._v("It is compatible with current version and can directly be installed on top it.\n                        ")]):a("span",[a("br"),e._v("This release will replace existing data.\n                        ")])]),e.install_path.length?a("span",[a("br"),e._v("In order to install this data release, the following releases will first be installed:\n                    "),a("div",{staticClass:"ui ordered inverted list"},e._l(e.install_path,function(t,s){return a("div",{staticClass:"item"},[e._v("Release: "),a("b",[e._v(e._s(t))])])}),0)]):e._e()])]):e._e(),e._m(6)])])},C=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui small loader"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"info circle icon"}),e._v("\n                              Info\n                          ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui small loader"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"download icon"}),e._v("\n                              Install\n                          ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui text loader"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h2",{staticClass:"ui icon"},[a("i",{staticClass:"info circle icon"}),e._v("\n                Data release installation\n            ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                    No\n                ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                    Yes\n                ")])])}],y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e.selected_version&&e.selected_version.info?a("span",[e._m(0),a("div",{staticClass:"ui horizontal list"},[a("div",{staticClass:"item"},[a("i",{staticClass:"thumbtack icon"}),a("div",{staticClass:"top aligned content"},[a("div",{staticClass:"header"},[e._v("Version")]),e._v("\n                        "+e._s(e.selected_version.info.build_version)+"\n                    ")])]),a("div",{staticClass:"item"},[a("i",{staticClass:"calendar alternate outline icon"}),a("div",{staticClass:"top aligned content"},[a("div",{staticClass:"header"},[e._v("Date")]),e._v("\n                        "+e._s(e.moment(e.selected_version.info.release_date).format("MMMM Do YYYY, h:mm:ss a"))+"\n                    ")])]),a("div",{staticClass:"item"},[a("i",{staticClass:"calendar alternate outline icon"}),a("div",{staticClass:"top aligned content"},[a("div",{staticClass:"header"},[e._v("Type")]),a("i",{class:["ui ","full"==e.selected_version.info.type?"blue bookmark":"orange exchange alternate","icon"]}),e._v("\n                            "+e._s(e.selected_version.info.type)+"\n                        "),"incremental"==e.selected_version.info.type?a("div",[e._v("\n                            "+e._s(e.selected_version.info.require_version)+" "),a("i",{staticClass:"long arrow alternate right icon"}),e._v(" "+e._s(e.selected_version.info.target_version)+"\n                        ")]):e._e()])]),e.selected_version.info.app_version||e.selected_version.info.biothings_version||e.selected_version.info.standalone_version?a("div",{staticClass:"item"},[a("i",{staticClass:"github icon"}),a("div",{staticClass:"top aligned content"},[a("div",{staticClass:"header"},[e._v("Required app. versions")]),a("div",{staticClass:"ui list nopad"},[e.selected_version.info.app_version?a("div",{staticClass:"tinytiny item"},[e._v("\n                                App. version:\n                                    "),e.selected_version.info.app_version.branch?a("span",[e._v("\n                                        "+e._s(e.selected_version.info.app_version.branch)+" ["+e._s(e.selected_version.info.app_version.commit)+"]\n                                    ")]):a("span",[e._v("\n                                        "+e._s(e.selected_version.info.app_version)+"\n                                    ")])]):e._e(),e.selected_version.info.biothings_version?a("div",{staticClass:"tinytiny item"},[e._v("\n                                Biothings:\n                                    "),e.selected_version.info.biothings_version.branch?a("span",[e._v("\n                                        "+e._s(e.selected_version.info.biothings_version.branch)+" ["+e._s(e.selected_version.info.biothings_version.commit)+"]\n                                    ")]):a("span",[e._v("\n                                        "+e._s(e.selected_version.info.biothings_version)+"\n                                    ")])]):e._e(),e.selected_version.info.standalone_version?a("div",{staticClass:"tinytiny item"},[e._v("\n                                Standalone:\n                                    "),e.selected_version.info.standalone_version.branch?a("span",[e._v("\n                                        "+e._s(e.selected_version.info.standalone_version.branch)+" ["+e._s(e.selected_version.info.standalone_version.commit)+"]\n                                    ")]):a("span",[e._v("\n                                        "+e._s(e.selected_version.info.standalone_version)+"\n                                    ")])]):e._e()])])]):e._e()]),e._m(1),e.selected_version.release_note&&e.selected_version.release_note.txt?a("div",{staticClass:"content"},[a("div",{staticClass:"ui form"},[a("div",{staticClass:"ui grid"},[a("div",{staticClass:"sixteen wide column"},[a("div",{staticClass:"content"},[a("pre",{staticClass:"relnotecontent"},[e._v(e._s(e.selected_version.release_note.txt))])])])])])]):a("div",{staticClass:"content"},[e._v("No release note found")]),a("br"),e._m(2)]):a("span",[e.info_error?a("div",{staticClass:"ui error message"},[e._v("\n                "+e._s(e.info_error)+"\n            ")]):e._e()])])},w=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h2",{staticClass:"ui icon"},[a("i",{staticClass:"info circle icon"}),e._v("\n                Information about this release\n            ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h5",{staticClass:"ui icon"},[a("i",{staticClass:"bullhorn icon"}),e._v("\n                Release note\n            ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui basic green ok inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                    Close\n                ")])])}],E={name:"standalone-release-info",props:["selected_version"],mixins:[],mounted:function(){},updated:function(){},created:function(){},beforeDestroy:function(){},watch:{},data:function(){return{info_error:null}},computed:{},components:{},methods:{}},k=E,O=(a("9e76"),Object(p["a"])(k,y,w,!1,null,"24969708",null)),x=O.exports,D={name:"standalone-release-versions",props:["name","backend"],mixins:[b,r["a"],c["a"]],mounted:function(){this.refreshVersions()},updated:function(){},created:function(){m["a"].$on("refresh_standalone",this.onRefresh)},beforeDestroy:function(){m["a"].$off("refresh_standalone",this.onRefresh),$(".ui.basic.modal").remove()},watch:{},data:function(){return{error:null,versions:[],selected_version:null,info_error:null,installing:null,install_path:[]}},computed:{},components:{StandaloneReleaseInfo:x},methods:{cssName:function(e){return e.replace(".","_")},onRefresh:function(e){e==this.name&&(this.versions=[],this.refreshVersions())},getVersionClass:function(e){return this.backend.version==e.target_version?"current":this.backend.version>e.target_version?"old":"notcurrent"},refreshVersions:function(){var e=this;e.error=null;var t=function(){return e.loading(),o.a.get(o.a.defaults.baseURL+"/standalone/".concat(e.name,"/versions"))},a=function(t){e.versions=t.data.result.results[0].reverse()},s=function(t){console.log("error getting versions"),console.log(t),e.loaderror(t),e.error="Can't load versions: "+e.extractAsyncError(t)};this.launchAsyncCommand(t,a,s)},infoLoader:function(e,t){var a=this.cssName(e.build_version);t?$(".loader.info.".concat(a)).show():$(".loader.info.".concat(a)).hide()},installLoader:function(e,t){var a=this.cssName(e.build_version);t?$(".loader.install.".concat(a)).show():$(".loader.install.".concat(a)).hide()},info:function(e){var t=this;t.selected_version=null,t.error=null;var a=function(){return t.infoLoader(e,!0),t.loading(),o.a.get(o.a.defaults.baseURL+"/standalone/".concat(t.name,"/info?version=").concat(e.build_version))},s=function(a){t.infoLoader(e,!1),t.selected_version=a.data.result.results[0],$(".ui.basic.version.modal.".concat(t.cssName(t.name))).modal("setting",{detachable:!1,closable:!1}).modal("show")},i=function(a){t.infoLoader(e,!1),t.loaderror(a),t.error=t.extractAsyncError(a)};this.launchAsyncCommand(a,s,i)},adjustInstallPath:function(e){var t=e.indexOf(this.selected_version.build_version);return t>-1&&e.splice(t,1),e},install:function(e){var t=this;t.selected_version=e,t.install_path=[],t.error=null;var a=function(){var a={version:e.build_version,force:1};return o.a.post(o.a.defaults.baseURL+"/standalone/".concat(t.name,"/install"),a)},s=function(a){t.installing=null,t.installLoader(e,!0)},i=function(e){t.installing=null,t.error="Installation error: "+t.extractAsyncError(e)};t.launchAsyncCommand(function(){return t.installLoader(e,!0),o.a.post(o.a.defaults.baseURL+"/standalone/".concat(t.name,"/install"),{version:e.build_version,dry:!0})},function(n){t.installLoader(e,!1);var o=n.data.result.results[0];o&&(t.install_path=t.adjustInstallPath(n.data.result.results[0])),$(".ui.basic.install.modal.".concat(t.cssName(t.name))).modal("setting",{onApprove:function(){t.installing=e.build_version,t.launchAsyncCommand(a,s,i)}}).modal("show")},function(a){t.installLoader(e,!1),t.error=t.extractAsyncError(a)})}}},j=D,P=(a("ac32"),Object(p["a"])(j,g,C,!1,null,"0af6b2ec",null)),M=P.exports,A={name:"standalone-release",props:["name","url"],mixins:[b,r["a"],c["a"]],mounted:function(){this.refresh()},updated:function(){},created:function(){},beforeDestroy:function(){},watch:{},data:function(){return{backend:{},backend_error:null}},computed:{encoded_name:function(){return btoa(this.name).replace(/=/g,"_")}},components:{StandaloneReleaseVersions:M},methods:{refresh:function(){this.refreshBackend(),m["a"].$emit("refresh_standalone",this.name)},refreshBackend:function(){var e=this;e.backend_error=null;var t=function(){return e.loading(),o.a.get(o.a.defaults.baseURL+"/standalone/".concat(e.name,"/backend"))},a=function(t){e.backend=t.data.result.results[0]},s=function(t){console.log(t),e.loaderror(t),e.backend_error=e.extractAsyncError(t)};this.launchAsyncCommand(t,a,s)},resetBackend:function(){var e=this;e.backend_error=null;var t=function(){return e.loading(),o.a.delete(o.a.defaults.baseURL+"/standalone/".concat(e.name,"/backend"))},a=function(t){e.refreshBackend()},s=function(t){console.log(t),e.loaderror(t),e.backend_error=e.extractAsyncError(t)};this.launchAsyncCommand(t,a,s)},reset:function(){var e=this;$(".ui.basic.reset.modal.".concat(this.encoded_name)).modal("setting",{onApprove:function(){e.resetBackend()}}).modal("show")}}},R=A,S=(a("c951"),Object(p["a"])(R,l,u,!1,null,"b531008c",null)),L=S.exports,U=a("9068"),I={name:"standalone-releases",mixins:[r["a"],c["a"]],mounted:function(){$("select.dropdown").dropdown(),this.refresh(),$(".menu .standalone .item").tab()},updated:function(){},created:function(){},beforeDestroy:function(){this.version_urls=[],$(".ui.wizard.modal").remove()},watch:{},data:function(){return{version_urls:[]}},computed:{},components:{StandaloneRelease:L,StandaloneWizard:U["a"]},methods:{refresh:function(){var e=this;this.version_urls=[],this.loading(),o.a.get(o.a.defaults.baseURL+"/standalone/list").then(function(t){e.version_urls=t.data.result,e.loaded(),e.version_urls.length||e.wizard()}).catch(function(t){console.log("Error getting list of biothings version_urls: "+t),e.loaderror(t)})},changeTab:function(e){$(".ui.standalone.menu").find(".item").tab("change tab",e)},wizard:function(){$(".ui.wizard.modal").modal("setting",{detachable:!1,closable:!1,onApprove:function(){return!0}}).modal("show")}}},T=I,B=(a("9d74"),Object(p["a"])(T,s,i,!1,null,"5082ec91",null));t["a"]=B.exports},6466:function(e,t,a){"use strict";var s=a("f130"),i=a.n(s);i.a},"648d":function(e,t,a){"use strict";var s=a("3c84"),i=a.n(s);i.a},"662a":function(e,t,a){"use strict";var s=a("f9ef"),i=a.n(s);i.a},"669c":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui center aligned tiny"},[a("button",{staticClass:"ui compact labeled icon commands button tiny"},[a("i",{staticClass:"settings icon"}),e._v("\n      "+e._s(e.num_commands)+"\n  ")]),a("div",{staticClass:"ui commands popup top left transition hidden"},[a("commands-list")],1),a("button",{staticClass:"ui compact labeled icon processes button tiny"},[a("i",{staticClass:"rocket icon"}),e._v("\n      "+e._s(e.job_manager.queue?e.job_manager.queue.process.running.length:"?")+"/"+e._s(e.job_manager.queue?e.job_manager.queue.process.max:"?")+"\n  ")]),a("div",{staticClass:"ui processes popup top left transition hidden"},[a("processes-list",{attrs:{processes:e.processes}})],1),a("button",{staticClass:"ui compact labeled icon threads button tiny"},[a("i",{staticClass:"lightning icon"}),e._v("\n    "+e._s(e.job_manager.queue?e.job_manager.queue.thread.running.length:"?")+"/"+e._s(e.job_manager.queue?e.job_manager.queue.thread.max:"?")+"\n  ")]),a("div",{staticClass:"ui threads popup top left transition hidden"},[a("threads-list",{attrs:{threads:e.threads}})],1),e.job_manager.queue?a("div",{staticClass:"ui small grey label",attrs:{"data-tooltip":"Number of queued jobs","data-position":"bottom center"}},[a("i",{staticClass:"hourglass start icon"}),e._v("\n    "+e._s(e.job_manager.queue.thread.pending.length+e.job_manager.queue.process.pending.length)+"\n  ")]):e._e(),e.job_manager.queue?a("div",{staticClass:"ui small grey label",attrs:{"data-tooltip":"Amount of memory hub is currently using","data-position":"bottom center"}},[a("i",{staticClass:"right microchip icon"}),e._v("\n    "+e._s(e._f("pretty_size")(e.job_manager.memory))+"\n  ")]):e._e()])},i=[],n=a("bc3a"),o=a.n(n),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"ui right floated header"},[a("div",{staticClass:"ui toggle checkbox"},[a("label",[e._v("Show all")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.allcmds,expression:"allcmds"}],staticClass:"hidden",attrs:{type:"checkbox",tabindex:"0"},domProps:{checked:Array.isArray(e.allcmds)?e._i(e.allcmds,null)>-1:e.allcmds},on:{change:function(t){var a=e.allcmds,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=null,o=e._i(a,n);s.checked?o<0&&(e.allcmds=a.concat([n])):o>-1&&(e.allcmds=a.slice(0,o).concat(a.slice(o+1)))}else e.allcmds=i}}})])]),Object.keys(e.commands).length?a("table",{staticClass:"ui compact celled table"},e._l(e.orderedCommands,function(t){return a("tr",{class:[t.is_done&t.failed?"negative":"",t.is_done&!t.failed?"positive":"","nowrap"]},[a("td",[t.is_done?a("i",{class:[t.is_done&t.failed?"attention icon":"",t.is_done&!t.failed?"icon checkmark":""]}):a("i",{staticClass:"notched circle loading icon"})]),a("td",{staticClass:"right aligned"},[e._v(e._s(t.id))]),a("td",[e._v(e._s(e._f("truncate")(t.cmd,60)))]),t.is_done?a("td",[e._v(e._s(t.duration))]):a("td",[e._v(e._s(e._f("moment")(new Date(0).setUTCSeconds(t.started_at),"from","now")))])])}),0):a("div",[e._v("No command to show")])])},c=[],l=(a("456d"),a("ac6a"),a("8615"),a("f5ef")),u={name:"commands-list",props:[],mounted:function(){console.log("CommandsList mounted"),$(".commands.button").popup({popup:$(".commands.popup"),on:"click"}),$(".ui.toggle.checkbox").checkbox(),this.refreshCommands()},created:function(){l["a"].$on("change_command",this.onCommandChanged)},beforeDestroy:function(){l["a"].$off("change_command",this.onCommandChanged),$(".ui.basic.unregister.modal").remove()},ready:function(){console.log("command item ready")},data:function(){return{allcmds:!1,commands:{}}},computed:{orderedCommands:function(){return _.orderBy(Object.values(this.commands),"id",-1)}},watch:{allcmds:"showAllToggled"},methods:{showAllToggled:function(){this.refreshCommands()},onCommandChanged:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.refreshCommands()},refreshCommands:function(){var e=this,t=o.a.defaults.baseURL+"/commands";this.allcmds||(t+="?running=1"),o.a.get(t).then(function(t){e.commands=t.data.result,l["a"].$emit("num_commands",Object.keys(e.commands).length)}).catch(function(e){console.log("Error getting runnings commands: "+e)})}}},d=u,m=(a("1bf6"),a("0c7c")),v=Object(m["a"])(d,r,c,!1,null,null,null),f=v.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.processes.all?a("div",[a("div",{staticClass:"ui three columns centered grid"},[a("div",{staticClass:"three wide column"},[e.processes.running?a("div",{staticClass:"ui tiny label"},[e._v("\n                Running"),a("div",{staticClass:"detail"},[e._v(e._s(e.processes.running.length))])]):e._e()]),a("div",{staticClass:"three wide column"},[e.processes.pending?a("div",{staticClass:"ui tiny label"},[e._v("\n                Pending"),a("div",{staticClass:"detail"},[e._v(e._s(e.processes.pending.length))])]):e._e()]),a("div",{staticClass:"three wide column"},[a("div",{staticClass:"ui tiny label"},[e._v("\n                Max"),e.processes?a("div",{staticClass:"detail"},[e._v(e._s(e.processes.max))]):e._e()])])]),Object.keys(e.processes.all).length?a("table",{staticClass:"ui nowrap compact celled table"},e._l(e.processes.all,function(t,s){return a("tr",{class:["running"==t.cpu.status?"positive":"","nowrap"]},[a("td",[a("div",{attrs:{"data-tooltip":t.cpu.status}},["running"==t.cpu.status?a("i",{staticClass:"ui notched circle loading icon"}):"sleeping"==t.cpu.status?a("i",{staticClass:"ui hotel icon"}):a("i",{staticClass:"ui wait icon"})])]),a("td",{staticClass:"right aligned"},[e._v(e._s(s))]),t.job?a("td",[e._v(e._s(t.job.category))]):e._e(),t.job?a("td",[e._v(e._s(t.job.step))]):e._e(),t.job?a("td",[e._v(e._s(t.job.source))]):e._e(),t.job?a("td",[e._v(e._s(t.job.duration))]):a("td",{staticClass:"center aligned",attrs:{colspan:"4"}},[a("i",[e._v("ready")])]),a("td",{staticClass:"right aligned"},[e._v(e._s(e._f("pretty_size")(t.memory.size)))])])}),0):a("div",[e._v("No process to show")])]):e._e()},h=[],b={name:"processes-list",props:["processes"],methods:{},mounted:function(){console.log("ProcessesList mounted"),$(".ui.toggle.checkbox").checkbox()},ready:function(){console.log("process item ready")},watch:{}},g=b,C=Object(m["a"])(g,p,h,!1,null,null,null),y=C.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"ui grid"},[a("div",{staticClass:"four wide column"},[e.threads.running?a("div",{staticClass:"ui tiny label"},[e._v("\n                Running"),a("div",{staticClass:"detail"},[e._v(e._s(e.threads.running.length))])]):e._e()]),a("div",{staticClass:"four wide column"},[e.threads.pending?a("div",{staticClass:"ui tiny label"},[e._v("\n                Pending"),a("div",{staticClass:"detail"},[e._v(e._s(e.threads.pending.length))])]):e._e()]),a("div",{staticClass:"four wide column"},[e.threads.all?a("div",{staticClass:"ui tiny label"},[e._v("\n                Ready"),a("div",{staticClass:"detail"},[e._v(e._s(Object.keys(e.threads.all).length))])]):e._e()]),a("div",{staticClass:"four wide column"},[a("div",{staticClass:"ui tiny label"},[e._v("\n                Max"),a("div",{staticClass:"detail"},[e._v(e._s(e.threads.max))])])])]),e.threads.running?a("table",{staticClass:"ui compact celled table"},e._l(e.threads.all,function(t,s){return a("tr",{class:[t.job?"positive":"","nowrap"]},[a("td",{staticClass:"nowrap"},[a("div",[t.job?a("i",{staticClass:"ui notched circle loading icon"}):a("i",{staticClass:"ui hotel icon"})])]),a("td",{staticClass:"right aligned"},[e._v(e._s(s))]),t.job?a("td",{staticClass:"nowrap"},[e._v(e._s(t.job.category))]):e._e(),t.job?a("td",{staticClass:"nowrap"},[e._v(e._s(t.job.step))]):e._e(),t.job?a("td",{staticClass:"nowrap"},[e._v(e._s(t.job.source))]):e._e(),t.job?a("td",{staticClass:"nowrap"},[e._v(e._s(t.job.duration))]):a("td",{staticClass:"nowrap center aligned",attrs:{colspan:"4"}})])}),0):a("div",[e._v("No thread to show")])])},E=[],k={name:"threads-list",props:["threads"],methods:{},mounted:function(){console.log("ThreadsList mounted"),$(".ui.toggle.checkbox").checkbox()},ready:function(){console.log("thread item ready")},watch:{}},O=k,x=Object(m["a"])(O,w,E,!1,null,null,null),D=x.exports,j=3e3,P={name:"job-summary",mounted:function(){var e=this;console.log("JobSummary mounted"),this.getJobSummary(),$(".processes.button").popup({popup:$(".processes.popup"),on:"click",lastResort:"bottom right",onVisible:function(){e.onJobsOpened(!0)},onHide:function(){e.onJobsOpened(!1)}}),$(".threads.button").popup({popup:$(".threads.popup"),on:"click",lastResort:"bottom right",onVisible:function(){e.onJobsOpened(!0)},onHide:function(){e.onJobsOpened(!1)}})},created:function(){l["a"].$on("num_commands",this.updateNumCommands)},beforeDestroy:function(){l["a"].$off("num_commands",this.updateNumCommands)},data:function(){return{num_commands:0,job_manager:{},processes:{},threads:{},show_allcmds:!1,jobs_interval:null}},watch:{num_commands:function(e,t){0==e&&(console.log("Stop polling jobs"),this.stopPollJobs()),0==t&&e>0&&(console.log("Start polling jobs"),this.startPollJobs())}},components:{CommandsList:f,ProcessesList:y,ThreadsList:D},methods:{updateNumCommands:function(e){this.num_commands=e,this.getJobSummary()},startPollJobs:function(){null==this.jobs_interval&&(this.jobs_interval=setInterval(this.getJobSummary,j))},stopPollJobs:function(){clearInterval(this.jobs_interval),this.jobs_interval=null},getJobSummary:function(){var e=this;o.a.get(o.a.defaults.baseURL+"/job_manager").then(function(t){e.job_manager=t.data.result,e.processes=e.job_manager.queue.process,e.threads=e.job_manager.queue.thread}).catch(function(e){console.log("Error getting job manager information: "+e)})},onJobsOpened:function(e){console.log(e),e?(this.getJobSummary(),this.startPollJobs()):0==this.num_commands&&this.stopPollJobs()}}},M=P,A=Object(m["a"])(M,s,i,!1,null,null,null);t["a"]=A.exports},"68b8":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui fluid container"},[e.source?a("div",{staticClass:"ui centered fluid card",attrs:{id:"data-source"}},[a("div",{staticClass:"content"},[e.source.name?a("div",{staticClass:"left aligned header"},[e._v(e._s(e.source.name))]):e._e(),a("div",{staticClass:"meta"},[e.source.download&&e.source.download.started_at?a("span",{staticClass:"right floated time"},[e._v("Updated "+e._s(e._f("moment")(e.source.download.started_at,"from","now")))]):a("span",{staticClass:"right floated time"},[e._v("Never updated")]),a("span",{staticClass:"left floated category"},[e._v(e._s(e.release))])]),a("div",{staticClass:"left aligned description"},[a("p"),a("div",{staticClass:"ui clearing divider"}),a("div",{staticClass:"left floated"},[a("i",{staticClass:"file outline icon"}),e._v("\n                        "+e._s(e._f("currency")(e.source.count,"",0))+" document"+e._s(e.source.count>1?"s":"")+"\n                    ")]),a("div",{staticClass:"right floated"},[null!==e.license&&"object"===typeof e.license?a("span",[a("table",{staticClass:"meta ui single line compact small table"},[a("thead",[a("tr",e._l(e.license,function(t,s){return a("th",[e._v(e._s(s))])}),0)]),a("tbody",[a("tr",e._l(e.license,function(t){return a("td",[t.startsWith("http")?a("a",{attrs:{href:t}},[e._v("license")]):a("span",[e._v(e._s(e.license))])])}),0),a("tr",e._l(e.website,function(t){return a("td",[a("a",{attrs:{href:t}},[e._v("website")])])}),0)])])]):a("span",[a("table",{staticClass:"meta ui single line compact small table"},[a("tbody",[a("tr",[a("td",[e.license_url?a("a",{attrs:{href:e.license_url}},[e.license?a("span",[e._v(e._s(e.license))]):a("span",[e._v("license")])]):a("span",[e._v(e._s(e.license))])]),a("td",[e.website?a("a",{attrs:{href:e.website}},[e._v("website")]):e._e()])])])])])]),a("br"),a("p"),a("p"),a("div",{staticClass:"ui top attached pointing menu"},[e.source.download?a("a",{staticClass:"red item active",attrs:{"data-tab":"dump"}},[e._v("Dumper")]):e._e(),e.source.upload?a("a",{class:["red item",void 0==e.source.download?"active":""],attrs:{"data-tab":"upload"}},[e._v("Uploader")]):e._e(),e.source.data_plugin?a("a",{staticClass:"red item",attrs:{"data-tab":"plugin"}},[e._v("Plugin")]):e._e(),a("a",{staticClass:"red item",attrs:{"data-tab":"mapping"}},[e._v("Mapping")])]),e.source.download?a("div",{staticClass:"ui bottom attached tab segment active",attrs:{"data-tab":"dump"}},[a("data-source-dump",{attrs:{source:e.source}})],1):e._e(),e.source.upload?a("div",{class:["ui bottom attached tab segment",void 0==e.source.download?"active":""],attrs:{"data-tab":"upload"}},[a("data-source-upload",{attrs:{source:e.source}})],1):e._e(),e.source.data_plugin?a("div",{staticClass:"ui bottom attached tab segment",attrs:{"data-tab":"plugin"}},[a("data-source-plugin",{attrs:{source:e.source}})],1):e._e(),a("div",{staticClass:"ui bottom attached tab segment",attrs:{"data-tab":"mapping"}},[a("data-source-mapping",{attrs:{maps:e.maps,_id:e._id,source:e.source}})],1),a("p")])]),a("inspect-form",{class:e.actionable,attrs:{toinspect:e.source,select_data_provider:!0}}),e.source.data_plugin?a("div",{staticClass:"ui basic unregister modal",class:e.actionable},[a("input",{staticClass:"plugin_url",attrs:{type:"hidden"},domProps:{value:e.source.data_plugin.plugin.url}}),e._m(0),a("div",{staticClass:"content"},[a("p",[e._v("Are you sure you want to unregister and delete data plugin "),a("b",[e._v(e._s(e.source.name))]),e._v(" ?")])]),e._m(1)]):e._e(),a("diff-modal")],1):e._e()])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"remove icon"}),e._v("\n                Unregister data plugin\n            ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                    No\n                ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                    Yes\n                ")])])}],n=(a("ac6a"),a("456d"),a("bc3a")),o=a.n(n),r=a("f5ef"),c=a("de0c"),l=a("dc15"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui two grid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"ten wide column"},[a("table",{staticClass:"ui small very compact definition collapsing table"},[a("tbody",[a("tr",[a("td",[e._v("Release")]),a("td",[e._v("\n                            "+e._s(e.source.download.release)+"\n                        ")])]),a("tr",[a("td",[e._v("Status")]),a("td",[a("i",{class:"failed"==e.source.download.status?"red":"green"},[e._v(e._s(e.source.download.status))])])]),a("tr",[a("td",[e._v("\n                            Data folder\n                        ")]),a("td",[e.source.download.data_folder?a("a",{attrs:{href:e._f("replace")(e.source.download.data_folder,"/data/biothings_studio","")}},[e._v(e._s(e.source.download.data_folder))]):e._e()])]),e.source.download.error?a("tr",[a("td",[e._v("Error")]),a("td",[a("div",{staticClass:"red"},[e._v(e._s(e.source.download.error))])])]):e._e(),a("tr",[a("td",[e._v("Last download")]),a("td",[e._v(e._s(e.source.download.started_at)+" "),e.source.download.started_at?a("i",[e._v("("+e._s(e._f("moment")(e.source.download.started_at,"from","now"))+")")]):e._e()])]),a("tr",[a("td",[e._v("Duration")]),a("td",[e._v(e._s(e.source.download.time))])]),a("tr",[a("td",{staticClass:"ui grey"},[e._v("Dumper")]),a("td",[e._v("\n                            "+e._s(e.source.download.dumper.name)+"\n                            "),e.source.download.dumper.manual?a("span",[e._v("(manual)")]):e._e()])])])])]),a("div",{staticClass:"six wide column"},[a("div",{class:["ui dump form",e.source._id,e.actionable]},[a("div",{staticClass:"fields"},[e._m(0),a("div",{staticClass:"required six wide field"},[a("button",{class:["ui labeled small icon button","downloading"==e.$parent.download_status?"disabled":""],on:{click:function(t){return e.do_dump()}}},[a("i",{staticClass:"download cloud icon"}),e._v("\n                            Dump\n                        ")])])])])])])])},d=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ten wide field"},[a("div",{staticClass:"ui checkbox"},[a("input",{staticClass:"hidden",attrs:{type:"checkbox",tabindex:"0",id:"force"}}),a("label",[e._v("Bypass check for new release availability, and force dump")])])])}],_=a("bf2a"),m={name:"data-source-dump",props:["source"],mounted:function(){$(".ui.checkbox").checkbox()},mixins:[_["a"]],components:{},methods:{do_dump:function(){var e=$(".ui.dump.form.".concat(this.source._id)).form("get field","force"),t=null;return e&&(t=e.is(":checked")),console.log(t),this.$parent.dump(null,t)}}},v=m,f=a("0c7c"),p=Object(f["a"])(v,u,d,!1,null,null,null),h=p.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e.source.upload&&e.source.upload.sources?a("span",[Object.keys(e.source.upload.sources).length>1?a("span",[a("div",{staticClass:"ui top attached tabular menu",attrs:{id:"srcs"}},e._l(e.source.upload.sources,function(t,s,i){return a("a",{class:["green item",0===i?"active":""],attrs:{"data-tab":"upload_"+s}},[e._v("\n                    "+e._s(s)+"\n                    "),null===e.source.upload.sources[s]["uploader"]?a("button",{staticClass:"reset ui button",attrs:{"data-tooltip":"Datasource broken, click to remove"},on:{click:function(t){return e.reset(s)}}},[a("i",{staticClass:"close icon"})]):e._e()])}),0)]):e._e(),e._l(e.source.upload.sources,function(t,s,i){return a("div",{class:["ui bottom attached tab segment",0===i?"active":""],attrs:{"data-tab":"upload_"+s}},[a("div",{staticClass:"ui two grid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"ten wide column"},[a("table",{staticClass:"ui small very compact definition collapsing table"},[a("tbody",[a("tr",[a("td",[e._v("Release")]),a("td",[e._v("\n                                        "+e._s(t.release)+"\n                                    ")])]),a("tr",[a("td",[e._v("\n                                        Data folder\n                                    ")]),a("td",[t.data_folder?a("a",{attrs:{href:e._f("replace")(t.data_folder,"/data/biothings_studio","")}},[e._v(e._s(t.data_folder))]):e._e()])]),a("tr",[a("td",[e._v("Status")]),a("td",[a("i",{class:"failed"==t.status?"red":"green"},[e._v(e._s(t.status))])])]),t.error?a("tr",[a("td",[e._v("Error")]),a("td",[a("div",{staticClass:"red"},[e._v(e._s(t.error))])])]):e._e(),a("tr",[a("td",[e._v("Last upload")]),a("td",[e._v(e._s(t.started_at)+" "),t.started_at?a("i",[e._v("("+e._s(e._f("moment")(t.started_at,"from","now"))+")")]):e._e()])]),a("tr",[a("td",[e._v("Duration")]),a("td",[e._v(e._s(t.time))])]),a("tr",[a("td",[e._v("Documents uploaded")]),a("td",[e._v(e._s(e._f("currency")(t.count,"",0)))])]),a("tr",[a("td",{staticClass:"ui grey"},[e._v("Uploader")]),t.uploader?a("td",[e._v("\n                                        "+e._s(t.uploader.name)+"\n                                        "),t.uploader.dummy?a("span",[e._v("(dummy)")]):e._e()]):a("td",[a("div",{staticClass:"red"},[e._v("No uploader found, datasource may be broken")])])])])])]),t.uploader?a("div",{staticClass:"six wide column"},[t.uploader.dummy?a("p",[e._v("This is a "),a("i",[e._v("dummy")]),e._v(" uploader, meaning data isn't actually uploaded but rather already stored in a collection.\n                            In order to register data, a "),a("b",[e._v("release")]),e._v(" is required in order the uploader to run properly.")]):e._e(),a("div",{class:["ui upload form",e.actionable,s]},[a("div",{staticClass:"fields"},[a("div",{staticClass:"required ten wide field"},[t.uploader.dummy?a("input",{attrs:{type:"text",id:"release",placeholder:"Specify a release (optional)",autofocus:""}}):e._e()]),a("div",{staticClass:"required six wide field"},[a("button",{class:["ui labeled small icon button","uploading"==t.status?"disabled":""],on:{click:function(t){return e.do_upload(s)}}},[a("i",{staticClass:"database icon"}),e._v("\n                                        Upload\n                                    ")])])])])]):e._e()])])])})],2):a("div",[e._v("\n        No uploader found for this source.\n    ")])])},g=[],C=a("3361"),y={name:"data-source-upload",props:["source"],mixins:[C["a"],_["a"]],mounted:function(){this.setup()},components:{},watch:{},methods:{setup:function(){$(".menu .item").tab()},do_upload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.$parent.upload(e=e)},reset:function(e){var t=this;t.loading();var a={name:t.source._id,key:"upload",subkey:e};o.a.post(o.a.defaults.baseURL+"/source/".concat(t.source._id,"/reset"),a).then(function(e){t.loaded()}).catch(function(e){t.loaderror(e)})}}},w=y,E=(a("d632"),Object(f["a"])(w,b,g,!1,null,"706a5e73",null)),k=E.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e.maps?a("span",[Object.keys(e.maps).length>1?a("span",[a("p",[e._v("Found sub-sources linked to main source "),a("b",[e._v(e._s(e._id))]),e._v(", select one to see inspection data")]),a("div",{staticClass:"ui top attached tabular menu",attrs:{id:"maps"}},e._l(e.maps,function(t,s,i){return a("a",{class:["green item",0===i?"active":""],attrs:{"data-tab":s}},[e._v(e._s(s))])}),0)]):e._e(),e._l(e.maps,function(t,s,i){return e.maps?a("div",{class:["ui bottom attached tab segment",0===i?"active":""],attrs:{"data-tab":s}},[a("p",[e._v("These are the results for the different inspection mode found for source "),a("b",[e._v(e._s(s))])]),a("table",{staticClass:"ui celled table"},[a("thead",[a("tr",{staticClass:"ui center aligned"},[e._m(0,!0),a("th",{staticClass:"eight wide top aligned"},[e._v("\n                        Mode "),a("i",[e._v("mapping")]),a("div",[e.maps[s]["mapping"]?a("button",{staticClass:"ui labeled mini icon button",on:{click:function(t){return e.saveMapping(s)}}},[a("i",{staticClass:"save icon"}),e._v("\n                            Save\n                        ")]):e._e()])])])]),a("tbody",[a("tr",{staticClass:"top aligned"},[a("td",[e.maps[s]?a("type-map",{attrs:{map:e.maps[s]["inspect_type"],map_id:"tab_inspect_type"}}):e._e()],1),a("td",[e.maps[s]["inspect_mapping"]?a("mapping-map",{attrs:{map:e.maps[s]["inspect_mapping"],name:s,map_id:"tab_inspect_mapping"}}):e._e()],1)])])])]):e._e()})],2):a("div",[e._v("\n    No inspection data found for this source\n")])])},x=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",{staticClass:"eight wide top aligned"},[e._v("Mode "),a("i",[e._v("type")])])}],D=(a("7514"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e.map?a("pre",[e._v(e._s(e.map)+"\n        ")]):a("div",{staticClass:"description"},[e._v("No type data inspection")])])}),j=[],P=a("7618"),M={name:"type-map",props:["map"],mounted:function(){},created:function(){r["a"].$on("type_map",this.update)},beforeDestroy:function(){r["a"].$off("type_map",this.update)},data:function(){return{}},components:{},methods:{extractType:function(e){var t=[],a=/<class '(.*)'>/,s=this;function i(e,i){var n=a.exec(e);if(n)if("list"==n[1]){var o=s.extractType(i);o?t.push("list[".concat(o,"]")):t.push("list")}else t.push(n[1])}if("object"==Object(P["a"])(e))for(var n in e)i(n,e[n]);else"string"==typeof e&&i(e,null);if(t.length)var o=t.join(",");else o=null;return o}}},A=M,R=(a("1f7e"),Object(f["a"])(A,D,j,!1,null,null,null)),S=R.exports,L=a("8ae6"),U=a("3e54"),I={name:"data-source-inspect",props:["_id","maps"],mixins:[U["a"]],mounted:function(){$(".menu .item").tab(),$("#maps .item:first").addClass("active"),$(".tab:first").addClass("active")},components:{TypeMap:S,MappingMap:L["a"]},methods:{inspect:function(){var e=this;$("#inspect-".concat(this._id,".ui.basic.inspect.modal")).modal("setting",{onApprove:function(){var t=$("#inspect-".concat(e._id)).find("#select-mode").val(),a=$("#inspect-".concat(e._id)).find("#select-data_provider").val();o.a.put(o.a.defaults.baseURL+"/inspect",{data_provider:[a,e._id],mode:t}).then(function(e){console.log(e.data.result),r["a"].$emit("refresh_sources")}).catch(function(e){console.log("Error getting job manager information: "+e)})}}).modal("show")},saveMapping:function(e,t,a){var s=$("#".concat(e)).html(),i=this.html2json(s);r["a"].$emit("save_mapping",t,i,"inspect")}}},T=I,B=Object(f["a"])(T,O,x,!1,null,null,null),N=B.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui two grid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"ten wide column"},[a("table",{staticClass:"ui small very compact definition collapsing table"},[a("tbody",[a("tr",[a("td",{staticClass:"ui grey"},[e._v("URL")]),"github"==e.source.data_plugin.plugin.type?a("td",[a("i",{staticClass:"github icon"}),a("span",[a("a",{attrs:{href:e.source.data_plugin.plugin.url}},[e._v(e._s(e.source.data_plugin.plugin.url))])])]):a("td",[e._v("No information available")])]),a("tr",[a("td",[e._v("Release")]),a("td",[e._v("\n                "+e._s(e.source.data_plugin.download.release)+"\n              ")])]),a("tr",[a("td",[e._v("Source folder")]),a("td",[e.source.data_plugin.download.data_folder?a("a",{attrs:{href:e._f("replace")(e.source.data_plugin.download.data_folder,"/data/biothings_studio","")}},[e._v(e._s(e.source.data_plugin.download.data_folder))]):e._e()])]),e.source.data_plugin.download.error?a("tr",[a("td",[e._v("Error")]),a("td",[a("div",{staticClass:"red"},[e._v(e._s(e.source.data_plugin.download.error))])])]):e._e(),a("tr",[a("td",[e._v("Last download")]),a("td",[e._v(e._s(e.source.data_plugin.download.started_at)+" "),e.source.data_plugin.download.started_at?a("i",[e._v("("+e._s(e._f("moment")(e.source.data_plugin.download.started_at,"from","now"))+")")]):e._e()])]),a("tr",[a("td",[e._v("Duration")]),a("td",[e._v(e._s(e.source.data_plugin.download.time))])])])])]),a("div",{staticClass:"six wide column",class:e.actionable},[a("div",{class:["ui plugin form",e.source._id]},[a("div",{staticClass:"fields"},[e._m(0),a("div",{staticClass:"required six wide field"},[a("button",{staticClass:"ui labeled small icon button",on:{click:function(t){return e.onUpdatePlugin()}}},[a("i",{staticClass:"database icon"}),e._v("\n                Update\n              ")])])]),a("div",{staticClass:"fields"},[a("div",{staticClass:"required ten wide field"}),a("div",{staticClass:"required six wide field"},[a("button",{staticClass:"ui labeled small icon button",on:{click:function(t){return e.onExportCode()}}},[a("i",{staticClass:"upload icon"}),e._v("\n                Export code\n              ")])])])])])]),a("div",{staticClass:"ui basic exportplugin modal"},[e._m(1),a("p",[e._v('\n        Plugin code can be exported to be able to modify directly the source code. This allows to\n        create a "manual datasource" (as opposed to automatically generated trought the plugin architecture)\n        which can be customized in more depth, using BioThings SDK.\n      ')]),a("div",{staticClass:"content"},[a("div",{staticClass:"ui exportform form"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"sixteen wide column"},[a("label",[e._v("Plugin parts to export")]),a("div",{staticClass:"grouped fields"},[a("div",{staticClass:"field"},[e._m(2),e.export_results?a("plugin-part-export",{attrs:{part:e.export_results.dumper,ptype:"dumper"}}):e._e()],1),a("div",{staticClass:"field"},[e._m(3),e.export_results?a("plugin-part-export",{attrs:{part:e.export_results.uploader,ptype:"uploader"}}):e._e()],1),a("div",{staticClass:"field"},[e._m(4),e.export_results?a("plugin-part-export",{attrs:{part:e.export_results.mapping,ptype:"mapping"}}):e._e()],1)]),a("br"),a("label",{staticClass:"white"},[e._v("Delete any previously exported code")]),e._m(5)]),a("div",{staticClass:"eight wide column"},[e.export_error?a("div",{staticClass:"ui negative message"},[a("p",[e._v(e._s(e.export_error))])]):e._e(),Object.keys(e.export_results).length?a("div",{staticClass:"ui positive message"},[a("p",[e._v("\n                  You may want to adjust ACTIVE_DATASOURCES parameter in\n                  configuration to activate this new exported datasource.\n                ")])]):e._e()]),e._m(6)])])])])])},W=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"required ten wide field"},[a("input",{attrs:{type:"text",id:"release",placeholder:"Specify a commit hash or branch (optional)",autofocus:""}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"upload icon"}),e._v("\n        Export plugin code\n      ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui checkbox"},[a("input",{attrs:{type:"checkbox",name:"dumper",checked:"checked"}}),a("label",{staticClass:"white"},[e._v("Dumper")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui checkbox"},[a("input",{attrs:{type:"checkbox",name:"uploader",checked:"checked"}}),a("label",{staticClass:"white"},[e._v("Uploader")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui checkbox"},[a("input",{attrs:{type:"checkbox",name:"mapping",checked:"checked"}}),a("label",{staticClass:"white"},[e._v("Mapping ("),a("i",[e._v("registered")]),e._v(" or "),a("i",[e._v("generated")]),e._v(" from inspection)")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"grouped fields"},[a("div",{staticClass:"field"},[a("div",{staticClass:"ui checkbox"},[a("input",{attrs:{type:"checkbox",name:"purge"}}),a("label",{staticClass:"white"},[e._v("Purge")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"eight wide column"},[a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),a("span",{attrs:{id:"exportcancel"}},[e._v("Cancel")])]),a("div",{staticClass:"ui green ok inverted button",attrs:{id:"exportok"}},[a("i",{staticClass:"checkmark icon"}),a("span",{attrs:{id:"exportok"}},[e._v("OK")])])])])}],q=(a("7f7f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.part?a("span",["dumper"==e.ptype?a("span",["ok"==e.part.status?a("span",{staticClass:"ui green tiny smallmsg message"},[e._v("\n            Dumper "),a("b",[e._v(e._s(e.part.class))]),e._v(" exported in file "),a("code",[e._v(e._s(e.part.file))])]):a("span",{staticClass:"ui red tiny smallmsg message"},[e._v("\n            "+e._s(e.part.message)+"\n        ")])]):e._e(),"uploader"==e.ptype?a("span",["ok"==e.part.status?a("span",{staticClass:"ui green tiny smallmsg message"},[e._v("\n            Uploader "),a("b",[e._v(e._s(e.part.class))]),e._v(" exported in file "),a("code",[e._v(e._s(e.part.file))])]):a("span",{staticClass:"ui red tiny smallmsg message"},[e._v("\n            "+e._s(e.part.message)+"\n        ")])]):e._e(),"mapping"==e.ptype?a("span",["ok"==e.part.status?a("span",{staticClass:"ui green tiny smallmsg message"},[e._v("\n            Mapping (origin "),a("b",[e._v(e._s(e.part.origin))]),e._v(") exported in file "),a("code",[e._v(e._s(e.part.file))])]):"warning"==e.part.status?a("span",{staticClass:"ui yellow tiny smallmsg message"},[e._v("\n            "+e._s(e.part.message)+"\n        ")]):a("span",{staticClass:"ui red tiny smallmsg message"},[e._v("\n            "+e._s(e.part.message)+"\n        ")])]):e._e()]):e._e()}),J=[],z={name:"plugin-part-export",props:["part","ptype"],mounted:function(){},beforeDestroy:function(){},components:{},data:function(){return{}},methods:{}},H=z,Y=(a("a62e"),Object(f["a"])(H,q,J,!1,null,"5559c2ea",null)),F=Y.exports,V={name:"data-source-plugin",mixins:[C["a"],_["a"]],props:["source"],mounted:function(){},beforeDestroy:function(){$(".ui.basic.exportplugin.modal").remove()},components:{PluginPartExport:F},data:function(){return{export_error:null,export_results:{}}},methods:{onUpdatePlugin:function(){var e=$(".ui.plugin.form.".concat(this.source._id)).form("get field","release"),t=null;return e&&(t=e.val()),this.dumpPlugin(t=t)},showExportResults:function(e){this.export_results=e.data.result,console.log(e)},onExportCode:function(){$("#exportok").show(),$("#exportcancel").text("Cancel"),this.export_results={};var e=this;$(".ui.basic.exportplugin.modal").modal("setting",{detachable:!1,closable:!1,onApprove:function(){e.loading(),e.export_error=null;var t=[];$(".ui.exportform.form").form("get field","dumper").prop("checked")&&t.push("dumper"),$(".ui.exportform.form").form("get field","uploader").prop("checked")&&t.push("uploader"),$(".ui.exportform.form").form("get field","mapping").prop("checked")&&t.push("mapping");var a=$(".ui.exportform.form").form("get field","purge").prop("checked"),s={what:t,purge:a};return o.a.put(o.a.defaults.baseURL+"/dataplugin/".concat(e.source._id,"/export"),s).then(function(t){e.loaded(),e.showExportResults(t),$("#exportok").hide(),$("#exportcancel").text("Back"),$(".ui.basic.exportplugin.modal").modal("setting",{onDeny:function(){return console.log("ok on valide"),!0}})}).catch(function(t){console.log("Error exporting plugin: "+t),e.loaderror(t),e.export_error=e.extractError(t)}),!1}}).modal("show")},dumpPlugin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null;null!=e&&""!=e&&(t={release:e}),console.log(t),o.a.put(o.a.defaults.baseURL+"/dataplugin/".concat(this.source.name,"/dump"),t).then(function(e){console.log(e.data.result)}).catch(function(e){console.log("Error update plugin: "+e)})}}},G=V,X=(a("b042"),Object(f["a"])(G,K,W,!1,null,"f0a2731e",null)),Q=X.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("div",{staticClass:"ui fluid basic segment right aligned",class:e.actionable},[a("button",{staticClass:"ui button mini",on:{click:e.$parent.inspect}},[a("i",{staticClass:"unhide icon"}),e._v("\n            Inspect data\n        ")])]),a("inspect-form",{attrs:{_id:e._id}}),e.maps?a("span",[Object.keys(e.maps).length>1?a("span",[a("p",[e._v("Found sub-sources linked to main source "),a("b",[e._v(e._s(e._id))]),e._v(", select one to see mapping")]),a("div",{staticClass:"ui top attached tabular menu",attrs:{id:"maps"}},e._l(e.maps,function(t,s,i){return a("a",{class:["green item",0===i?"active":""],attrs:{"data-tab":"inspect_"+s}},[e._v(e._s(s)+"\n                    "),e.is_broken(s)?a("button",{staticClass:"reset ui button",attrs:{"data-tooltip":"Datasource broken, click to remove"},on:{click:function(t){return e.reset(s)}}},[a("i",{staticClass:"close icon"})]):e._e()])}),0)]):e._e(),e._l(e.maps,function(t,s,i){return e.maps?a("div",{class:["ui bottom attached tab segment",0===i?"active":""],attrs:{"data-tab":"inspect_"+s}},[a("p",[e._v("\n                These are the mappings for source "),a("b",[e._v(e._s(s))]),e._v(".\n            ")]),e._m(0,!0),a("p",[e._v("\n                Mappings can be manually edited and mapping from inspection can be saved as the new registered, active mapping.\n            ")]),e._m(1,!0),a("div",{staticClass:"ui grid"},[!e.maps[s]["inspect_mapping"]||e.maps[s]["inspect_mapping"]["errors"]||e.maps[s]["inspect_mapping"]["pre-mapping"]?e._e():a("div",{staticClass:"center aligned sixteen wide column",class:e.actionable},[a("button",{staticClass:"ui labeled mini icon button",on:{click:function(t){return e.diffMapping("tab_mapping_inspected","tab_mapping_registered",s)}}},[a("i",{staticClass:"exchange icon"}),e._v("\n                        Diff\n                    ")])]),a("div",{staticClass:"eight wide column"},[e.maps[s]?a("mapping-map",{attrs:{entity:"source",map:e.maps[s]["inspect_mapping"],name:s,map_origin:"inspect",map_id:"tab_mapping_inspected",read_only:e.maps[s]["inspect_mapping"]&&e.maps[s]["inspect_mapping"]["pre-mapping"],can_commit:!e.maps[s]["registered_mapping"]||"uploader"!=e.maps[s]["registered_mapping"]["origin"]}}):e._e()],1),a("div",{staticClass:"eight wide column"},[e.maps[s]["registered_mapping"]?a("mapping-map",{attrs:{map:e.maps[s]["registered_mapping"]["mapping"],entity:"source",name:s,map_origin:"master",map_id:"tab_mapping_registered",read_only:e.maps[s]["registered_mapping"]&&"uploader"==e.maps[s]["registered_mapping"]["origin"],can_commit:!e.maps[s]["registered_mapping"]||"uploader"!=e.maps[s]["registered_mapping"]["origin"]}}):e._e()],1)])]):e._e()})],2):a("div",[e._v("\n        No mapping data found for this source.\n    ")])],1)},ee=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("i",[e._v("Mapping from inspection")]),e._v(" has been generated during data inspection, while "),a("i",[e._v("Registered mapping")]),e._v(" is the actual active mapping, used during indexation.\n            ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui warning message"},[a("ul",{staticClass:"ui list"},[a("li",[e._v("If a mapping is hard-coded in source code, it can't be edited, saved or replaced.")]),a("li",[e._v("When testing a mapping, an temporary index is created on the selection ElasticSearch environment. That index is then deleted.")])])])}],te=a("55b7"),ae={name:"data-source-mapping",props:["_id","maps","source"],mixins:[te["a"],C["a"],_["a"]],mounted:function(){this.setup()},components:{MappingMap:L["a"],InspectForm:c["a"]},data:function(){return{}},watch:{maps:function(e,t){e!=t&&this.setup()}},methods:{setup:function(){$(".menu .item").tab()},is_broken:function(e){try{if(!this.source.upload.sources.hasOwnProperty(e)||null===this.source.upload.sources[e]["uploader"])return!0}catch(t){return!1}},reset:function(e){var t=this;t.loading();var a={name:t.source._id,key:"inspect",subkey:e};o.a.post(o.a.defaults.baseURL+"/source/".concat(t.source._id,"/reset"),a).then(function(e){t.loaded()}).catch(function(e){t.loaderror(e)})}}},se=ae,ie=(a("d9fa"),Object(f["a"])(se,Z,ee,!1,null,"01088900",null)),ne=ie.exports,oe=a("6a96"),re={name:"data-source-detailed",props:["_id"],components:{InspectForm:c["a"],DataSourceDump:h,DataSourceUpload:k,DataSourceInspect:N,DataSourcePlugin:Q,DataSourceMapping:ne,DiffModal:oe["a"],Loader:C["a"]},mixins:[l["a"],C["a"],_["a"]],mounted:function(){console.log("DataSourceDetailed mounted"),this.loadData(),$("select.dropdown").dropdown(),$(".menu .item").tab()},created:function(){r["a"].$on("change_source",this.loadData),r["a"].$on("change_master",this.loadData),r["a"].$on("change_data_plugin",this.loadData)},beforeDestroy:function(){r["a"].$on("change_source",this.loadData),r["a"].$off("change_master",this.loadData),r["a"].$on("change_data_plugin",this.loadData)},data:function(){return{source:null}},computed:{maps:function(){var e={};if(this.source.inspect&&this.source.inspect.sources)for(var t in this.source.inspect.sources)if(this.source.inspect.sources[t]["inspect"])for(var a in e[t]={},this.source.inspect.sources[t]["inspect"].results)e[t]["inspect_".concat(a)]=this.source.inspect.sources[t]["inspect"].results[a];for(var t in this.source.mapping)!t in e&&(e[t]={}),e[t]||(e[t]={}),e[t]["registered_mapping"]=this.source.mapping[t];return Object.keys(e).length?e:null},license:function(){return this.pick_metadata(["license"])},license_url:function(){return this.pick_metadata(["license_url","license_url_short"])},website:function(){return this.pick_metadata(["url"])}},methods:{loadData:function(){var e=this,t=this;this.loading(),o.a.get(o.a.defaults.baseURL+"/source/".concat(this._id)).then(function(a){t.source=a.data.result,e.loaded()}).catch(function(t){console.log("Error getting source information: "+t),e.loaderror(t)})},pick_metadata:function(e){var t=null;function a(t){var a=null;for(var s in e)t[e[s]]&&(a=t[e[s]]);return a}if(this.source.__metadata__)if(Array.isArray(this.source.__metadata__))for(var s in t={},this.source.__metadata__){var i=this.source.__metadata__[s];for(var n in i){var o=a(i[n]);o&&(t[n]=o)}}else for(var r in this.source.__metadata__)t=a(this.source.__metadata__);return t}}},ce=re,le=(a("648d"),Object(f["a"])(ce,s,i,!1,null,null,null));t["a"]=le.exports},"6a96":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui diff modal"},[e._m(0),a("div",{staticClass:"content"},[a("p",[e._v("Operations describe what is required to get from the data on the left, to the data on the right")]),a("json-diff-results")],1),e._m(1)])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui header"},[a("i",{staticClass:"exchange icon"}),e._v("\n        JSON diff results\n    ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui green ok button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n            OK\n        ")])])}],n=(a("bc3a"),a("f5ef")),o=a("f1f5"),r={components:{JsonDiffResults:o["a"]},created:function(){n["a"].$on("show_diffed",this.showDiffed)},beforeDestroy:function(){n["a"].$off("show_diffed",this.showDiffed),$(".ui.diff.modal").remove()},methods:{showDiffed:function(){$(".ui.diff.modal").modal({observeChanges:!0}).modal("show")}}},c=r,l=a("0c7c"),u=Object(l["a"])(c,s,i,!1,null,null,null);t["a"]=u.exports},"6b75":function(e,t,a){"use strict";var s=a("e0c5"),i=a.n(s);i.a},"6dd5":function(e,t,a){},"6f4a":function(e,t,a){},"6f78":function(e,t,a){"use strict";var s=a("af85"),i=a.n(s);i.a},7537:function(e,t,a){},"766d":function(e,t,a){},"7a6a":function(e,t,a){},"7c9a":function(e,t,a){"use strict";var s=a("c606"),i=a.n(s);i.a},"7df8":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},i=[],n=(a("bc3a"),a("f5ef")),o={name:"base-build",mounted:function(){},components:{},created:function(){},beforeDestroy:function(){},computed:{},methods:{inspect:function(e){$(e.target).attr("data-build_id")==this.build._id&&n["a"].$emit("do_inspect",this.build._id)}}},r=o,c=(a("0530"),a("0c7c")),l=Object(c["a"])(r,s,i,!1,null,null,null);t["a"]=l.exports},"7e12":function(e,t,a){"use strict";var s=a("6dd5"),i=a.n(s);i.a},"824e":function(e,t,a){"use strict";var s=a("9ae3"),i=a.n(s);i.a},"86ff":function(e,t,a){},8704:function(e,t,a){"use strict";var s=a("7a6a"),i=a.n(s);i.a},"8a55":function(e,t,a){},"8ae6":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",["inspect"==e.map_origin?a("h3",{staticClass:"center aligned"},[e._v("Mapping from inspection")]):"master"==e.map_origin?a("h3",{staticClass:"center aligned"},[e._v("Registered mapping")]):"build"==e.map_origin?a("h3",{staticClass:"center aligned"},[e._v("Merged mapping")]):e._e(),a("div",{staticClass:"center aligned",class:e.actionable},[!e.map||e.read_only||e.map["errors"]||e.map["pre-mapping"]?e._e():a("button",{staticClass:"ui labeled mini icon button",on:{click:function(t){return e.saveMapping()}}},[a("i",{staticClass:"save icon"}),e._v("\n            Save\n        ")]),e.map?a("div",{staticClass:"ui mini buttons"},[a("div",{staticClass:"ui labeled icon button",on:{click:function(t){return e.testMapping()}}},[a("i",{staticClass:"check square outline icon"}),e._v("Validate on "),a("span",{class:[e.name,e.map_id,"test-on"]},[e._v("...")])]),a("div",{class:["ui floating",e.map_id,"dropdown icon button"]},[a("i",{staticClass:"dropdown icon"}),a("div",{staticClass:"menu"})])]):e._e(),0!=e.can_commit&&"inspect"==e.map_origin?a("button",{staticClass:"ui labeled mini icon button",on:{click:function(t){return e.commitMapping()}}},[a("i",{staticClass:"angle double right icon"}),e._v("\n            Commit\n        ")]):e._e()]),e.dirty?a("div",{staticClass:"ui orange basic label"},[e._v("Edited")]):e._e(),a("br"),null!=e.mapping_msg?a("div",{class:["ui",e.mapping_error?"red":"green","label"]},[e.mapping_error?a("span",[e._v("\n            An error occured while validating this mapping:"),a("br"),a("code",[e._v(e._s(e.mapping_msg))])]):a("span",[e._v("\n            Mapping has successfully been validated.\n            "),a("code",[e._v(e._s(e.mapping_msg))])])]):e._e(),e.map?a("span",[e.has_errors?a("div",[e._m(0),a("div",{staticClass:"ui bulleted list"},e._l(e.map["errors"],function(t){return a("div",{staticClass:"item"},[a("b",[e._v(e._s(t))])])}),0),a("p",[e._v("Mapping can't be generated until those errors are fixed. Please fix the parser or the data and try again.")]),a("a",{staticClass:"ui grey label"},[e._v("For debugging purposes, below is a pre-mapping structure, where errors can be spot.")])]):e._e(),a("pre",{attrs:{id:e.name+"-"+e.map_id}},[e._v("        ")])]):a("div",{staticClass:"description"},[e._v("No mapping data")]),a("div",{staticClass:"ui modal",attrs:{id:"modal_"+e.name+"-"+e.map_id}},[a("div",{staticClass:"header"},[e._v("Modify indexing rules")]),a("input",{staticClass:"path",attrs:{type:"hidden"}}),a("div",{staticClass:"content"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"six wide column"},[e._m(1),a("p"),a("div",{staticClass:"index ui checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.indexed,expression:"indexed"}],attrs:{type:"checkbox",name:"index",id:"index_checkbox"},domProps:{checked:Array.isArray(e.indexed)?e._i(e.indexed,null)>-1:e.indexed},on:{change:function(t){var a=e.indexed,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=null,o=e._i(a,n);s.checked?o<0&&(e.indexed=a.concat([n])):o>-1&&(e.indexed=a.slice(0,o).concat(a.slice(o+1)))}else e.indexed=i}}}),a("label",[e._v("Index this field")])]),a("p"),a("p"),a("div",{class:["copy_to_all ui checkbox",e.indexed?"":"disabled"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.copied_to_all,expression:"copied_to_all"}],attrs:{type:"checkbox",name:"copy_to_all",id:"copy_to_all_checkbox"},domProps:{checked:Array.isArray(e.copied_to_all)?e._i(e.copied_to_all,null)>-1:e.copied_to_all},on:{change:function(t){var a=e.copied_to_all,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=null,o=e._i(a,n);s.checked?o<0&&(e.copied_to_all=a.concat([n])):o>-1&&(e.copied_to_all=a.slice(0,o).concat(a.slice(o+1)))}else e.copied_to_all=i}}}),a("label",[e._v("Search this field by default")])]),a("p"),a("p"),e._m(2),a("p"),a("p"),a("div",{staticClass:"six wide field"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.strsubmap,expression:"strsubmap"}],staticClass:"json",attrs:{rows:"5",id:"submap"},domProps:{value:e.strsubmap},on:{input:function(t){t.target.composing||(e.strsubmap=t.target.value)}}},[e._v(e._s(e.strsubmap))]),e.json_err?a("div",{staticClass:"ui mini negative message"},[a("p",[e._v("Invalid JSON format")])]):e._e()]),a("p")]),e._m(3)])]),a("div",{staticClass:"actions"},[e._m(4),a("div",{staticClass:"ui green ok button",class:e.actionable},[a("i",{staticClass:"checkmark icon"}),e._v("\n                OK\n            ")])])]),a("div",{staticClass:"ui modal",attrs:{id:"modal_commit_"+e.name}},[e._m(5),e._m(6),e._m(7)])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"ui orange label"},[a("i",{staticClass:"exclamation triangle icon"}),e._v("Found errors while generating the mapping:")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h5",[e._v("\n                        Field: "),a("span",{staticClass:"key"}),a("br"),e._v("\n                        Path: "),a("span",{staticClass:"path"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"index ui"},[a("label",[e._v("Change type")]),a("div",{staticClass:"ui selection estype dropdown",attrs:{id:"estype"}},[a("div",{staticClass:"text"}),a("i",{staticClass:"dropdown icon"})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ten wide column"},[a("div",{staticClass:"ui list"},[a("a",{staticClass:"item"},[a("i",{staticClass:"right triangle icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"description"},[a("b",[e._v("Enable index")]),e._v(" allows a field to be searchable.\n                                    If indexing is disabled, values are still stored and returned in results,\n                                    but they can't be directly queried. Indexing takes disk space and can also\n                                    impact performances, only index fields which make sense to query.\n                                ")])])]),a("a",{staticClass:"item"},[a("i",{staticClass:"right triangle icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"description"},[e._v("\n                                    When "),a("b",[e._v("Search by default")]),e._v(" is enabled, field can be searched without specifying the full path.\n                                    "),a("i",[e._v("Note: _id field is an exception, path is not required.")]),a("br"),e._v("\n                                    Ex:\n                                    "),a("ul",{staticClass:"ui list"},[a("li",[e._v("When searching by default is disabled, searching "),a("b",[a("span",{staticClass:"key"})]),e._v(" field requires to specify the full path:"),a("br"),a("code",[e._v("/query?q="),a("b",[a("span",{staticClass:"path"}),e._v(":value_to_search")])])]),a("li",[e._v("When searching by default is enabled, path can be omitted, "),a("i",[e._v("value_to_search")]),e._v(" will be searched\n                                            in all fields declared as searchable by default."),a("br"),a("code",[e._v("/query?q="),a("b",[e._v("value_to_search")])]),e._v(".\n                                        ")])])])])]),a("a",{staticClass:"item"},[a("i",{staticClass:"right triangle icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"description"},[e._v("\n                                  ElasticSearch field data type can be changed if needed. See \n                                  "),a("a",{attrs:{target:"_blank",href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-types.html"}},[e._v("\n                                    Field datatypes\n                                  ")]),e._v(" for more information.\n                                  "),a("i",[e._v("Note: only core datatypes are available in this list ")])])])]),a("a",{staticClass:"item"},[a("i",{staticClass:"right triangle icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"description"},[e._v("\n                                    Field definition can also be manually specificed in the text box, using JSON notation, for more advanced usage.\n                                ")])])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui red basic cancel button"},[a("i",{staticClass:"remove icon"}),e._v("\n                Cancel\n            ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"angle double right icon"}),e._v("\n            Commit new mapping\n        ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("p",[e._v("Are you sure you want to commit mapping from inspection?")]),a("p",[e._v("This will be replace current registered one.")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel button"},[a("i",{staticClass:"remove icon"}),e._v("\n                No\n            ")]),a("div",{staticClass:"ui green ok button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                Yes\n            ")])])}],n=(a("ac6a"),a("456d"),a("7618")),o=(a("28a5"),a("a481"),a("7f7f"),a("bc3a")),r=a.n(o),c=a("f5ef"),l=a("2b0e"),u=a("3e54"),d=a("bf2a"),_={name:"mapping-map",props:["map_id","map","name","read_only","map_origin","can_commit","entity"],mixins:[u["a"],d["a"]],mounted:function(){console.log("MappingMap mounted"),this.htmlmap(),$(".ui.checkbox").checkbox(),this.$forceUpdate(),this.buildIndexDropdown()},filters:{log:function(e){return console.log("in log ".concat(e)),e}},created:function(){c["a"].$on("reload_mapping_map",this.$forceUpdate),c["a"].$on("mapping_test_".concat(this.map_id,"-").concat(this.name),this.displayMappingTestResult)},beforeDestroy:function(){c["a"].$off("reload_mapping_map",this.$forceUpdate),c["a"].$off("mapping_test_".concat(this.map_id,"-").concat(this.name),this.displayMappingTestResult)},data:function(){return{path:[],submap:{},dirty:!1,mapping_error:!1,mapping_msg:null,environments:{},estypes:["text","keyword","long","integer","short","byte","double","float","half_float","scaled_float","date","boolean","binary","integer_range","float_range","long_range","double_range","date_range"],selected_type:null,json_err:!1,tmp_strsubmap:null}},computed:{strmap:function(){return JSON.stringify(this.map)},strsubmap:{get:function(){return this.tmp_strsubmap?this.tmp_strsubmap:JSON.stringify(this.submap,null,2)},set:function(e){try{this.submap=JSON.parse(e),this.json_err=!1,this.tmp_strsubmap=null}catch(t){this.json_err=!0,this.tmp_strsubmap=e}}},indexed:{cache:!1,get:function(){return!("index"in this.submap&&!1===this.submap["index"])},set:function(e){e?$("#modal_".concat(this.name,"-").concat(this.map_id," .copy_to_all")).removeClass("disabled"):$("#modal_".concat(this.name,"-").concat(this.map_id," .copy_to_all")).addClass("disabled"),this.updateSubMap()}},copied_to_all:{cache:!1,get:function(){return"copy_to"in this.submap&&-1!=this.submap["copy_to"].indexOf("all")},set:function(e){this.updateSubMap()}},current_type:{cache:!1,get:function(){return this.submap["type"]},set:function(e){}},has_errors:function(){return"pre-mapping"in this.map&&"errors"in this.map}},watch:{submap:function(e,t){e!=t&&this.$forceUpdate()},map:function(e,t){e!=t&&this.htmlmap()}},components:{},methods:{generateField:function(e,t,a,s){return s?"<a class='mapkey leaf' id='".concat(a,"/").concat(t,"' map_id='").concat(e,"'>").concat(t,"</a>"):"<span class='non-leaf'>".concat(t,"</span>")},walkSubMap:function(e,t,a){t.length?1==t.length&&a?(e[t[0]]=a,this.htmlmap()):this.walkSubMap(e[t[0]],t.slice(1),a):this.submap=e},updateSubMap:function(){var e=$("#modal_".concat(this.name,"-").concat(this.map_id," #index_checkbox")).is(":checked"),t=$("#modal_".concat(this.name,"-").concat(this.map_id," #copy_to_all_checkbox")).is(":checked");$("#modal_".concat(this.name,"-").concat(this.map_id," input.path")).val();if("properties"in this.submap)throw new Error("Only 'leaf' keys can be modified");t?l["a"].set(this.submap,"copy_to",["all"]):l["a"].delete(this.submap,"copy_to"),e?l["a"].delete(this.submap,"index"):(l["a"].set(this.submap,"index",!1),l["a"].delete(this.submap,"copy_to")),l["a"].set(this.submap,"type",this.selected_type)},modifyMapKey:function(e){var t=this,a=e.currentTarget.innerText,s=e.currentTarget.id,i=e.currentTarget.getAttribute("map_id");if("".concat(this.name,"-").concat(this.map_id)==i){$("#modal_".concat(this.name,"-").concat(this.map_id," span.key")).html(a),$("#modal_".concat(this.name,"-").concat(this.map_id," input.path")).val(s),$("#modal_".concat(this.name,"-").concat(this.map_id," span.path")).html(s.slice(1).replace(/\//g,".").replace(".properties",""));var n=s.split("/").slice(1);this.walkSubMap(this.map,n);var o=this,r=[];r=this.estypes.map(function(e){return{name:e,value:e,selected:e==t.current_type}}),$(".ui.estype.dropdown").dropdown({values:r,onChange:function(e,t,a){o.selected_type=e,o.updateSubMap()}}),$("#modal_".concat(this.name,"-").concat(this.map_id)).modal("setting",{onApprove:function(){o.walkSubMap(o.map,s.split("/").slice(1),o.submap),o.dirty=!0,o.$forceUpdate()}}).modal("show")}},htmlmap:function(){if(this.map){var e=JSON.parse(JSON.stringify(this.map));if(!this.read_only){var t=this,a=function e(t,a){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";for(var i in t){var o=a.apply(this,[i,t[i],t,s]);null!==t[i]&&"object"==Object(n["a"])(t[i])&&(e(t[i],a,"".concat(s,"/").concat(i)),o&&delete t[i])}};t=this;a(e,function(e,a,s,i){if("object"==Object(n["a"])(a)&&-1==["properties","copy_to"].indexOf(e)){var o=!0;"properties"in s[e]&&(o=!1);var r=t.generateField("".concat(t.name,"-").concat(t.map_id),e,i,o);return s[r]=a,!0}return!1})}this.read_only&&this.has_errors&&"pre-mapping"in this.map?$("#".concat(this.name,"-").concat(this.map_id)).text(JSON.stringify(this.map["pre-mapping"],null,4)):($("#".concat(this.name,"-").concat(this.map_id)).html(JSON.stringify(e,null,4)),$(".mapkey").bind("click",this.modifyMapKey))}},cleaned:function(){this.dirty=!1},displayMappingTestResult:function(e,t){this.mapping_error="error"==t,this.mapping_msg=e},saveMapping:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=$("#".concat(this.name,"-").concat(this.map_id)).html(),s=this.html2json(a);t||(t=this.map_origin),console.log("Saving mapping for ".concat(this.name," dest:").concat(t)),r.a.put(r.a.defaults.baseURL+"/".concat(this.entity,"/").concat(this.name,"/mapping"),{mapping:s,dest:t}).then(function(t){console.log(t.data.result),e.cleaned()}).catch(function(e){console.log("Error : "+e)})},commitMapping:function(){var e=this,t="source"==this.entity?"master":"build";$("#modal_commit_".concat(e.name)).modal("setting",{onApprove:function(){e.saveMapping(t)}}).modal("show")},testMapping:function(){var e=this,t=$("#".concat(this.name,"-").concat(this.map_id)).html(),a={root_key:{properties:this.html2json(t)}},s=$(".".concat(this.name,".").concat(this.map_id,".test-on")).text();r.a.post(r.a.defaults.baseURL+"/mapping/validate",{mapping:a,env:s}).then(function(t){console.log(t.data.result),c["a"].$emit("mapping_test_".concat(e.map_id,"-").concat(e.name),"","info")}).catch(function(t){console.log("Error validating mapping: "),console.log(t),c["a"].$emit("mapping_test_".concat(e.map_id,"-").concat(e.name),t.data.error,"error")})},buildIndexDropdown:function(){var e=this,t=this;r.a.get(r.a.defaults.baseURL+"/index_manager").then(function(a){e.environments=Object.keys(a.data.result.env);var s=[],i=0;for(var n in e.environments){var o={name:e.environments[n],value:e.environments[n]};0==i&&(o["selected"]=!0),s.push(o),i++}$(".ui.".concat(t.map_id,".dropdown")).dropdown({values:s,onChange:function(e,a,s){$(".".concat(t.map_id,".test-on")).text("".concat(e))}})}).catch(function(e){console.log("Error getting index environments: "+e)})}}},m=_,v=(a("7e12"),a("0c7c")),f=Object(v["a"])(m,s,i,!1,null,null,null);t["a"]=f.exports},"8f55":function(e,t,a){},9068:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("div",{staticClass:"ui main container"},[e._m(0),e.version_urls?e._e():a("div",{staticClass:"ui info message"},[a("div",{staticClass:"header"},[e._v("\n                    Welcome to BioThings Standalone setup wizard!\n                ")]),a("p",[e._v("This hub isn't configured yet to access remote date releases, please follow the steps below.")])]),a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"ui sixteen wide column"},[e._m(1),a("div",{staticClass:"ui attached credentials segment"},[a("p",[e._v("\n                            If remote data releases require authentication, please provide IAM Access Key ID and Secret Access Key:\n                        ")]),a("div",{staticClass:"ui input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.access_key,expression:"access_key"}],attrs:{type:"password",readonly:e.readonly,size:"50",placeholder:"Access Key ID"},domProps:{value:e.access_key},on:{input:function(t){t.target.composing||(e.access_key=t.target.value)}}})]),a("div",{staticClass:"ui left pointing blue basic label"},[e._v("\n                            Enter an IAM Access Key ID\n                        ")]),a("br"),a("div",{staticClass:"ui input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.secret_key,expression:"secret_key"}],attrs:{type:"password",readonly:e.readonly,size:"50",placeholder:"Secret Access Key"},domProps:{value:e.secret_key},on:{input:function(t){t.target.composing||(e.secret_key=t.target.value)}}})]),a("div",{staticClass:"ui left pointing blue basic label"},[e._v("\n                            Enter an IAM Secret Access Key\n                        ")]),a("br"),e._m(2),a("button",{staticClass:"ui green ok labeled icon button",class:e.actionable,on:{click:function(t){return e.saveKeys()}}},[a("i",{staticClass:"save icon"}),e._v("\n                            Save\n                        ")]),a("br")]),a("div",{staticClass:"ui hide attached datareleases segment"},[e._m(3),e._m(4),a("p"),a("br"),a("div",{staticClass:"ui form"},[a("div",{staticClass:"field"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.version_urls,expression:"version_urls"}],attrs:{readonly:e.readonly},domProps:{value:e.version_urls},on:{input:function(t){t.target.composing||(e.version_urls=t.target.value)}}})])]),a("br"),a("button",{staticClass:"ui green ok labeled icon button",class:e.actionable,on:{click:function(t){return e.saveVersionURLs()}}},[a("i",{staticClass:"save icon"}),e._v("\n                            Save\n                        ")])]),a("div",{staticClass:"ui hide attached misc segment"},[a("p",[e._v("\n                            You can optionally rename this Hub and assign a custom icon.\n                        ")]),a("div",{staticClass:"ui input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.hub_name,expression:"hub_name"}],attrs:{type:"text",size:"50",placeholder:"Name",readonly:e.readonly},domProps:{value:e.hub_name},on:{input:function(t){t.target.composing||(e.hub_name=t.target.value)}}})]),a("div",{staticClass:"ui left pointing blue basic label"},[e._v("\n                            Give a name to this standalone hub\n                        ")]),a("br"),a("div",{staticClass:"ui input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.hub_icon,expression:"hub_icon"}],attrs:{type:"text",size:"50",placeholder:"Icon (url)",readonly:e.readonly},domProps:{value:e.hub_icon},on:{input:function(t){t.target.composing||(e.hub_icon=t.target.value)}}})]),a("div",{staticClass:"ui left pointing blue basic label"},[e._v("\n                            Enter URL pointing to a custom icon\n                        ")]),a("br"),a("br"),a("button",{staticClass:"ui green ok labeled icon button",class:e.actionable,on:{click:function(t){return e.saveMisc()}}},[a("i",{staticClass:"save icon"}),e._v("\n                            Save\n                        ")]),a("br")]),a("div",{staticClass:"ui hide attached restarthub segment"},[a("p",[e._v("\n                            Once configured, Hub needs to be restarted so the new configuration becomes active.\n                            ")]),e.dirty_conf?a("div",{staticClass:"ui yellow compact message right floated"},[e._v("Configuration has changed, Hub needs to restart")]):e._e(),a("p"),a("br"),a("button",{staticClass:"ui red ok labeled icon button",class:e.actionable,on:{click:function(t){return e.restartHub()}}},[a("i",{staticClass:"sync alternate icon"}),e._v("\n                            Restart\n                        ")])])])])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui segment"},[a("h2",{staticClass:"ui header"},[a("i",{staticClass:"magic icon"}),a("div",{staticClass:"content"},[e._v("\n                        Standalone settings\n                        "),a("div",{staticClass:"sub header"},[e._v("Manage remote data releases")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui four top attached steps"},[a("a",{staticClass:"step",attrs:{id:"credentials"}},[a("i",{staticClass:"lock icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"title"},[e._v("Credentials")]),a("div",{staticClass:"description"},[e._v("Setup authentication details")])])]),a("a",{staticClass:"step",attrs:{id:"datareleases"}},[a("i",{staticClass:"globe icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"title"},[e._v("Data Releases")]),a("div",{staticClass:"description"},[e._v("Register remote data releases")])])]),a("a",{staticClass:"step",attrs:{id:"misc"}},[a("i",{staticClass:"info icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"title"},[e._v("Misc.")]),a("div",{staticClass:"description"},[e._v("Optional customizations")])])]),a("a",{staticClass:"step",attrs:{id:"restarthub"}},[a("i",{staticClass:"sync alternate icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"title"},[e._v("Restart Hub")]),a("div",{staticClass:"description"},[e._v("Make changes active")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui warning message"},[e._v("\n                            To limit exposure of sensitive data, these credentials are only stored within this hub,\n                            they're "),a("b",[e._v("not")]),e._v(" stored in ElasticSearch."),a("br"),e._v("\n                            For extra security, it is recommanded to use credentials giving read-only permissions,\n                            as well as regurlarly changing these.\n                        ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("\n                            Enter URL pointing to a file named "),a("code",[e._v("versions.json")]),e._v(". This file contains the list of\n                            all available remote data releases. It is automatically created when a data release is published from\n                            a Biothings Studio. You can enter multiple URLs, one per line"),a("br"),a("br"),e._v("\n                            Ex: drag & drop one the following "),a("i",[e._v("versions.json")]),e._v(".\n                            ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui bulleted list"},[a("div",{staticClass:"item"},[a("b",[e._v("MyGene (demo data)")]),e._v(" (no auth.): "),a("a",{attrs:{href:"http://biothings-releases.s3-website-us-west-2.amazonaws.com/mygene.info-demo/versions.json"}},[e._v("versions.json")])]),a("div",{staticClass:"item"},[a("b",[e._v("MyGene (production data)")]),e._v(" (auth. required): "),a("a",{attrs:{href:"https://biothings-releases.s3-us-west-2.amazonaws.com/mygene.info/versions.json"}},[e._v("versions.json")])])])}],n=(a("28a5"),a("ac6a"),a("456d"),a("2b0e")),o=(a("bc3a"),a("3361")),r=a("bf2a"),c=a("f5ef"),l={name:"standalone-wizard",mixins:[o["a"],r["a"]],mounted:function(){console.log("StandaloneWizard mounted"),this.setup(),Object.keys(this.config).length&&this.fetchConfigKeys()},updated:function(){},created:function(){c["a"].$on("current_config",this.onConfig)},beforeDestroy:function(){c["a"].$off("current_config",this.onConfig)},watch:{config:function(e,t){e!=t&&this.fetchConfigKeys()}},data:function(){return{config:{},access_key:null,secret_key:null,hub_name:null,hub_icon:null,version_urls:[],dirty_conf:!1}},computed:{},components:{},methods:{setup:function(){n["a"].config.hub_config?this.config=n["a"].config.hub_config:c["a"].$emit("change_config");var e=function(e){$("#"+e).addClass("active").nextAll().removeClass("active"),$("#"+e).prevAll().removeClass("active"),$(".segment."+e).show(),$(".segment."+e).nextAll().not(".steps").hide(),$(".segment."+e).prevAll().not(".steps").hide()};$(".step").click(function(){e($(this).attr("id"))}),e("credentials")},onConfig:function(e){this.config=e.scope.config,this.dirty_conf=e._dirty},fetchConfigKeys:function(){this.access_key=this.config.STANDALONE_AWS_CREDENTIALS&&this.config.STANDALONE_AWS_CREDENTIALS["value"].AWS_ACCESS_KEY_ID,this.secret_key=this.config.STANDALONE_AWS_CREDENTIALS&&this.config.STANDALONE_AWS_CREDENTIALS["value"].AWS_SECRET_ACCESS_KEY,this.version_urls=this.config.VERSION_URLS&&this.config.VERSION_URLS["value"].join("\n"),this.hub_name=this.config.HUB_NAME["value"],this.hub_icon=this.config.HUB_ICON["value"]},restartHub:function(){c["a"].$emit("restart_hub")},saveVersionURLs:function(){var e=this.version_urls.split("\n").filter(function(e){return""!=e});c["a"].$emit("save_config_param",{name:"VERSION_URLS",value:JSON.stringify(e)})},saveKeys:function(){var e={AWS_ACCESS_KEY_ID:this.access_key,AWS_SECRET_ACCESS_KEY:this.secret_key};c["a"].$emit("save_config_param",{name:"STANDALONE_AWS_CREDENTIALS",value:JSON.stringify(e)})},saveMisc:function(){c["a"].$emit("save_config_param",{name:"HUB_NAME",value:JSON.stringify(this.hub_name)}),c["a"].$emit("save_config_param",{name:"HUB_ICON",value:JSON.stringify(this.hub_icon)})}}},u=l,d=(a("6466"),a("0c7c")),_=Object(d["a"])(u,s,i,!1,null,"10786124",null);t["a"]=_.exports},"93a4":function(e,t,a){},9704:function(e,t,a){},"99bf":function(e,t,a){"use strict";var s=a("d225"),i=a("b0b4"),n=(a("4917"),a("bc3a")),o=a.n(n),r=a("f5ef"),c=a("1ab6"),l=a("14b7");function u(e){var t=document.cookie.match("(^|[^;]+)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():""}var d=function(){function e(){Object(s["a"])(this,e)}return Object(i["a"])(e,[{key:"get",value:function(e){return o.a.get(e)}},{key:"base",value:function(e){o.a.defaults.baseURL=e;var t=this.getAccessToken();t&&(o.a.defaults.headers.common["X-Biothings-Access-Token"]=u("biothings-access-token"),this.monitorExpiry());var a=this.getLoggedUser();a&&r["a"].$emit("logged_user",a)}},{key:"monitorExpiry",value:function(){var e=this,t=this.getAccessToken();if(t){var a=this.getExpiryDate(t),s=new Date,i=Math.max(Math.floor(.9*(a-s.getTime()/1e3)),0);console.log("Refresh access token in ".concat(i," seconds")),setTimeout(function(){c["a"].refreshAccessToken(),e.monitorExpiry()},1e3*i)}else console.log("Access token not found, stop monitoring expiry date")}},{key:"getExpiryDate",value:function(e){var t=l.decode(e);return t.exp}},{key:"checkTokenExpiryDate",value:function(e){console.log(l.decode(hubapi.getAccessToken()))}},{key:"getAccessToken",value:function(){return u("biothings-access-token")}},{key:"getRefreshToken",value:function(){return u("biothings-refresh-token")}},{key:"getLoggedUser",value:function(){return u("biothings-current-user")}},{key:"clearLoggedUser",value:function(){["biothings-current-user","biothings-access-token","biothings-refresh-token","biothings-id-token"].map(function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}),delete o.a.defaults.headers.common["X-Biothings-Access-Token"],r["a"].$emit("logged_user",null)}}]),e}();t["a"]=new d},"9ae3":function(e,t,a){},"9d74":function(e,t,a){"use strict";var s=a("a43d"),i=a.n(s);i.a},"9e76":function(e,t,a){"use strict";var s=a("b032"),i=a.n(s);i.a},a43d:function(e,t,a){},a4ad:function(e,t,a){"use strict";var s=a("2f47"),i=a.n(s);i.a},a59c:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.build.jobs?a("div",{staticClass:"ui small feed"},[a("div",{staticClass:"event"},[a("i",{staticClass:"ui hourglass start icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"summary"},[e._v("\n                Build starts\n                "),a("div",{staticClass:"date"},[e._v("\n                    "+e._s(e._f("moment")(e.build.started_at,"MMM Do YYYY, h:mm:ss a"))+"\n                ")])])])]),e._l(e.build.jobs,function(t){return a("div",{staticClass:"event"},["success"==t.status?a("i",{staticClass:"ui green checkmark icon"}):"canceled"==t.status?a("i",{staticClass:"ui orange exclamation circle icon"}):"failed"==t.status?a("i",{staticClass:"ui red warning sign icon"}):"inspecting"==t.status?a("i",{staticClass:"ui pulsing unhide icon"}):"diffing"==t.status?a("i",{staticClass:"ui pulsing exchange icon"}):"indexing"==t.status?a("i",{staticClass:"ui pulsing bookmark icon"}):a("i",{staticClass:"ui pulsing cube icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"summary"},[e._v("\n                "+e._s(t.step)+"\n                "),a("div",{staticClass:"date"},[e._v("\n                    "+e._s(t.time)+"\n                ")])]),t.sources?a("div",{staticClass:"meta"},[a("i",{staticClass:"database icon"}),e._v(e._s(t.sources.join(", "))+"\n            ")]):e._e(),t.err?a("div",{staticClass:"meta"},[a("i",{staticClass:"warning icon"}),e._v(e._s(t.err)+"\n            ")]):e._e()])])})],2):e._e()},i=[],n=(a("bc3a"),a("f5ef"),{name:"build-logs",props:["build"],mounted:function(){},beforeDestroy:function(){},components:{},methods:{}}),o=n,r=a("0c7c"),c=Object(r["a"])(o,s,i,!1,null,"0ccbc7ea",null);t["a"]=c.exports},a62e:function(e,t,a){"use strict";var s=a("feaa"),i=a.n(s);i.a},ac32:function(e,t,a){"use strict";var s=a("0466"),i=a.n(s);i.a},ace3:function(e,t,a){"use strict";var s=a("07e1"),i=a.n(s);i.a},af85:function(e,t,a){},b032:function(e,t,a){},b042:function(e,t,a){"use strict";var s=a("8a55"),i=a.n(s);i.a},b577:function(e,t,a){},b58d:function(e,t,a){},b8fb:function(e,t,a){},bc46:function(e,t,a){},bc6b:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("div",{staticClass:"choosehub ui floating dropdown mini icon button"},[a("i",{staticClass:"caret square down icon"}),a("div",{staticClass:"menu largechoose"},[e._m(0),Object.keys(e.existings).length?a("div",{staticClass:"divider"}):e._e(),Object.keys(e.existings).length?a("div",{staticClass:"header"},[e._v("\n                    Existing connections\n                ")]):e._e(),Object.keys(e.existings).length?a("div",{staticClass:"scrolling menu"},e._l(e.existings,function(t){return a("div",{staticClass:"item hubconnect",attrs:{"data-value":t.name}},[a("table",{staticClass:"ui small compact table hubconnect"},[a("tbody",[a("tr",[a("td",{staticClass:"collapsing tdhubicon"},[a("img",{staticClass:"hubicon",attrs:{src:t.icon}})]),a("td",{staticClass:"collapsing twelve wide"},[a("b",[e._v(e._s(t.name))])]),a("td",{staticClass:"collapsing hubconnect"},[a("a",{attrs:{href:t.url}},[a("i",{staticClass:"external alternate icon"})])]),a("td",{staticClass:"collapsing hubconnect"},[a("button",{staticClass:"ui small icon button",on:{click:function(a){return e.editConnection(a,t)}}},[a("i",{staticClass:"grey edit icon right floated"})])]),a("td",{staticClass:"collapsing hubconnect"},[a("button",{staticClass:"ui small icon button",on:{click:function(a){return e.deleteConnection(a,t)}}},[a("i",{staticClass:"grey trash alternate outline icon right floated"})])])])])])])}),0):e._e()])]),a("div",{staticClass:"ui basic newhuburl modal"},[e._m(1),a("div",{staticClass:"ui newhuburl form"},[e._m(2),e.connection_error?a("div",{staticClass:"connectionerror ui red basic label"},[a("div",[e._v("Unable to connect to Hub API because:")]),a("pre",{domProps:{innerHTML:e._s(e.connection_error)}})]):e._e()]),a("br"),a("div",{staticClass:"ui inverted accordion advanced"},[e._m(3),a("div",{staticClass:"content"},[e.signin_error?a("div",{staticClass:"ui red basic label signin-error",domProps:{innerHTML:e._s(e.signin_error)}}):e._e(),e.logged_username?a("span",[a("div",[a("span",[e._v("Currently logged as "),a("b",{staticClass:"logged-user"},[e._v(e._s(e.logged_username))])]),a("a",{staticClass:"signout",on:{click:e.signOut}},[e._v("Sign out")])]),a("br")]):a("form",{staticClass:"ui inverted form login",attrs:{method:"post",onsubmit:"return false"}},[e._m(4),e._m(5),a("button",{staticClass:"ui button",attrs:{type:"submit"},on:{click:e.signIn}},[e._v("Login")])])])]),e._m(6)])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item",attrs:{"data-value":"new"}},[a("i",{staticClass:"plus circle icon"}),a("b",[e._v("Create new connection")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"plug icon"}),e._v("\n                Create a new connection\n            ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fields"},[a("div",{staticClass:"required ten wide field"},[a("input",{attrs:{type:"text",id:"huburl",placeholder:"Hub address",autofocus:""}})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("i",{staticClass:"dropdown icon"}),e._v("\n                    Advanced\n                ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"field"},[a("label",[e._v("Username")]),a("input",{attrs:{type:"text",name:"username",placeholder:"Email"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"field"},[a("label",[e._v("Password")]),a("input",{attrs:{type:"password",name:"password",placeholder:"Password"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                Cancel\n            ")]),a("div",{staticClass:"ui green ok inverted button",attrs:{id:"huburl_ok"}},[a("i",{staticClass:"checkmark icon"}),e._v("\n                OK\n            ")])])}],n=(a("7f7f"),a("f559"),a("a481"),a("bc3a")),o=a.n(n),r=a("f5ef"),c=a("1ab6"),l=a("99bf"),u=a("2b0e"),d=a("3361"),_={name:"choose-hub",props:[],mixins:[d["a"]],mounted:function(){console.log("ChooseHub mounted");var e=this;this.getExistings();e=this;$(".choosehub.ui.floating.dropdown").dropdown({onChange:function(t,a,s){if("new"==t)e.newConnection();else{var i=e.existings[t],n=i["url"].replace(/\/$/,"");e.refreshConnection(n),i?r["a"].$emit("connect",i,"/"):console.log("Can't find connection details for ".concat(t))}}}),$(".ui.accordion.advanced").accordion()},created:function(){r["a"].$on("connection_failed",this.failedConnection),r["a"].$on("logged",this.logged),r["a"].$on("logerror",this.logerror),r["a"].$on("logged_user",this.setLoggedUser)},beforeDestroy:function(){$(".ui.basic.newhuburl.modal").remove(),r["a"].$off("connection_failed",this.failedConnection),r["a"].$off("logged",this.logged),r["a"].$off("logerror",this.logerror),r["a"].$off("logged_user",this.setLoggedUser)},data:function(){return{existings:{},connection_error:null,signin_error:null,logged_username:null,tokens:{}}},components:{},computed:{},methods:{buildConnections:function(){},getExistings:function(){var e=u["a"].localStorage.get("hub_connections");e=e?JSON.parse(e):{},this.existings=e},refreshConnection:function(e){var t=this,a=this;e.startsWith("http")||(e="http://".concat(e)),a.loading(),l["a"].base(e),o.a.get(e).then(function(t){var s=t.data.result;a.getExistings(),s["url"]=e.replace(/\/$/,""),s["name"]||(s["name"]=a.$parent.default_conn["name"]),s["icon"]||(s["icon"]=a.$parent.default_conn["icon"]),a.existings[s["name"]]=s,u["a"].localStorage.set("hub_connections",JSON.stringify(a.existings)),r["a"].$emit("connect",s,"/"),a.connection_error=null,a.loaded()}).catch(function(s){a.loaderror(s),t.failedConnection(e,s)})},failedConnection:function(e,t){this.connection_error=this.extractError(t),this.newConnection(e)},newConnection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;e&&$(".ui.newhuburl.form").form("get field","huburl").val(e),t.signin_error=null,$(".ui.basic.newhuburl.modal").modal("setting",{detachable:!1,closable:!1,onApprove:function(){t.connection_error=null;var e=$(".ui.newhuburl.form").form("get field","huburl").val();t.refreshConnection(e)}}).modal("show")},deleteConnection:function(e,t){e.stopPropagation(),console.log(e),console.log('Delete connection named "'.concat(t.name,'"')),delete this.existings[t.name],u["a"].localStorage.set("hub_connections",JSON.stringify(this.existings)),console.log(this.existings),this.getExistings()},editConnection:function(e,t){e.stopPropagation(),console.log(e),this.newConnection(t.url)},signIn:function(){this.signin_error=null;var e=$(".ui.form.login").form("get field","username").val(),t=$(".ui.form.login").form("get field","password").val();return c["a"].signIn(e,t),!1},logged:function(e,t){this.tokens=t,document.cookie="biothings-access-token="+t.accessToken.jwtToken,document.cookie="biothings-id-token="+t.idToken.jwtToken,document.cookie="biothings-refresh-token="+t.refreshToken.token,document.cookie="biothings-current-user="+e,this.setLoggedUser(e),this.signin_error=null},logerror:function(e,t,a){this.signin_error=t,a&&(this.signin_error+=": "+a),this.logger_user=null,this.tokens={}},setLoggedUser:function(e){this.logged_username=e},signOut:function(){c["a"].refreshAccessToken(),c["a"].signOut(),l["a"].clearLoggedUser()}}},m=_,v=(a("6b75"),a("0c7c")),f=Object(v["a"])(m,s,i,!1,null,"60537932",null);t["a"]=f.exports},bf2a:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},i=[],n=a("2b0e"),o=a("f5ef"),r={name:"actionable",mounted:function(){o["a"].$on("readonly_mode",this.switchMode)},components:{},created:function(){},beforeDestroy:function(){o["a"].$off("readonly_mode",this.switchMode)},data:function(){return{readonly:"true"==n["a"].localStorage.get("readonly")}},computed:{actionable:{get:function(){return this.readonly?"readonly":""},set:function(e){this.readonly=e,n["a"].localStorage.set("readonly",JSON.stringify(this.readonly))}}},methods:{switchMode:function(e){this.readonly=e}}},c=r,l=(a("d831"),a("0c7c")),u=Object(l["a"])(c,s,i,!1,null,null,null);t["a"]=u.exports},bff8:function(e,t,a){"use strict";var s=a("0c59"),i=a.n(s);i.a},c0b4:function(e,t,a){},c606:function(e,t,a){},c951:function(e,t,a){"use strict";var s=a("7537"),i=a.n(s);i.a},cadf5:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"apis"}},[a("div",{staticClass:"ui left vertical labeled icon small inverted sidebar menu",class:e.actionable},[a("a",{staticClass:"item",on:{click:e.createAPI}},[e._m(0),a("br"),a("br"),a("div",[e._v("New API")])])]),a("div",{staticClass:"pusher"},[a("div",{staticClass:"ui main container"},[a("div",{staticClass:"ui segment"},[a("div",{staticClass:"ui secondary small menu",class:e.actionable},[e._m(1)])]),a("div",{staticClass:"ui centered grid"},e._l(e.apis,function(e){return a("div",{staticClass:"ui five wide column"},[a("api",{attrs:{api:e}})],1)}),0)])]),a("div",{staticClass:"ui basic createapi modal"},[e._m(2),a("div",{staticClass:"content"},[a("div",{staticClass:"ui form"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"eight wide column"},[a("label",[e._v("Enter a name for the API")]),a("input",{attrs:{type:"text",name:"api_id",placeholder:"API name",autofocus:""}}),a("br"),a("br"),a("label",[e._v("Enter a description for the API (optional)")]),a("input",{attrs:{type:"text",name:"description",placeholder:"Description"}}),a("br"),a("br"),a("label",[e._v("Select a backend the API will connect to to serve the data")]),a("div",[a("select",{staticClass:"ui fluid apibackends dropdown",attrs:{name:"api_backend"}},e._l(e.backends,function(t){return e.backends.length?a("option",{attrs:{"data-es_host":t.host,"data-index":t.index,"data-doc_type":t.doc_type}},[e._v(e._s(t.env)+" ("+e._s(t.host)+" | "+e._s(t.index)+")")]):e._e()}),0),a("br"),a("br")]),a("label",[e._v("Specify a port")]),a("input",{attrs:{type:"text",name:"port",placeholder:"API port"}}),a("br"),a("br")]),a("div",{staticClass:"eight wide column"})])])]),e.errors.length?a("div",{staticClass:"ui error message"},[a("ul",{staticClass:"ui list"},e._l(e.errors,function(t){return a("li",[e._v(e._s(t))])}),0)]):e._e(),e._m(3)])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("i",{staticClass:"big icons"},[a("i",{staticClass:"shield icon"}),a("i",{staticClass:"huge corner add icon"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"item",attrs:{id:"side_menu"}},[a("i",{staticClass:"sidebar icon"}),e._v("\n                        Menu\n                    ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"shield icon"}),e._v("\n            Create new API\n        ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                Cancel\n            ")]),a("div",{staticClass:"ui green ok inverted button",attrs:{id:"newapi_ok"}},[a("i",{staticClass:"checkmark icon"}),e._v("\n                OK\n            ")])])}],n=a("bc3a"),o=a.n(n),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui fluid card"},[a("div",{staticClass:"content"},["running"==e.api.status?a("div",{staticClass:"ui tiny red label right floated"},[e._v("running")]):e._e(),a("div",{staticClass:"ui",attrs:{"data-tooltip":e.displayError()}},["failed"==e.api.status?a("i",{staticClass:"right floated red alarm icon pulsing"}):e._e()]),a("div",{staticClass:"left aligned header",model:{value:e.api,callback:function(t){e.api=t},expression:"api"}},[a("a",[e._v(e._s(e.api._id))])]),a("div",{staticClass:"left aligned description"},["running"==e.api.status?a("div",[a("div",{staticClass:"ui bulleted list"},[a("div",{staticClass:"item"},[e._v("Metadata: "),a("a",{attrs:{href:e.url_metadata}},[e._v(e._s(e.url_metadata))])]),a("div",{staticClass:"item"},[e._v("Query: "),a("a",{attrs:{href:e.url_query}},[e._v(e._s(e.url_query))])])])]):e._e()]),a("div",{staticClass:"meta"}),a("div",{staticClass:"ui clearing divider"}),a("div",{staticClass:"left aligned description"},[a("p",{staticClass:"center aligned"},[a("b",[e._v(e._s(e.api.description))])]),a("p",[a("table",{staticClass:"ui celled table"},[a("tbody",[a("tr",[a("td",[e._v("ElasticSearch host")]),a("td",[a("a",{attrs:{href:e.api.config.es_host}},[e._v(e._s(e.api.config.es_host))])])]),a("tr",[a("td",[e._v("Index")]),a("td",[e._v(e._s(e.api.config.index))])]),a("tr",[a("td",[e._v("Document type")]),a("td",[e._v(e._s(e.api.config.doc_type))])]),a("tr",[a("td",[e._v("API port")]),a("td",[e._v(e._s(e.api.config.port))])])])])])])]),a("div",{staticClass:"extra content",class:e.actionable},["running"!=e.api.status?a("div",{staticClass:"ui icon buttons left floated mini"},[a("button",{staticClass:"ui button",on:{click:e.startAPI}},[a("i",{staticClass:"play icon"})])]):a("div",{staticClass:"ui icon buttons left floated mini"},[a("button",{staticClass:"ui button",on:{click:e.stopAPI}},[a("i",{staticClass:"stop icon"})])]),a("div",{staticClass:"ui icon buttons right floated mini"},[a("button",{staticClass:"ui button"},[a("i",{staticClass:"trash icon",attrs:{"data-api_id":e.api._id},on:{click:function(t){return e.deleteAPI(t)}}})])])]),a("div",{staticClass:"ui basic deleteapi modal",attrs:{id:e.api._id}},[e._m(0),a("div",{staticClass:"content"},[a("p",[e._v("Are you sure you want to delete API "),a("b",[e._v(e._s(e.api._id))]),e._v(" ?")])]),e._m(1)])])},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"remove icon"}),e._v("\n            Delete API\n        ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                No\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n                Yes\n            ")])])}],l=(a("a481"),a("f5ef")),u=a("3361"),d=a("bf2a"),_={name:"api",mixins:[u["a"],d["a"]],props:["api"],mounted:function(){$(".menu .item").tab()},beforeDestroy:function(){$("#".concat(this.api._id,".ui.basic.deleteapi.modal")).remove()},data:function(){return{errors:[]}},components:{},computed:{url_metadata:function(){return this.api.url+"/metadata"},url_query:function(){return this.api.url+"/query?q=*"}},methods:{displayError:function(){var e=[];return this.api.err&&e.push(this.api.err),e.join("<br>")},deleteAPI:function(e){console.log(e);var t=$(e.target).attr("data-api_id");if(console.log("".concat(t," ").concat(this.api._id)),t&&t==this.api._id){var a=this;$("#".concat(this.api._id.replace(".","\\."),".ui.basic.deleteapi.modal")).modal("setting",{onApprove:function(){a.loading(),o.a.delete(o.a.defaults.baseURL+"/api",{data:{api_id:a.api._id}}).then(function(e){return console.log(e.data.result),a.loaded(),!0}).catch(function(e){console.log(e),console.log("Error deleting api: "+e.data.error),a.loaderror(e)})}}).modal("show")}else console.log("nope")},startStopAPI:function(e){var t=this;this.loading(),o.a.put(o.a.defaults.baseURL+"/api/".concat(this.api._id,"/").concat(e)).then(function(e){t.loaded(),console.log(e.data.result)}).catch(function(a){console.log(a),console.log("Error ".concat(e,"ing api: ")+a.data.error),t.loaderror(a)})},startAPI:function(){return this.startStopAPI("start")},stopAPI:function(){return this.startStopAPI("stop")}}},m=_,v=(a("f83a"),a("0c7c")),f=Object(v["a"])(m,r,c,!1,null,"5c60700e",null),p=f.exports,h={name:"api-grid",mixins:[u["a"],d["a"]],mounted:function(){console.log("ApiGrid mounted"),$(".ui.apibackends.dropdown").dropdown(),$("#apis .ui.sidebar").sidebar({context:$("#apis")}).sidebar("setting","transition","overlay").sidebar("attach events","#side_menu"),$(".ui.form").form()},updated:function(){},created:function(){this.getApis(),l["a"].$on("change_api",this.onApiChanged)},beforeDestroy:function(){$(".ui.basic.createapi.modal").remove(),l["a"].$off("change_api",this.onApiChanged)},watch:{},data:function(){return{apis:[],errors:[],backends:[]}},components:{Api:p},methods:{getApis:function(){var e=this;this.loading(),o.a.get(o.a.defaults.baseURL+"/api/list").then(function(t){e.apis=t.data.result,e.loaded()}).catch(function(t){console.log("Error getting APIs information: "+t),e.loaderror(t)})},onApiChanged:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getApis()},createAPI:function(){$("#apis .ui.sidebar").sidebar("hide");var e=this;e.loading(),o.a.get(o.a.defaults.baseURL+"/index_manager?remote=1").then(function(t){e.backends=[];var a=t.data.result;$.each(a.env,function(t,a){var s=function(s){for(var i in s)e.backends.push({env:t,host:a["host"],index:s[i]["index"],doc_type:s[i]["doc_type"]})};if(Array.isArray(a.index)){var i=a.index;s(i)}else for(var n in a.index){i=a.index[n];s(i)}}),$(".ui.apibackends.dropdown").dropdown(),e.loaded()}).catch(function(t){console.log("Error getting index environments: "),console.log(t),e.loaderror(t)}),$(".ui.basic.createapi.modal").modal("setting",{detachable:!1,onApprove:function(){e.errors=[];var t=$(".ui.form input[name=api_id]").val(),a=$(".ui.form input[name=description]").val(),s=$(".ui.form select[name=api_backend] :selected"),i=$(s).attr("data-es_host"),n=$(s).attr("data-index"),r=$(s).attr("data-doc_type"),c=parseInt($(".ui.form input[name=port]").val());if(t||e.errors.push("Provide a name for the API"),c||e.errors.push("Provide a port number"),e.errors.length)return!1;e.loading(),o.a.post(o.a.defaults.baseURL+"/api",{api_id:t,es_host:i,index:n,doc_type:r,port:c,description:a}).then(function(t){return console.log(t.data.result),e.loaded(),t.data.result}).catch(function(t){console.log("Error creating API: "),console.log(t),e.loaderror(t)})}}).modal("show")}}},b=h,g=(a("d922"),Object(v["a"])(b,s,i,!1,null,null,null));t["a"]=g.exports},d3ef:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"sources"}},[a("div",{staticClass:"ui left vertical labeled icon small inverted sidebar menu actionable"},[a("a",{staticClass:"item",on:{click:e.register}},[a("i",{staticClass:"plug icon"}),e._v("\n            New data plugin\n        ")])]),a("div",{staticClass:"pusher"},[a("div",{staticClass:"ui main container"},[a("div",{staticClass:"ui segment left aligned"},[a("div",{staticClass:"ui secondary small menu",class:e.actionable},[e._m(0)])]),a("div",{staticClass:"ui grid",attrs:{id:"data-source-grid"}},e._l(e.orderedSources,function(e){return a("div",{staticClass:"four wide column"},[a("data-source",{attrs:{psource:e}})],1)}),0)])]),e._m(1)])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"item"},[a("i",{staticClass:"sidebar icon"}),e._v("\n                        Menu\n                    ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui basic newdatasource modal"},[a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"plug icon"}),e._v("\n            Register a new datasource\n        ")]),a("div",{staticClass:"content"},[a("p",[e._v("Specify a repository type and URL")])]),a("div",{staticClass:"ui newdataplugin form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"required four wide field"},[a("select",{staticClass:"ui dropdown"},[a("option",{attrs:{"data-value":"github",selected:""}},[e._v("Github")])])]),a("div",{staticClass:"required ten wide field"},[a("input",{attrs:{type:"text",id:"repo_url",placeholder:"Repository URL",autofocus:""}})])])]),a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                Cancel\n            ")]),a("div",{staticClass:"ui green ok inverted button",attrs:{id:"repo_url_ok"}},[a("i",{staticClass:"checkmark icon"}),e._v("\n                OK\n            ")])])])}],n=a("bc3a"),o=a.n(n),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui card",attrs:{id:"data-source"}},[a("div",{staticClass:"content"},[e.source.locked?a("i",{staticClass:"right floated lock icon blue"}):e._e(),"uploading"==e.upload_status?a("i",{staticClass:"right floated database icon pulsing"}):e._e(),"downloading"==e.download_status?a("i",{staticClass:"right floated cloud download icon pulsing"}):e._e(),"inspecting"==e.inspect_status?a("i",{staticClass:"right floated unhide icon pulsing"}):e._e(),a("div",{staticClass:"ui",attrs:{"data-tooltip":e.getAllErrors()}},[-1!=[e.download_status,e.upload_status,e.inspect_status].indexOf("failed")?a("i",{staticClass:"right floated red alarm icon pulsing"}):e._e()]),e.source.name?a("div",{staticClass:"left aligned header"},[a("router-link",{attrs:{to:"/source/"+e.source._id}},[a("a",[e._v(e._s(e.source.name))])])],1):e._e(),a("div",{staticClass:"meta"},[e.source.download&&e.source.download.started_at?a("span",{staticClass:"right floated time"},[e._v("Updated "+e._s(e._f("moment")(e.source.download.started_at,"from","now")))]):a("span",{staticClass:"right floated time"},[e._v("Never updated")]),a("span",{staticClass:"left floated category"},[e._v(e._s(e.release))])]),a("div",{staticClass:"left aligned description"},[a("p"),a("div",{staticClass:"ui clearing divider"}),a("div",[a("i",{staticClass:"file outline icon"}),e._v("\n                    "+e._s(e._f("currency")(e.source.count,"",0))+" document"+e._s(e.source.count>1?"s":"")+"\n                ")]),a("p")])]),a("div",{staticClass:"extra content",class:e.actionable},[e.source.data_plugin&&e.source.data_plugin.error?a("span",[a("div",{staticClass:"plugin-error"},[a("i",{staticClass:"red alarm icon"}),e._v("\n                "+e._s(e.source.data_plugin.error)+"\n            ")])]):a("span",[a("div",{staticClass:"ui icon buttons left floated mini"},[e.source.download?a("button",{staticClass:"ui button",on:{click:e.do_dump}},[a("i",{staticClass:"download cloud icon"})]):e._e(),e.source.upload?a("button",{staticClass:"ui button",on:{click:e.do_upload}},[a("i",{staticClass:"database icon"})]):e._e()]),a("div",{staticClass:"ui icon buttons left floated mini"},[a("button",{staticClass:"ui button",on:{click:e.inspect}},[a("i",{staticClass:"unhide icon"})])])]),a("div",{staticClass:"ui icon buttons right floated mini"},[e.source.data_plugin?a("button",{staticClass:"ui button",on:{click:e.unregister}},[a("i",{staticClass:"trash icon"})]):e._e()])]),a("inspect-form",{attrs:{_id:e.source._id,select_data_provider:!0}}),e.source.data_plugin?a("div",{class:[e.source.name,"ui basic unregister modal"]},[a("input",{staticClass:"plugin_url",attrs:{type:"hidden"},domProps:{value:e.source.data_plugin.plugin.url}}),e._m(0),a("div",{staticClass:"content"},[a("p",[e._v("Are you sure you want to unregister and delete data plugin "),a("b",[e._v(e._s(e.source.name))]),e._v(" ?")])]),a("div",{staticClass:"actions"},[e._m(1),a("div",{staticClass:"ui green ok inverted button",attrs:{id:e.source.name+"_unregister_yes"}},[a("i",{staticClass:"checkmark icon"}),e._v("\n                Yes\n            ")])])]):e._e()],1)},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"remove icon"}),e._v("\n            Unregister data plugin\n        ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n                No\n            ")])}],l=a("f5ef"),u=a("de0c"),d=a("dc15"),m=a("bf2a"),v={name:"data-source",props:["psource"],components:{InspectForm:u["a"]},mixins:[d["a"],m["a"]],mounted:function(){$("select.dropdown").dropdown()},data:function(){return{source_from_api:null}},computed:{source:function(){return this.source_from_api||this.psource}},methods:{do_dump:function(){return this.dump()},do_upload:function(){return console.log("do_upload"),this.upload()}}},f=v,p=(a("de8f"),a("0c7c")),h=Object(p["a"])(f,r,c,!1,null,null,null),b=h.exports,g=a("3361"),C={name:"data-source-grid",mixins:[g["a"],m["a"]],mounted:function(){console.log("DataSourceGrid mounted"),this.getSourcesStatus(),$("select.dropdown").dropdown(),$("#sources .ui.sidebar").sidebar({context:$("#sources")}).sidebar("setting","transition","overlay").sidebar("attach events","#sources .menu .item")},created:function(){l["a"].$on("change_data_plugin",this.onDataPluginChanged)},beforeDestroy:function(){l["a"].$off("change_data_plugin",this.onDataPluginChanged),$(".ui.basic.newdatasource.modal").remove()},data:function(){return{sources:[],errors:[]}},computed:{orderedSources:function(){return _.orderBy(this.sources,"name")}},components:{DataSource:b},methods:{getSourcesStatus:function(){var e=this;this.loading(),o.a.get(o.a.defaults.baseURL+"/sources").then(function(t){e.sources=t.data.result,e.loaded()}).catch(function(t){console.log("Error getting sources information: "+t),e.loaderror(t)})},register:function(){this.loading();var e=this;$(".ui.basic.newdatasource.modal").modal("setting",{detachable:!1,closable:!1,onApprove:function(){var t=$(".ui.newdataplugin.form").form("get field","repo_url").val();o.a.post(o.a.defaults.baseURL+"/dataplugin/register_url",{url:t}).then(function(t){return console.log(t.data.result),e.loaded(),!0}).catch(function(t){console.log(t),console.log("Error registering repository URL: "+t.data.error),e.loaderror(t)})},onDeny:function(){e.loaded()}}).modal("show")},onDataPluginChanged:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getSourcesStatus()}}},y=C,w=Object(p["a"])(y,s,i,!1,null,null,null);t["a"]=w.exports},d632:function(e,t,a){"use strict";var s=a("c0b4"),i=a.n(s);i.a},d831:function(e,t,a){"use strict";var s=a("36a3"),i=a.n(s);i.a},d922:function(e,t,a){"use strict";var s=a("0e14"),i=a.n(s);i.a},d9fa:function(e,t,a){"use strict";var s=a("25bb"),i=a.n(s);i.a},dc15:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},i=[],n=(a("7514"),a("7f7f"),a("bc3a")),o=a.n(n),r=a("f5ef"),c={name:"base-data-source",mounted:function(){},components:{},created:function(){r["a"].$on("change_source",this.onSourceChanged)},beforeDestroy:function(){r["a"].$off("change_source",this.onSourceChanged),$(".ui.basic.unregister.modal").remove()},data:function(){return{limit_error:null,sample_error:null}},computed:{inspect_status:function(){return this.getStatus("inspect")},upload_status:function(){return this.getStatus("upload")},download_status:function(){return this.source.download&&this.source.download.status?this.source.download.status:"unknown status"},inspect_error:function(){var e=[];if(this.source["inspect"]){var t=this.source["inspect"]["sources"];for(var a in t)if(t[a]["inspect"]){var s=t[a]["inspect"]["results"];for(var i in s)s[i]["errors"]&&Array.prototype.push.apply(e,s[i]["errors"])}}return e},upload_error:function(){return this.getError("upload")},download_error:function(){if(this.source.download&&this.source.download.error)return this.source.download.error},release:function(){if(this.source.download)return this.source.download.release;if(this.source.upload){var e=[];return $(this.source.upload.sources).each(function(){e.push(this.release)}),e.length>1?"Multiple versions":1==e.length?e[0]:"?"}return"Unknown"}},methods:{getStatus:function(e){var t="unknown";if(this.source.hasOwnProperty(e))for(var a in this.source[e].sources){if(-1!=["failed","inspecting","uploading"].indexOf(this.source[e].sources[a]["status"])){t=this.source[e].sources[a]["status"];break}t=this.source[e].sources[a]["status"]}return t},getError:function(e){var t=[];if(this.source.hasOwnProperty(e))for(var a in this.source[e].sources)this.source[e].sources[a]["error"]&&t.push(this.source[e].sources[a]["error"]);return t},getAllErrors:function(){var e=[];return this.download_error&&e.push("Dump"),this.upload_error.length&&e.push("Upload"),this.inspect_error.length&&e.push("Inspect"),e.join(" - ")+" error"},dump:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a={};null!=e&&e&&(a["release"]=e),null!=t&&(a["force"]=t),o.a.put(o.a.defaults.baseURL+"/source/".concat(this.source.name,"/dump"),a).then(function(e){console.log(e.data.result)}).catch(function(e){console.log("Error getting job manager information: "+e)})},upload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.source.name;null!=e&&(t+="."+e),o.a.put(o.a.defaults.baseURL+"/source/".concat(t,"/upload")).then(function(e){console.log(e.data.result)}).catch(function(e){console.log("Error getting job manager information: "+e)})},unregister:function(){$(".".concat(this.source.name,".ui.basic.unregister.modal")).modal("setting",{onApprove:function(){var e=$(this).find("input.plugin_url").val();o.a.delete(o.a.defaults.baseURL+"/dataplugin/unregister_url",{data:{url:e}}).then(function(e){return console.log(e.data.result),!0}).catch(function(e){console.log(e),console.log("Error unregistering repository URL: "+e.data.error)})}}).modal("show")},inspect:function(){r["a"].$emit("do_inspect",["src",this.source._id])},onSourceChanged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null==e||this.source._id!=e?void 0:this.getSource()},getSource:function(){var e=this;o.a.get(o.a.defaults.baseURL+"/source/"+this.source._id).then(function(t){e.source_from_api=t.data.result}).catch(function(e){console.log("Error getting sources information: "+e)})}}},l=c,u=(a("2e2b"),a("0c7c")),d=Object(u["a"])(l,s,i,!1,null,null,null);t["a"]=d.exports},de0c:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui basic inspect modal",attrs:{id:"inspect-"+e._id}},[a("div",{staticClass:"ui icon"},[a("i",{staticClass:"large unhide icon"}),a("h3",[e._v("Inspect data: "+e._s(e._id))])]),a("div",{staticClass:"ui fluid grid"},[a("div",{staticClass:"four wide column"}),e._m(0),e._m(1),e._m(2),a("div",{staticClass:"two wide column"}),a("div",{staticClass:"four wide column"}),e._m(3),a("div",{staticClass:"sixteen wide column"},[a("div",{staticClass:"ui fluid grid"},[e._m(4),a("div",{staticClass:"twelve wide column"},[e._m(5),e.$parent.$parent.limit_error?a("div",{staticClass:"ui negative message"},[a("p",[e._v(e._s(e.$parent.$parent.limit_error))])]):e._e()])]),a("div",{staticClass:"ui fluid grid"},[e._m(6),a("div",{staticClass:"twelve wide column"},[e._m(7),e.$parent.$parent.sample_error?a("div",{staticClass:"ui negative message"},[a("p",[e._v(e._s(e.$parent.$parent.sample_error))])]):e._e()])])]),a("div",{staticClass:"two wide column"})]),e._m(8)])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"twelve wide column"},[a("p",[a("i",[e._v("Selecting more than one mode won't affect much the performance, running time will roughly be the same.")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"four wide column"},[a("select",{staticClass:"ui dropdown",attrs:{id:"select-mode",multiple:""}},[a("option",{attrs:{value:"mapping",selected:""}},[e._v("mapping")]),a("option",{attrs:{value:"type"}},[e._v("type")]),a("option",{attrs:{value:"stats"}},[e._v("stats (experimental)")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ten wide column"},[a("div",{staticClass:"ui inverted list"},[a("a",{staticClass:"item"},[a("i",{staticClass:"right triangle icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[e._v("mapping")]),a("div",{staticClass:"description"},[e._v("Analyzes data so the inspection results can be converted into an ElasticSearch mapping (used during indexing step)")])])]),a("a",{staticClass:"item"},[a("i",{staticClass:"right triangle icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[e._v("type")]),a("div",{staticClass:"description"},[e._v("Builds a map of all types involved in the data, providing a summary of its structure")])])]),a("a",{staticClass:"item"},[a("i",{staticClass:"right triangle icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[e._v("stats")]),a("div",{staticClass:"description"},[e._v("Performs in-depth analysis about the data, including type map and basic statistics, showing how volumetry fits over data structure")])])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"twelve wide column"},[a("p",[a("i",[e._v("Optional parameters")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"four wide column"},[a("div",{staticClass:"ui inverted input"},[a("input",{attrs:{type:"text",id:"limit",placeholder:"Limit..."}})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui inverted list"},[a("a",{staticClass:"item"},[a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[e._v("Limit")]),a("div",{staticClass:"description"},[e._v("Restrict inspection to this number of documents. If empty, all documents are inspected.")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"four wide column"},[a("div",{staticClass:"ui inverted input"},[a("input",{attrs:{type:"text",id:"sample",placeholder:"Sampling (eg. 0.5)..."}})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui inverted list"},[a("a",{staticClass:"item"},[a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[e._v("Sampling data")]),a("div",{staticClass:"description"},[e._v('Randomly pick documents to inspect. Value is a float between 0 and 1.0. If sampling is 1.0, all documents are\n                                    picked, if 0.0, none of them. Combined with parameter "limit", it allows to randomly inspect a subset of the data.\n                                ')])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),e._v("\n            Cancel\n        ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),e._v("\n            OK\n        ")])])}],n=(a("7514"),a("bc3a")),o=a.n(n),r=a("f5ef"),c={name:"inspect-form",props:["_id"],mounted:function(){$("select.dropdown").dropdown()},created:function(){r["a"].$on("do_inspect",this.inspect)},beforeDestroy:function(){r["a"].$off("do_inspect",this.inspect),$("#inspect-".concat(this._id,".ui.basic.inspect.modal")).remove()},data:function(){return{limit_error:null,sample_error:null}},methods:{inspect:function(e){if("string"==typeof e)var t=e;else t=e[1];var a=this;$("#inspect-".concat(t,".ui.basic.inspect.modal")).modal("setting",{onApprove:function(){var s=$("#inspect-".concat(t)).find("#select-mode").val(),i=$("#inspect-".concat(t)).find("#limit").val(),n=$("#inspect-".concat(t)).find("#sample").val(),r={data_provider:e,mode:s};if(i){var c=parseInt(i);if(!c)return a.limit_error='"'.concat(i,'" is not an integer'),!1;r["limit"]=c}if(n){var l=parseFloat(n);if(!l)return a.sample_error=0==l?"Sample must be greater than zero...":'"'.concat(n,'" is not a float'),!1;r["sample"]=l}o.a.put(o.a.defaults.baseURL+"/inspect",r).then(function(e){console.log(e.data.result)}).catch(function(e){console.log("Error getting job manager information: "+e)})}}).modal("show")}}},l=c,u=a("0c7c"),d=Object(u["a"])(l,s,i,!1,null,null,null);t["a"]=d.exports},de8f:function(e,t,a){"use strict";var s=a("e1a2"),i=a.n(s);i.a},e0c5:function(e,t,a){},e1a2:function(e,t,a){},e46a:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",{staticClass:"ui small very compact grey table"},[e._m(0),e.build._meta?a("tbody",e._l(e.build._meta.stats,function(t,s){return a("tr",[a("td",[e._v(e._s(s))]),a("td",[e._v(e._s(e._f("currency")(t,"",0)))])])}),0):a("tfoot",[e._m(1)])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Stats")]),a("th",[e._v("Count")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",[e._v("No data")]),a("th")])}],n=(a("bc3a"),a("f5ef"),{name:"build-stats",props:["build"],mounted:function(){},beforeDestroy:function(){},components:{},methods:{}}),o=n,r=a("0c7c"),c=Object(r["a"])(o,s,i,!1,null,"0dab9eeb",null);t["a"]=c.exports},e7eb:function(e,t,a){"use strict";var s=a("52fa"),i=a.n(s);i.a},eb25:function(e,t,a){},ed20:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("button",{staticClass:"mini circular ui icon events button",attrs:{id:"events"}},[a("i",{staticClass:"bullhorn icon"}),a("a",{class:["ui mini",e.notifnumcolor,"circular label"],attrs:{id:"num_events"}},[e._v(e._s(e.events.length))])]),a("div",{staticClass:"ui messages popup top left transition hidden"},[e.events.length>0?a("div",{staticClass:"ui messages list",attrs:{id:"messages"}},[a("div",{staticClass:"ui fluid right aligned container"},[a("button",{staticClass:"mini ui button ",on:{click:function(t){return e.clearEvents()}}},[e._v("\n                Clear\n            ")])]),e._l(e.events,function(e){return a("div",{key:e._id,staticClass:"item event"},[a("event-message",{attrs:{event:e}})],1)})],2):a("div",{attrs:{nowrap:""}},[e._v("No new notifications")])])])},i=[],n=(a("7f7f"),a("7514"),a("bc3a"),a("f5ef")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:["ui tiny",e.color,"message"]},[a("i",{staticClass:"close icon",attrs:{"data-id":e.event._id}}),a("div",[a("div",{class:["ui",e.color,"horizontal label"]},[e._v(e._s(e.event.name))])]),a("div",[e._v(e._s(e.event.msg)),a("div",{staticClass:"ui right floated"},[a("i",[e._v(e._s(e.event.asctime))])])])])},r=[],c={name:"event-message",props:["event"],mounted:function(){console.log("EventMessage mounted");var e=this;$(".message .close").on("click",function(){var t=$(this).attr("data-id");t==e.event._id&&($(this).closest(".message").transition("fade"),console.log(t),n["a"].$emit("event_deleted",t))})},updated:function(){},created:function(){},beforeDestroy:function(){},watch:{},computed:{color:function(){switch(this.event.level.toUpperCase()){case"CRITICAL":return"violet";case"ERROR":return"red";case"WARNING":return"orange";case"INFO":return"green";case"DEBUG":return"blue";default:return console.log("onela"),"black"}}},data:function(){return{}},components:{},methods:{}},l=c,u=a("0c7c"),d=Object(u["a"])(l,o,r,!1,null,null,null),_=d.exports,m=10,v={name:"event-messages",mounted:function(){var e=this;console.log("EventMessages mounted"),$(".events.button").popup({popup:$(".events.popup"),on:"click",onVisible:function(){e.hasnew=!1},lastResort:"bottom right"})},components:{EventMessage:_},updated:function(){},created:function(){n["a"].$on("change_event",this.onEventChanged),n["a"].$on("event_deleted",this.eventDeleted)},beforeDestroy:function(){n["a"].$off("change_event",this.onEventChanged),n["a"].$off("event_deleted",this.eventDeleted)},watch:{},data:function(){return{events:[],hasnew:!1}},computed:{notifnumcolor:function(){if(this.hasnew)return"red"}},methods:{clearEvents:function(){this.events=[]},eventDeleted:function(e){var t=this.events.find(function(t){return t._id==e}),a=this.events.indexOf(t);a>-1&&this.events.splice(a,1)},onEventChanged:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null!=e){if("CRITICAL"!=e.level&&"hub"==e.name)return;this.events.unshift(e),this.hasnew=!0;while(this.events.length>m)this.events.pop()}}}},f=v,p=(a("3e50"),Object(u["a"])(f,s,i,!1,null,null,null));t["a"]=p.exports},f130:function(e,t,a){},f137:function(e,t,a){},f1f5:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",{staticClass:"ui small compact sortable celled table"},[e._m(0),e.ops&&e.ops.length?a("tbody",e._l(e.ops,function(t){return e.ops.length?a("tr",{staticClass:"top aligned"},[a("td",[e._v(e._s(t.op))]),a("td",[e._v(e._s(t.path))]),a("td",[e._v(e._s(t.value))])]):e._e()}),0):a("tr",[a("td",{attrs:{colspan:"3"}},[e._v("No diff results, data are the same")])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Operation")]),a("th",[e._v("Path")]),a("th",[e._v("Value")])])])}],n=(a("bc3a"),a("f5ef")),o=(a("3a8c"),{name:"json-diff-results",mounted:function(){console.log("JsonDiffResults mounted"),$("table").tablesort()},created:function(){n["a"].$on("diffed",this.setOps)},beforeDestroy:function(){n["a"].$off("diffed",this.setOps)},data:function(){return{ops:null}},components:{},methods:{setOps:function(e){this.ops=e}}}),r=o,c=(a("1792"),a("0c7c")),l=Object(c["a"])(r,s,i,!1,null,null,null);t["a"]=l.exports},f5ef:function(e,t,a){"use strict";var s=a("2b0e");t["a"]=new s["a"]},f731:function(e,t,a){},f83a:function(e,t,a){"use strict";var s=a("2033"),i=a.n(s);i.a},f9ef:function(e,t,a){},fc17:function(e,t,a){"use strict";var s=a("1b7e"),i=a.n(s);i.a},feaa:function(e,t,a){},febc:function(e,t,a){}});
//# sourceMappingURL=app.914c4b36.js.map